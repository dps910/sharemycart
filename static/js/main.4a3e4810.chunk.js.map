{"version":3,"sources":["../node_modules/ionicons/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ include: //.entry/.js$/ exclude: //.system/.entry/.js$/ groupOptions: {} namespace object","serviceWorker.js","stores/sessionStore.js","lib/convertArrayToObject.js","stores/userStore.js","components/Reusables/functions/sortItems.js","stores/shoppingStore.js","constants/lists.js","stores/needsStore.js","stores/index.js","components/Firebase/context.jsx","components/Firebase/config.js","components/Firebase/index.js","components/Firebase/firebase.js","constants/routes.js","components/Reusables/ionic/SplashLogo.jsx","components/SignUp/ionic/index.jsx","components/Reusables/ionic/LabelledBackButton.jsx","components/PasswordForget/ionic/index.jsx","components/Session/withAuthentication.jsx","components/Session/withAuthorization.jsx","components/Session/withEmailVerification.jsx","components/SignIn/ionic/index.jsx","components/PasswordChange/ionic/index.jsx","components/Reusables/ionic/UserProfileImg.jsx","components/Account/ionic/Profile.jsx","components/SignOut/ionic/index.jsx","components/Account/ionic/index.jsx","components/Users/simple-ui/UserList.js","components/Users/simple-ui/UserItem.js","components/Admin/simple-ui/index.js","models/Shopping.jsx","constants/items.js","components/Item/ionic/EditItem.jsx","components/Reusables/keys.js","components/Reusables/ionic/Avatar.jsx","components/Item/ionic/Item.jsx","components/Shopping/ionic/ShoppingList.jsx","components/Reusables/ionic/LoadingAnimation.jsx","components/Item/units.js","components/Item/ionic/CreateItem.jsx","components/Item/parseName.js","components/Shopping/ionic/Shopping.jsx","components/Shopping/ionic/ShareAction.jsx","components/Shopping/ionic/GoShoppingAction.jsx","components/List/ionic/CreateListAction.jsx","components/Shopping/ionic/ShoppingActions.jsx","components/List/ionic/AllListsButton.jsx","components/List/ionic/ListTitle.jsx","components/List/ionic/ListLifecycleIcon.jsx","components/Reusables/ionic/AllowCreateOwnNeedsIcon.jsx","components/Shopping/ionic/index.jsx","components/GoShopping/ionic/GoShopping.jsx","components/GoShopping/ionic/FinishShoppingAction.jsx","components/GoShopping/ionic/index.jsx","components/Needs/ionic/NeedsList.jsx","components/FinishShopping/ionic/FinishShopping.jsx","components/FinishShopping/ionic/index.jsx","components/List/ionic/Lists.jsx","components/ShoppingLists/ionic/index.jsx","models/Needs.jsx","components/Needs/ionic/Needs.jsx","components/Needs/ionic/index.jsx","components/NeedsLists/ionic/index.jsx","components/Needs/ionic/SharedShoppingList.jsx","components/Navigation/ionic/index.jsx","components/App/ionic/index.jsx","i18n.js","index.tsx","../node_modules/@ionic/core/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ include: //.entry/.js$/ exclude: //.system/.entry/.js$/ groupOptions: {} namespace object"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","keys","Object","module","exports","Boolean","window","location","hostname","match","SessionStore","rootStore","authUser","dbAuthenticated","setAuthUser","setDbAuthenticated","authenticated","this","decorate","observable","action","array","key","initialValue","reduce","obj","item","UserStore","users","setUsers","toObject","setUser","uid","user","userList","computed","a","b","order","createdAt","seconds","ShoppingStore","shoppingLists","currentShoppingList","currentShoppingListItems","currentDependentNeedsLists","currentDependentNeedsListsItems","initializationDone","setShoppingLists","currentShoppingLists","filter","shoppingList","isCurrent","length","setCurrentShoppingListItems","items","setCurrentDependentNeedsLists","lists","setDependentNeedsListItems","listId","done","sort","sortItems","needsList","lifecycleStatus","allDependentNeededItems","forEach","neededItems","concat","neededItem","assign","toJS","needsListId","ownerId","userId","setInitializationDone","shoppingListsArray","currentShoppingListItemsArray","currentDependentNeedsListsArray","currentDependentNeedsListsItemsArray","NeedsStore","needsLists","currentNeedsList","currentNeedsListItems","currentOriginShoppingList","currentOriginShoppingListItems","setNeedsLists","currentNeedsLists","setCurrentNeedsListItems","setCurrentOriginShoppingList","setCurrentOriginShoppingListItems","needsByName","name","needsListsArray","currentNeedsListItemsArray","potentiallyNeededItemsArray","sessionStore","userStore","shoppingStore","needsStore","FirebaseContext","React","createContext","withFirebase","Component","props","Consumer","firebase","projectId","process","config","apiKey","authDomain","databaseURL","storageBucket","emailRedirect","Firebase","doCreateUserWithEmailAndPassword","email","password","auth","createUserWithEmailAndPassword","doSignInWithEmailAndPassword","signInWithEmailAndPassword","doSignInWithGoogle","signInWithPopup","googleProvider","doSignInWithFacebook","facebookProvider","doSignInWithTwitter","twitterProvider","doSignOut","signOut","doPasswordReset","sendPasswordResetEmail","doSendEmailVerification","currentUser","sendEmailVerification","url","doPasswordUpdate","updatePassword","onAuthUserListener","next","fallback","onAuthStateChanged","get","snapshot","dbUser","exists","data","roles","emailVerified","providerData","db","doc","collection","message","messages","list","myCurrentList","type","where","createList","allowCreateOwnNeeds","add","fieldValue","serverTimestamp","editList","set","editedAt","deleteList","toBeDeleted","deleted","delete","limit","docs","s","ref","update","createListFromTemplate","template","excludeShoppedItems","newList","setCurrentShoppingList","setCurrentNeedsList","listItems","itemSnapshot","shopped","shoppedAt","shoppedBy","createItem","listItem","editItem","deleteItem","setItemsOrder","batch","i","commit","shopItem","myCurrentShoppingList","myShoppingLists","includeArchived","status","push","createShoppingList","_setShoppingListLifecycleStatusPropagating","targetStatus","dependentNeedsListOfShoppingList","openShopping","goShopping","finishShopping","archiveShoppingList","myCurrentNeedsList","createNeedsList","archiveNeedsList","myNeedsLists","shoppingListId","createNeedsListForShoppingList","size","myNeedsListsForShoppingList","existingNeedsList","shoppingListOwnerId","needsListsRef","q","sl","addNeededItemFromShoppingListItem","shoppingListItem","quantity","unit","originShoppingItemUid","parentId","app","initializeApp","firestore","FieldValue","emailAuthProvider","EmailAuthProvider","useDeviceLanguage","GoogleAuthProvider","FacebookAuthProvider","TwitterAuthProvider","SHOPPING","SplashLogo","className","src","style","maxWidth","color","textStart","textEnd","INITIAL_STATE","username","passwordOne","isAdmin","error","SignUpFormBase","onSubmit","event","state","ERROR_MSG_ACCOUNT_EXISTS","t","merge","setState","from","pathname","history","ROUTES","catch","preventDefault","onChange","target","value","onChangeCheckbox","checked","isInvalid","placeholder","onIonChange","clearInput","padding-horizontal","clear-input","autocomplete","disabled","expand","Trans","SignUpLink","to","SignUpForm","compose","withRouter","withTranslation","SignUpPage","slot","fill","LabelledBackButton","defaultHref","useTranslation","text","data-test","PasswordForgetFormBase","class","PasswordForgetLink","PasswordForgetPage","PasswordForgetForm","withAuthentication","WithAuthentication","JSON","parse","localStorage","getItem","listener","registerAuthListener","handler","unregisterHandler","setItem","stringify","removeItem","inject","withAuthorization","condition","WithAuthorization","observer","withEmailVerification","WithEmailVerification","onSendEmailVerification","isSent","provider","providerId","includes","onClick","reload","navigateIfRequested","redirectToReferrer","setTimeout","SignInFormBase","call","SignInGoogleBase","redirectUri","socialAuthUser","displayName","icon","logoGoogle","SignInFacebookBase","additionalUserInfo","profile","logoFacebook","SignInTwitterBase","logoTwitter","SignInForm","SignInGoogle","isShareRedirect","passwordTwo","PasswordChangeFormBase","PasswordChangeButton","href","pencilOutline","PasswordChangeForm","PasswordChangePage","UserProfileImg","userImage","photoURL","emailMd5","md5","namePathComponent","encodeURIComponent","alt","borderRadius","padding","logOut","collapse","UserList","loading","unsubscribe","onSnapshot","UserItem","onSendPasswordResetEmail","params","exact","path","component","Shopping","onListenForShoppingLists","unsubscribeLists","orderBy","currentShoppingListId","listsLoading","itemsLoading","unsubscribeItems","onListenForCurrentShoppingListItems","unsubscribeDependentNeedsLists","unsubscribeAllDependentNeedsListItems","onListenForDependentNeedsLists","shoppingItems","parent","originShoppingListId","dependentNeedsLists","unsubscribeDependentNeedsListsItems","onListenForDependentNeedsListsItems","owner","dependentNeedsListsItems","onChangeText","editingListName","handleCreateShoppingList","onCreateShoppingList","onEditShoppingList","shoppingListSnapshot","onRemoveShoppingList","onSetCurrentShoppingList","onReorderItems","onOpenShopping","onGoShopping","onFinishShopping","onArchiveShoppingList","onCreateItemForCurrentShoppingList","console","onEditShoppingItem","onRemoveShoppingItem","onShopShoppingItem","ensureExistingCurrentShoppingList","_tryInitialization","unregisterAllListeners","ITEM_TYPE_SHOPPING","ITEM_TYPE_NEW_SHOPPING","ITEM_TYPE_NEED","ITEM_TYPE_IN_SHOPPING","ITEM_TYPE_BRING_ALONG","EditItem","onKeyPress","which","concludeEditing","showToast","nameInput","createRef","quantityInput","confirm","onEditingConcluded","current","setFocus","parentElement","srcElement","unitOfMeasure","mode","required","setUnit","detail","marginLeft","width","autocapitalize","autocorrect","debounce","marginRight","minWidth","onKeyUp","onIonInput","onIonBlur","onBlur","min","pattern","textAlign","closeOutline","checkmarkOutline","isOpen","onDidDismiss","duration","Avatar","height","Item","inEdit","readOnly","onShopItem","setEditMode","bringAlongItems","listEditMode","ownList","onCreateNeed","onDeleteItem","needIcon","quantityLabel","deleteIcon","trash","editIcon","createOutline","ownerIcon","BringAlongQuantity","totalQuantity","total","bringAlongItem","Number","display","shareSocialOutline","itemDisplay","onItemClick","cursor","textDecoration","dependentNeededItems","ShoppingList","onChangeEditName","editName","onSaveEditName","onEditList","addSaveEditHandler","saveEdit","bind","complete","children","position","k","hasOwnProperty","onEditItem","editMode","bringAlongItemsByShoppingItem","otherUsersOwnNeededItems","originItem","find","originShoppingItemId","ownedByOtherUser","allItems","relatedBringAlongItems","lines","onIonItemReorder","doReorder","LoadingAnimation","UNITS","CreateItem","itemDescription","prefixRegex","RegExp","units","join","prefixMatch","postfixRegex","postfixMatch","parseName","_setFocus","isFirstItem","highlight","readonly","addOutline","itemInCreation","statusTransitionTriggered","model","newItem","onCreatingItemChange","onCreateComplete","dependentNeedLists","ShareListFab","generateShareLink","origin","_hasUnmounted","sharingMessageTextTranslation","sharingMessageText","title","cartOutline","CreateListAction","hasItems","CreateShoppingListAction","vertical","horizontal","ellipsisVerticalOutline","side","AllListsButton","label","listOutline","ListTitle","ListLifecycleIcon","defaultIcon","receiptOutline","trashBinOutline","AllowCreateOwnNeedsIcon","lockOpenOutline","lockClosedOutline","ShoppingPage","saveHandler","handlerFn","EditButton","SaveButton","saveOutline","ShoppingModel","GoShopping","onCreateItem","FinishShoppingAction","NeedsList","onToggleEditMode","editText","onChangeEditText","onSaveEditText","onEditNeedsList","FinishShopping","dependentNeedsList","broughtAlongItems","DoneButton","checkmarkDoneOutline","FinishShoppingPage","l","onSetCurrentList","hrefOnClick","fontSize","Date","toLocaleDateString","documentTextOutline","onRemoveList","CreateShoppingListButton","ShoppingListsPage","Needs","onListenForNeedsLists","currentNeedsListId","currentOriginShoppingListId","onListenForCurrentNeedsListItems","unsubscribeOriginShoppingList","unsubscribeOriginShoppingListItems","onListenForOriginShoppingList","clearOriginShoppingListInStore","onListenForOriginShoppingListItems","originListId","OriginShoppingListItems","onCreateNeedsList","needsListSnapshot","onArchiveNeedsList","onRemoveNeedsList","onSetCurrentNeedsList","onCreateItemForCurrentNeedsList","potentiallyNeededItem","onEditNeededItem","onRemoveNeededItem","onAddFromShoppingListItem","INITIAL_ITEM","potentialNeed","potentiallyNeededItems","itemHasBeenCopied","createNeedsVisible","createNeedsNotAllowed","NothingSharedYet","StatusMessage","messageMapping","copyPotentialNeed","NeedsPage","ListHeader","NeedsModel","NeedsListsPage","NeedsInSharedShoppingList","sharedShoppingList","sharingUser","isValid","replace","Content","onCreateNeedsListForShoppingList","CreateNeedsListButton","NavigationAuth","render","SharedShoppingList","tab","personOutline","NavigationNonAuth","currentLocation","useLocation","SignInPage","lockClosed","App","handlerRegistered","i18n","use","LanguageDetector","initReactI18next","init","resources","en","translation","de","fallbackLng","debug","keySeparator","interpolation","escapeValue","ReactDOM","store","Provider","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.4a3e4810.chunk.js","sourcesContent":["var map = {\n\t\"./ion-icon.entry.js\": [\n\t\t225,\n\t\t90\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 101;\nmodule.exports = webpackAsyncContext;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n\twindow.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n    \t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport function register(config) {\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n\t\tif (publicUrl.origin !== window.location.origin) {\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\n\t\t\treturn\n\t\t}\n\n\t\twindow.addEventListener('load', () => {\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n\t\t\tif (isLocalhost) {\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl, config)\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\t// Is not localhost. Just register service worker\n\t\t\t\tregisterValidSW(swUrl, config)\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunction registerValidSW(swUrl, config) {\n\tnavigator.serviceWorker\n\t\t.register(swUrl)\n\t\t.then(registration => {\n\t\t\tregistration.onupdatefound = () => {\n\t\t\t\tconst installingWorker = registration.installing\n\t\t\t\tif (installingWorker == null) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tinstallingWorker.onstatechange = () => {\n\t\t\t\t\tif (installingWorker.state === 'installed') {\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\n\t\t\t\t\t\t\t// content until all client tabs are closed.\n\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.')\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\t.catch(error => {\n\t\t\tconsole.error('Error during service worker registration:', error)\n\t\t})\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n\t// Check if the service worker can be found. If it can't reload the page.\n\tfetch(swUrl)\n\t\t.then(response => {\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\t\tconst contentType = response.headers.get('content-type')\n\t\t\tif (\n\t\t\t\tresponse.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n\t\t\t) {\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\t\tnavigator.serviceWorker.ready.then(registration => {\n\t\t\t\t\tregistration.unregister().then(() => {\n\t\t\t\t\t\twindow.location.reload()\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\t// Service worker found. Proceed as normal.\n\t\t\t\tregisterValidSW(swUrl, config)\n\t\t\t}\n\t\t})\n\t\t.catch(() => {\n\t\t\tconsole.log(\n\t\t\t\t'No internet connection found. App is running in offline mode.'\n\t\t\t)\n\t\t})\n}\n\nexport function unregister() {\n\tif ('serviceWorker' in navigator) {\n\t\tnavigator.serviceWorker.ready.then(registration => {\n\t\t\tregistration.unregister()\n\t\t})\n\t}\n}\n","import { observable, action, decorate } from 'mobx'\n\nclass SessionStore {\n\tauthUser = null;\n\tdbAuthenticated = false;\n\n\tconstructor(rootStore) {\n\t\tthis.rootStore = rootStore\n\t}\n\n\tsetAuthUser = authUser => {\n\t\tthis.authUser = authUser\n\t};\n\n\tsetDbAuthenticated = authenticated => this.dbAuthenticated = authenticated\n}\n\ndecorate(SessionStore, {\n\tauthUser: observable,\n\tdbAuthenticated: observable,\n\n\tsetAuthUser: action,\n\tsetDbAuthenticated: action,\n})\n\nexport default SessionStore\n","export default (array, key = 'uid') => {\n\tconst initialValue = {}\n\treturn array.reduce((obj, item) => {\n\t\treturn {\n\t\t\t...obj,\n\t\t\t[item[key]]: item,\n\t\t}\n\t}, initialValue)\n}","import { decorate, observable, action, computed } from 'mobx'\nimport toObject from '../lib/convertArrayToObject'\nclass UserStore {\n\tusers = {};\n\n\tconstructor(rootStore) {\n\t\tthis.rootStore = rootStore\n\t}\n\n\tsetUsers = users => {\n\t\tthis.users = toObject(users)\n\t};\n\n\tsetUser = (uid, user) => {\n\t\tif (!this.users) {\n\t\t\tthis.users = {}\n\t\t}\n\n\t\tthis.users[uid] = user\n\t};\n\n\tget userList() {\n\t\treturn Object.keys(this.users || {}).map(key => ({\n\t\t\t...this.users[key],\n\t\t\tuid: key,\n\t\t}))\n\t}\n}\n\ndecorate(UserStore, {\n\tusers: observable,\n\n\tsetUser: action,\n\tsetUsers: action,\n\n\tuserList: computed,\n})\n\nexport default UserStore\n","export default (a, b) => {\n\tif (a.order && b.order && a.order !== b.order) return a.order - b.order\n\tif (a.order && !b.order) return a.order\n\tif (!a.order && b.order) return -1 * b.order\n\tif (a.createdAt && b.createdAt) return b.createdAt.seconds - a.createdAt.seconds\n\tif (!a.createdAt) return -1\n\tif (!b.createdAt) return 1\n\treturn 0\n}","import { decorate, observable, action, computed, toJS } from 'mobx'\nimport toObject from '../lib/convertArrayToObject'\nimport sortItems from '../components/Reusables/functions/sortItems'\nimport { LIFECYCLE_STATUS_ARCHIVED } from '../constants/lists'\n\n// This store holds all information needed to create and manage shopping lists \n// and their items\n\nclass ShoppingStore {\n\tshoppingLists = null;\n\tcurrentShoppingList = null;\n\tcurrentShoppingListItems = null;\n\tcurrentDependentNeedsLists = null;\n\tcurrentDependentNeedsListsItems = null;\n\tinitializationDone = false;\n\n\tconstructor(rootStore) {\n\t\tthis.rootStore = rootStore\n\t}\n\n\tsetInitializationDone(done) {\n\t\tthis.initializationDone = done\n\t}\n\n\tsetShoppingLists = shoppingLists => {\n\t\tthis.shoppingLists = toObject(shoppingLists)\n\n\t\tconst currentShoppingLists = shoppingLists.filter(shoppingList => !!shoppingList.isCurrent)\n\t\tthis.currentShoppingList = (currentShoppingLists.length > 0 && currentShoppingLists[0]) || null\n\t};\n\n\tsetCurrentShoppingListItems = (items) => {\n\t\tthis.currentShoppingListItems = toObject(items)\n\t}\n\n\tsetCurrentDependentNeedsLists = (lists) => {\n\t\tthis.currentDependentNeedsLists = toObject(lists)\n\t}\n\n\tsetDependentNeedsListItems = (listId, items) => {\n\t\tthis.currentDependentNeedsLists[listId].items = items\n\t}\n\n\tget shoppingListsArray() {\n\t\treturn Object.keys(this.shoppingLists || {}).map(key => ({\n\t\t\t...this.shoppingLists[key],\n\t\t\tuid: this.shoppingLists[key].uid,\n\t\t}))\n\t}\n\n\tget currentShoppingListItemsArray() {\n\t\treturn Object.keys(this.currentShoppingListItems || {}).map(key => ({\n\t\t\t...this.currentShoppingListItems[key],\n\t\t\tuid: this.currentShoppingListItems[key].uid,\n\t\t}))\n\t\t\t.sort((a, b) => sortItems(a, b))\n\t}\n\n\tget currentDependentNeedsListsArray() {\n\t\treturn Object.keys(this.currentDependentNeedsLists || {})\n\t\t\t.filter(needsList => needsList.lifecycleStatus !== LIFECYCLE_STATUS_ARCHIVED)\n\t\t\t.map(key => ({\n\t\t\t\t...this.currentDependentNeedsLists[key],\n\t\t\t\tuid: this.currentDependentNeedsLists[key].uid,\n\t\t\t}))\n\t}\n\n\tget currentDependentNeedsListsItemsArray() {\n\t\tif (!this.currentDependentNeedsLists) return []\n\n\t\tlet allDependentNeededItems = []\n\n\t\tObject.keys(this.currentDependentNeedsLists || {}).forEach((key) => {\n\t\t\tconst neededItems = this.currentDependentNeedsLists[key].items\n\t\t\tif (neededItems && neededItems.length) {\n\t\t\t\tconst needsList = this.currentDependentNeedsLists[key]\n\t\t\t\tallDependentNeededItems = allDependentNeededItems.concat(neededItems.map(\n\t\t\t\t\tneededItem => Object.assign(toJS(neededItem),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tneedsListId: toJS(needsList.uid),\n\t\t\t\t\t\t\townerId: toJS(needsList.userId)\n\t\t\t\t\t\t}\n\t\t\t\t\t)))\n\t\t\t}\n\t\t})\n\t\treturn allDependentNeededItems\n\t}\n}\n\ndecorate(ShoppingStore, {\n\tshoppingLists: observable,\n\tcurrentShoppingList: observable,\n\tcurrentShoppingListItems: observable,\n\tcurrentDependentNeedsLists: observable,\n\tcurrentDependentNeedsListsItems: observable,\n\tinitializationDone: observable,\n\n\tsetInitializationDone: action,\n\tsetShoppingLists: action,\n\tsetCurrentShoppingListItems: action,\n\tsetCurrentDependentNeedsLists: action,\n\tsetDependentNeedsListItems: action,\n\n\tshoppingListsArray: computed,\n\tcurrentShoppingListItemsArray: computed,\n\tcurrentDependentNeedsListsArray: computed,\n\tcurrentDependentNeedsListsItemsArray: computed,\n})\n\nexport default ShoppingStore\n\n","export const LIST_TYPE_SHOPPING = 'shopping'\nexport const LIST_TYPE_NEED = 'needs'\n\nexport const LIFECYCLE_STATUS_OPEN = 'open'\nexport const LIFECYCLE_STATUS_SHOPPING = 'shopping'\nexport const LIFECYCLE_STATUS_FINISHED = 'finished'\nexport const LIFECYCLE_STATUS_ARCHIVED = 'archived'","import { observable, action, computed, decorate } from 'mobx'\nimport toObject from '../lib/convertArrayToObject'\nimport sortItems from '../components/Reusables/functions/sortItems'\n\n// This store holds all information needed to create and manage needs lists \n// and their items\n\nclass NeedsStore {\n\tneedsLists = null;\n\tcurrentNeedsList = null;\n\tcurrentNeedsListItems = null;\n\tcurrentOriginShoppingList = null;\n\tcurrentOriginShoppingListItems = null;\n\tinitializationDone = false;\n\n\tconstructor(rootStore) {\n\t\tthis.rootStore = rootStore\n\t}\n\n\tsetInitializationDone(done) {\n\t\tthis.initializationDone = done\n\t}\n\n\tsetNeedsLists = needsLists => {\n\t\tthis.needsLists = toObject(needsLists)\n\n\t\tconst currentNeedsLists = needsLists.filter(needsList => !!needsList.isCurrent)\n\t\tthis.currentNeedsList = (currentNeedsLists.length > 0 && currentNeedsLists[0]) || null\n\n\t};\n\n\tsetCurrentNeedsListItems = (items) => {\n\t\tthis.currentNeedsListItems = toObject(items)\n\t}\n\n\tsetCurrentOriginShoppingList = shoppingList => this.currentOriginShoppingList = shoppingList;\n\n\tsetCurrentOriginShoppingListItems = (items) => {\n\t\tthis.currentOriginShoppingListItems = toObject(items)\n\t}\n\n\tget needsListsArray() {\n\t\treturn Object.keys(this.needsLists || {}).map(key => ({\n\t\t\t...this.needsLists[key],\n\t\t\tuid: this.needsLists[key].uid,\n\t\t}))\n\t}\n\n\tget currentNeedsListItemsArray() {\n\t\treturn Object.keys(this.currentNeedsListItems || {}).map(key => ({\n\t\t\t...this.currentNeedsListItems[key],\n\t\t\tuid: this.currentNeedsListItems[key].uid,\n\t\t}))\n\t\t\t.sort((a, b) => sortItems(a, b))\n\t}\n\n\tget potentiallyNeededItemsArray() {\n\t\t// all items from the current origin shopping list are potential needs\n\t\t// which are not already moved to the needs list\n\t\tconst needsByName = {}\n\t\tObject.keys(this.currentNeedsListItems || {}).forEach(key => {\n\t\t\tconst item = this.currentNeedsListItems[key]\n\t\t\tneedsByName[item.name] = item\n\t\t})\n\n\t\treturn Object.keys(this.currentOriginShoppingListItems || {})\n\t\t\t.map(key => ({\n\t\t\t\t...this.currentOriginShoppingListItems[key],\n\t\t\t\tuid: this.currentOriginShoppingListItems[key].uid,\n\t\t\t}))\n\t\t\t.filter(item => !needsByName[item.name])\n\t\t\t.sort((a, b) => sortItems(a, b))\n\t}\n}\n\ndecorate(NeedsStore, {\n\tneedsLists: observable,\n\tcurrentNeedsList: observable,\n\tcurrentNeedsListItems: observable,\n\tcurrentOriginShoppingList: observable,\n\tcurrentOriginShoppingListItems: observable,\n\tinitializationDone: observable,\n\t\n\tsetInitializationDone: action,\n\tsetNeedsLists: action,\n\tsetCurrentNeedsListItems: action,\n\tsetCurrentOriginShoppingList: action,\n\tsetCurrentOriginShoppingListItems: action,\n\n\tneedsListsArray: computed,\n\tcurrentNeedsListItemsArray: computed,\n\tpotentiallyNeededItemsArray: computed,\n})\n\nexport default NeedsStore\n","import SessionStore from './sessionStore'\nimport UserStore from './userStore'\nimport ShoppingStore from './shoppingStore'\nimport NeedsStore from './needsStore'\n\nclass RootStore {\n\tconstructor() {\n\t\tthis.sessionStore = new SessionStore(this)\n\t\tthis.userStore = new UserStore(this)\n\t\tthis.shoppingStore = new ShoppingStore(this)\n\t\tthis.needsStore = new NeedsStore(this)\n\t}\n}\n\nconst rootStore = new RootStore()\n\nexport default rootStore\n","import React from 'react'\n\nconst FirebaseContext = React.createContext({})\n\nexport const withFirebase = Component => props => (\n\t<FirebaseContext.Consumer>\n\t\t{firebase => <Component {...props} firebase={firebase} />}\n\t</FirebaseContext.Consumer>\n)\n\nexport default FirebaseContext\n","/* eslint-disable no-undef */\n\nconst projectId = process.env.REACT_APP_BACKEND_PROJECT_ID\nconst apiKey = process.env.REACT_APP_BACKEND_API_KEY\n\nconst config = {\n\tapiKey,\n\tauthDomain: `${projectId}.firebaseapp.com`,\n\tdatabaseURL: `https://${projectId}.firebaseio.com`,\n\tprojectId: `${projectId}`,\n\tstorageBucket: `${projectId}.appspot.com`,\n\temailRedirect: process.env.REACT_APP_CONFIRMATION_EMAIL_REDIRECT,\n}\n\nexport default config","import FirebaseContext, { withFirebase } from './context'\nimport Firebase from './firebase'\n\nexport default Firebase\n\nexport { FirebaseContext, withFirebase }\n","/*eslint no-process-env: \"error\"*/\n\nimport app from 'firebase/app'\nimport 'firebase/auth'\nimport 'firebase/firestore'\nimport { LIST_TYPE_SHOPPING, LIST_TYPE_NEED, LIFECYCLE_STATUS_OPEN, LIFECYCLE_STATUS_SHOPPING, LIFECYCLE_STATUS_FINISHED, LIFECYCLE_STATUS_ARCHIVED } from '../../constants/lists' // can be used in order to create queries which intentionally don't match anything\nimport config from './config'\n\nconst INVALID_DUMMY_UID = 'idonotexist'\n\nclass Firebase {\n\tconstructor() {\n\n\t\tapp.initializeApp(config)\n\n\t\t/* Helper */\n\n\t\tthis.fieldValue = app.firestore.FieldValue\n\t\tthis.emailAuthProvider = app.auth.EmailAuthProvider\n\n\t\t/* Firebase APIs */\n\n\t\tthis.auth = app.auth()\n\t\tthis.db = app.firestore()\n\n\t\tthis.auth.useDeviceLanguage()\n\t\t/* Social Sign In Method Provider */\n\n\t\tthis.googleProvider = new app.auth.GoogleAuthProvider()\n\t\tthis.facebookProvider = new app.auth.FacebookAuthProvider()\n\t\tthis.twitterProvider = new app.auth.TwitterAuthProvider()\n\t}\n\n\t// *** Auth API ***\n\n\tdoCreateUserWithEmailAndPassword = (email, password) =>\n\t\tthis.auth.createUserWithEmailAndPassword(email, password)\n\n\tdoSignInWithEmailAndPassword = (email, password) =>\n\t\tthis.auth.signInWithEmailAndPassword(email, password)\n\n\tdoSignInWithGoogle = (/*{redirectUri, state}*/) => {\n\t\t// signinWithRedirect is curretly not possible:\n\t\t// since a user might have opened a shopping list from a link as first step, \n\t\t// we need to redirect to this very same (/share<GUID>)\n\t\t// For this, we'd need to adapt the redirectURI and the state.\n\t\t// However, both are reserved properties and cannot be set by the consumer, \n\t\t// see https://firebase.google.com/docs/reference/js/firebase.auth.GoogleAuthProvider#setcustomparameters\n\t\t// Leaving the code below for documentation purposes\n\t\t// const provider = new app.auth.GoogleAuthProvider()\n\t\t// provider.setCustomParameters({ redirect_uri: redirectUri || '/', state })\n\t\t// return this.auth.signInWithRedirect(provider)\n\t\t\n\t\treturn this.auth.signInWithPopup(this.googleProvider)\n\n\t}\n\n\tdoSignInWithFacebook = () =>\n\t\tthis.auth.signInWithPopup(this.facebookProvider)\n\n\tdoSignInWithTwitter = () =>\n\t\tthis.auth.signInWithPopup(this.twitterProvider)\n\n\tdoSignOut = () => this.auth.signOut()\n\n\tdoPasswordReset = email => this.auth.sendPasswordResetEmail(email)\n\n\tdoSendEmailVerification = () =>\n\t\tthis.auth.currentUser.sendEmailVerification({\n\t\t\turl: config.emailRedirect,\n\t\t})\n\n\tdoPasswordUpdate = password =>\n\t\tthis.auth.currentUser.updatePassword(password)\n\n\t// *** Merge Auth and DB User API *** //\n\n\tonAuthUserListener = (next, fallback) =>\n\t\tthis.auth.onAuthStateChanged(authUser => {\n\t\t\tif (authUser) {\n\t\t\t\tthis.user(authUser.uid)\n\t\t\t\t\t.get()\n\t\t\t\t\t.then(snapshot => {\n\n\t\t\t\t\t\tconst dbUser = snapshot.exists\n\t\t\t\t\t\t\t? snapshot.data()\n\t\t\t\t\t\t\t: {}\n\n\t\t\t\t\t\t// default empty roles\n\t\t\t\t\t\tif (!dbUser.roles) {\n\t\t\t\t\t\t\tdbUser.roles = {}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// merge auth and db user\n\t\t\t\t\t\tauthUser = {\n\t\t\t\t\t\t\tuid: authUser.uid,\n\t\t\t\t\t\t\temail: authUser.email,\n\t\t\t\t\t\t\temailVerified: authUser.emailVerified,\n\t\t\t\t\t\t\tproviderData: authUser.providerData,\n\t\t\t\t\t\t\t...dbUser,\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnext(authUser)\n\t\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tfallback()\n\t\t\t}\n\t\t})\n\n\t// *** User API ***\n\n\tuser = uid => this.db.doc(`users/${uid}`)\n\tusers = () => this.db.collection('users')\n\n\t// *** Message API ***\n\n\tmessage = uid => this.db.doc(`messages/${uid}`)\n\tmessages = () => this.db.collection('messages')\n\n\t// *** Lists API ***\n\tlist = uid => this.db.doc(`lists/${uid}`)\n\tlists = () => this.db.collection('/lists')\n\n\tmyCurrentList = (type) => this.db.collection('/lists')\n\t\t.where('type', '==', type)\n\t\t.where('isCurrent', '==', true)\n\t\t.where('userId', '==', this.auth.currentUser\n\t\t\t? this.auth.currentUser.uid\n\t\t\t: INVALID_DUMMY_UID)\n\n\tcreateList = ({ name = '', allowCreateOwnNeeds = true }, type) => this.lists().add({\n\t\tname,\n\t\tallowCreateOwnNeeds,\n\t\ttype,\n\t\tuserId: this.auth.currentUser.uid,\n\t\tisCurrent: true,\n\t\tlifecycleStatus: LIFECYCLE_STATUS_OPEN,\n\t\tcreatedAt: this.fieldValue.serverTimestamp(),\n\t})\n\n\teditList = (uid, list) => this.list(uid)\n\t\t.set(Object.assign(list,\n\t\t\t{\n\t\t\t\teditedAt: this.fieldValue.serverTimestamp()\n\t\t\t}))\n\n\tdeleteList = async uid => {\n\t\tconst toBeDeleted = await this.list(uid).get()\n\n\t\tif (toBeDeleted.exists) {\n\t\t\tconst deleted = toBeDeleted.data()\n\n\t\t\tawait this.list(uid).delete()\n\n\t\t\tif (deleted.isCurrent) {\n\t\t\t\t// make sure there's a new current list\n\t\t\t\tconst otherListOfSameType = await this.lists()\n\t\t\t\t\t.where('userId', '==', deleted.userId)\n\t\t\t\t\t.where('type', '==', deleted.type)\n\t\t\t\t\t.where('lifecycleStatus', '==', LIFECYCLE_STATUS_OPEN)\n\t\t\t\t\t.limit(1)\n\t\t\t\t\t.get()\n\n\t\t\t\totherListOfSameType.docs.forEach(\n\t\t\t\t\t(s) => s.ref.update('isCurrent', true)\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t}\n\n\tcreateListFromTemplate = async (template, excludeShoppedItems = true) => {\n\t\tconst newList = await this.createList({}, template.type)\n\n\t\tif (template.type === LIST_TYPE_SHOPPING) {\n\t\t\tthis.setCurrentShoppingList(newList.id)\n\t\t} else {\n\t\t\tthis.setCurrentNeedsList(newList.id)\n\t\t}\n\n\t\tconst templateItems = await this.listItems(template.uid).get()\n\t\ttemplateItems.forEach(itemSnapshot => {\n\t\t\tconst item = itemSnapshot.data()\n\t\t\tif (!item.shopped || !excludeShoppedItems) {\n\t\t\t\tdelete item.id\n\t\t\t\tdelete item.shopped\n\t\t\t\tdelete item.shoppedAt\n\t\t\t\tdelete item.shoppedBy\n\t\t\t\tthis.createItem(newList.id, item)\n\t\t\t}\n\t\t})\n\n\t\treturn newList\n\t}\n\n\tlistItems = listId => this.db.doc(`lists/${listId}`)\n\t\t.collection('items')\n\n\tlistItem = (listId, uid) => this.db.doc(`lists/${listId}`)\n\t\t.collection('/items/')\n\t\t.doc(uid)\n\n\t// CRUD\n\tcreateItem = (listId, item) => this.listItems(listId)\n\t\t.add(Object.assign(item,\n\t\t\t{\n\t\t\t\torder: item.order || -1,\n\t\t\t\tcreatedAt: this.fieldValue.serverTimestamp()\n\t\t\t}))\n\n\teditItem = (listId, item) => this.listItem(listId, item.uid)\n\t\t.set(Object.assign(item,\n\t\t\t{\n\t\t\t\teditedAt: this.fieldValue.serverTimestamp()\n\t\t\t}))\n\n\tdeleteItem = (listId, uid) => this.listItem(listId, uid)\n\t\t.delete()\n\n\tsetItemsOrder = (listId, items, order) => {\n\t\tconst batch = this.db.batch()\n\t\titems.forEach(i => batch.update(this.listItem(listId, i.uid), 'order', order[i.uid] || 0))\n\t\tbatch.commit()\n\t}\n\n\tshopItem = (listId, uid, shopped = true) => this.listItem(listId, uid)\n\t\t.update(\n\t\t\t{\n\t\t\t\tshopped,\n\t\t\t\tshoppedBy: this.auth.currentUser.uid,\n\t\t\t\tshoppedAt: this.fieldValue.serverTimestamp(),\n\t\t\t\teditedAt: this.fieldValue.serverTimestamp()\n\t\t\t}\n\t\t)\n\n\t// *** Shopping API ***\n\tmyCurrentShoppingList = () => this.myCurrentList(LIST_TYPE_SHOPPING)\n\n\tmyShoppingLists = (includeArchived = false) => {\n\t\tconst status = [LIFECYCLE_STATUS_OPEN, LIFECYCLE_STATUS_SHOPPING, LIFECYCLE_STATUS_FINISHED, LIFECYCLE_STATUS_ARCHIVED]\n\t\tif (includeArchived) status.push(LIFECYCLE_STATUS_ARCHIVED)\n\t\treturn this.lists()\n\t\t\t.where('userId', '==', this.auth.currentUser\n\t\t\t\t? this.auth.currentUser.uid\n\t\t\t\t: INVALID_DUMMY_UID)\n\t\t\t.where('type', '==', LIST_TYPE_SHOPPING)\n\t\t// .where('lifecycleStatus', \"in\", status) yields an empty list, though it should work as per the spec\n\t}\n\n\tsetCurrentShoppingList = uid => {\n\t\tthis.myCurrentShoppingList().get()\n\t\t\t.then((snapshot) => {\n\t\t\t\tsnapshot.docs.forEach((s) => s.ref.update('isCurrent', false))\n\t\t\t})\n\t\t\t.then(() => this.list(uid).update('isCurrent', true))\n\t}\n\n\tcreateShoppingList = async ({ name }) => {\n\t\tconst snapshot = await this.myCurrentShoppingList().get()\n\t\tsnapshot.docs.forEach((s) => s.ref.update('isCurrent', false))\n\n\t\treturn this.createList({ name }, LIST_TYPE_SHOPPING)\n\t};\n\n\t_setShoppingListLifecycleStatusPropagating = async (uid, targetStatus) => {\n\t\tconst batch = this.db.batch()\n\t\tbatch.update(this.list(uid), 'lifecycleStatus', targetStatus)\n\t\tconst dependentShoppingLists = await this.dependentNeedsListOfShoppingList(uid).get()\n\t\tdependentShoppingLists.forEach(needsList => {\n\t\t\tbatch.update(needsList.ref, 'lifecycleStatus', targetStatus)\n\t\t})\n\t\treturn batch.commit()\n\t}\n\n\topenShopping = async (shoppingList) => {\n\t\tif (shoppingList.lifecycleStatus !== LIFECYCLE_STATUS_OPEN\n\t\t\t&& shoppingList.lifecycleStatus !== LIFECYCLE_STATUS_ARCHIVED) {\n\t\t\tthis._setShoppingListLifecycleStatusPropagating(shoppingList.uid, LIFECYCLE_STATUS_OPEN)\n\t\t}\n\t}\n\n\tgoShopping = async (shoppingList) => {\n\t\tif (shoppingList.lifecycleStatus !== LIFECYCLE_STATUS_SHOPPING\n\t\t\t&& shoppingList.lifecycleStatus !== LIFECYCLE_STATUS_ARCHIVED) {\n\t\t\tthis._setShoppingListLifecycleStatusPropagating(shoppingList.uid, LIFECYCLE_STATUS_SHOPPING)\n\t\t}\n\t}\n\n\tfinishShopping = async (shoppingList) => {\n\t\tif (shoppingList.lifecycleStatus !== LIFECYCLE_STATUS_FINISHED\n\t\t\t&& shoppingList.lifecycleStatus !== LIFECYCLE_STATUS_ARCHIVED) {\n\t\t\tthis._setShoppingListLifecycleStatusPropagating(shoppingList.uid, LIFECYCLE_STATUS_FINISHED)\n\t\t}\n\t}\n\n\tarchiveShoppingList = async (shoppingList) => {\n\t\tif (shoppingList.lifecycleStatus !== LIFECYCLE_STATUS_ARCHIVED) {\n\t\t\tthis._setShoppingListLifecycleStatusPropagating(shoppingList.uid, LIFECYCLE_STATUS_ARCHIVED)\n\t\t}\n\t}\n\n\n\t// *** Needs API ***\n\tmyCurrentNeedsList = () => this.myCurrentList(LIST_TYPE_NEED)\n\n\tsetCurrentNeedsList = uid => {\n\t\tthis.myCurrentNeedsList().get()\n\t\t\t.then((snapshot) => {\n\t\t\t\tsnapshot.docs.forEach((s) => s.ref.update('isCurrent', false))\n\t\t\t})\n\t\t\t.then(() => this.list(uid).update('isCurrent', true))\n\t}\n\n\tcreateNeedsList = async ({ name }) => {\n\t\tconst snapshot = await this.myCurrentNeedsList().get()\n\t\tsnapshot.docs.forEach((s) => s.ref.update('isCurrent', false))\n\n\t\treturn this.createList({ name }, LIST_TYPE_NEED)\n\t}\n\n\tarchiveNeedsList = async (needsList) => {\n\t\tif (needsList.lifecycleStatus !== LIFECYCLE_STATUS_ARCHIVED) {\n\t\t\tthis.list(needsList.uid).update('lifecycleStatus', LIFECYCLE_STATUS_ARCHIVED)\n\t\t}\n\t}\n\n\tmyNeedsLists = (includeArchived = false) => {\n\t\tconst status = [LIFECYCLE_STATUS_OPEN, LIFECYCLE_STATUS_SHOPPING, LIFECYCLE_STATUS_FINISHED]\n\t\tif (includeArchived) status.push(LIFECYCLE_STATUS_ARCHIVED)\n\n\t\treturn this.lists()\n\t\t\t.where('userId', '==', this.auth.currentUser\n\t\t\t\t? this.auth.currentUser.uid\n\t\t\t\t: INVALID_DUMMY_UID)\n\t\t\t.where('type', '==', LIST_TYPE_NEED)\n\t\t// .where('lifecycleStatus', \"in\", status) yields an empty list, though it should work as per the spec  }\n\t}\n\n\tdependentNeedsListOfShoppingList = (shoppingListId) => this.lists()\n\t\t.where('shoppingListId', '==', shoppingListId)\n\n\tcreateNeedsListForShoppingList = (shoppingListId, name) => {\n\t\tthis.myCurrentNeedsList().get()\n\t\t\t.then((snapshot) => {\n\t\t\t\tif (snapshot.size) {\n\t\t\t\t\tsnapshot.docs.forEach((s) => {\n\t\t\t\t\t\t// we need to update all needs lists which are not referenced to the shopping list\n\t\t\t\t\t\tconst needsList = s.data()\n\t\t\t\t\t\tif (needsList.shoppingListId !== shoppingListId) {\n\t\t\t\t\t\t\ts.ref.update('isCurrent', false)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\n\t\treturn this.list(shoppingListId)\n\t\t\t.get()\n\t\t\t.then(snapshot => snapshot.data())\n\t\t\t.then((shoppingList) => {\n\t\t\t\tthis\n\t\t\t\t\t.myNeedsListsForShoppingList(shoppingListId)\n\t\t\t\t\t.then((existingNeedsList) => {\n\t\t\t\t\t\tif (existingNeedsList && existingNeedsList.id) {\n\t\t\t\t\t\t\texistingNeedsList.update('isCurrent', true)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.lists()\n\t\t\t\t\t\t\t\t.add({\n\t\t\t\t\t\t\t\t\ttype: LIST_TYPE_NEED,\n\t\t\t\t\t\t\t\t\tshoppingListId,\n\t\t\t\t\t\t\t\t\tshoppingListOwnerId: shoppingList.userId,\n\t\t\t\t\t\t\t\t\tisCurrent: true,\n\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\torder: -1,\n\t\t\t\t\t\t\t\t\tuserId: this.auth.currentUser.uid,\n\t\t\t\t\t\t\t\t\tlifecycleStatus: shoppingList.lifecycleStatus,\n\t\t\t\t\t\t\t\t\tcreatedAt: this.fieldValue.serverTimestamp()\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t})\n\t}\n\n\tmyNeedsListsForShoppingList = async shoppingListId => {\n\t\tlet needsListsRef = null\n\t\tconst q = this.myNeedsLists()\n\t\t\t.where('shoppingListId', '==', shoppingListId)\n\t\t\t.limit(1)\n\n\t\tconst needsListsSnapshots = await q.get()\n\t\tneedsListsSnapshots.docs.forEach(sl => { needsListsRef = sl.ref; return false })\n\n\t\treturn needsListsRef\n\t}\n\n\taddNeededItemFromShoppingListItem = (needsListId, shoppingListItem, { name, quantity = '', unit = '' }) => {\n\t\tconst neededItem = shoppingListItem\n\n\t\tif (shoppingListItem.uid) {\n\t\t\tneededItem.originShoppingItemUid = shoppingListItem.uid\n\t\t}\n\t\tif (name) {\n\t\t\tneededItem.name = name\n\t\t}\n\t\tneededItem.quantity = quantity\n\t\tneededItem.unit = unit || ''\n\t\tdelete neededItem.createdAt\n\t\tdelete neededItem.editedAt\n\t\tdelete neededItem.uid\n\t\tdelete neededItem.parentId\n\t\tdelete neededItem.shopped\n\t\tdelete neededItem.shoppedAt\n\t\tdelete neededItem.shoppedBy\n\t\t//TODO: prevent creation of duplicate needs\n\t\treturn this.createItem(needsListId, neededItem)\n\t}\n}\n\nexport default Firebase\n","export const LANDING = '/'\nexport const SIGN_UP = '/signup'\nexport const SIGN_IN = '/signin'\nexport const ACCOUNT = '/account'\nexport const PASSWORD_FORGET = '/pw-forget'\nexport const PASSWORD_CHANGE = '/pw-change'\nexport const ADMIN = '/admin'\nexport const ADMIN_DETAILS = '/admin/:id'\nexport const SHOPPING = '/shopping'\nexport const GO_SHOPPING = '/go-shopping'\nexport const FINISH_SHOPPING = '/finish-shopping'\nexport const SHOPPING_LISTS = '/shopping-lists'\nexport const NEEDS = '/needs'\nexport const NEEDS_LISTS = '/needs-lists'\nexport const SHARED_SHOPPING_LIST = '/share/:id'\n","import React from 'react'\nimport { IonImg, IonGrid, IonRow, IonCol, IonLabel } from '@ionic/react'\n\nconst SplashLogo = (props) => (\n\t<>\n\t\t<IonImg className=\"image-login\" src=\"logo-cart_1000.png\" style={{ maxWidth: props.maxWidth }} />\n\t\t<IonGrid>\n\t\t\t<IonRow className=\"logo-text\">\n\t\t\t\t<IonCol className=\"ion-align-self-center\">\n\t\t\t\t\t<IonLabel style={{ color: '#707070' }}>{props.textStart || 'Share'}</IonLabel>\n\t\t\t\t\t<IonLabel style={{ color: '#FA3D04' }}>{props.textEnd || 'MyCart!'}</IonLabel>\n\t\t\t\t</IonCol>\n\t\t\t</IonRow>\n\t\t</IonGrid>\n\t</>\n)\n\nexport default SplashLogo","import React, { Component } from 'react'\nimport { Link, withRouter } from 'react-router-dom'\n\nimport { withFirebase } from '../../Firebase'\nimport * as ROUTES from '../../../constants/routes'\nimport { IonPage, IonHeader, IonToolbar, IonButtons, IonButton, IonContent, IonRow, IonCol, IonInput } from '@ionic/react'\n\nimport { withTranslation, Trans } from 'react-i18next'\nimport { compose } from 'recompose'\n\nimport '../../Reusables/sign-in-up-page.scss'\nimport SplashLogo from '../../Reusables/ionic/SplashLogo'\n\nconst SignUpPage = () => (\n\t<IonPage>\n\t\t<IonHeader>\n\t\t\t<IonToolbar>\n\t\t\t\t<IonButtons slot=\"secondary\">\n\t\t\t\t\t<IonButton fill=\"clear\">\n\t\t\t\t\t\t<Trans>Help</Trans>\n\t\t\t\t\t</IonButton>\n\t\t\t\t</IonButtons>\n\t\t\t</IonToolbar>\n\t\t</IonHeader>\n\t\t<IonContent className=\"login-page\">\n\t\t\t<SplashLogo maxWidth=\"150px\" />\n\n\t\t\t<SignUpForm />\n\n\t\t</IonContent>\n\t</IonPage>\n)\n\nconst INITIAL_STATE = {\n\tusername: '',\n\temail: '',\n\tpasswordOne: '',\n\tisAdmin: false,\n\terror: null,\n}\n\nconst ERROR_CODE_ACCOUNT_EXISTS = 'auth/email-already-in-use'\n\nclass SignUpFormBase extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = { ...INITIAL_STATE }\n\t}\n\n\tonSubmit = event => {\n\t\tconst { username, email, passwordOne } = this.state\n\t\tconst roles = {}\n\n\t\tconst { t } = this.props\n\n\t\tconst ERROR_MSG_ACCOUNT_EXISTS = t('Account_already_exists')\n\n\t\tthis.props.firebase\n\t\t\t.doCreateUserWithEmailAndPassword(email, passwordOne)\n\t\t\t.then(authUser => {\n\t\t\t\t// Create a user in your Firebase realtime database\n\t\t\t\treturn this.props.firebase.user(authUser.user.uid).set(\n\t\t\t\t\t{\n\t\t\t\t\t\tusername,\n\t\t\t\t\t\temail,\n\t\t\t\t\t\troles,\n\t\t\t\t\t},\n\t\t\t\t\t{ merge: true },\n\t\t\t\t)\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\treturn this.props.firebase.doSendEmailVerification()\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tthis.setState({ ...INITIAL_STATE })\n\t\t\t\tconst { location } = this.props\n\t\t\t\tconst isShareRedirect = !!(location.state && location.state.from && location.state.from.pathname.match('^/share/'))\n\t\t\t\tif (isShareRedirect) {\n\t\t\t\t\tthis.props.history.push(location.state.from.pathname)\n\t\t\t\t} else {\n\t\t\t\t\tthis.props.history.push(ROUTES.SHOPPING)\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (error.code === ERROR_CODE_ACCOUNT_EXISTS) {\n\t\t\t\t\terror.message = ERROR_MSG_ACCOUNT_EXISTS\n\t\t\t\t}\n\n\t\t\t\tthis.setState({ error })\n\t\t\t})\n\n\t\tevent.preventDefault()\n\t};\n\n\tonChange = event => {\n\t\tthis.setState({ [event.target.name]: event.target.value })\n\t};\n\n\tonChangeCheckbox = event => {\n\t\tthis.setState({ [event.target.name]: event.target.checked })\n\t};\n\n\trender() {\n\n\t\tconst { t } = this.props\n\n\t\tconst {\n\t\t\tusername,\n\t\t\temail,\n\t\t\tpasswordOne,\n\t\t\terror,\n\t\t} = this.state\n\n\t\tconst isInvalid =\n\t\t\tpasswordOne === '' ||\n\t\t\temail === '' ||\n\t\t\tusername === ''\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<form onSubmit={this.onSubmit}>\n\t\t\t\t\t<IonRow>\n\t\t\t\t\t\t<IonCol>\n\t\t\t\t\t\t\t<IonInput\n\t\t\t\t\t\t\t\tname=\"username\"\n\t\t\t\t\t\t\t\tvalue={username}\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tplaceholder={t('Full Name')}\n\t\t\t\t\t\t\t\tonIonChange={this.onChange}\n\t\t\t\t\t\t\t\tclearInput\n\t\t\t\t\t\t\t\tclassName=\"input\"\n\t\t\t\t\t\t\t\tpadding-horizontal\n\t\t\t\t\t\t\t\tclear-input=\"true\"\n\t\t\t\t\t\t\t\tautocomplete=\"name\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</IonCol>\n\t\t\t\t\t</IonRow>\n\t\t\t\t\t<IonRow>\n\t\t\t\t\t\t<IonCol>\n\t\t\t\t\t\t\t<IonInput\n\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\t\t\tonIonChange={this.onChange}\n\t\t\t\t\t\t\t\tclearInput\n\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\tplaceholder={t('Email')}\n\t\t\t\t\t\t\t\tclassName=\"input\"\n\t\t\t\t\t\t\t\tpadding-horizontal\n\t\t\t\t\t\t\t\tclear-input=\"true\"\n\t\t\t\t\t\t\t\tautocomplete=\"username email\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</IonCol>\n\t\t\t\t\t</IonRow>\n\t\t\t\t\t<IonRow>\n\t\t\t\t\t\t<IonCol>\n\t\t\t\t\t\t\t<IonInput\n\t\t\t\t\t\t\t\tclearInput\n\t\t\t\t\t\t\t\tname=\"passwordOne\"\n\t\t\t\t\t\t\t\tvalue={passwordOne}\n\t\t\t\t\t\t\t\tonIonChange={this.onChange}\n\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\tplaceholder={t('Password')}\n\t\t\t\t\t\t\t\tclassName=\"input\"\n\t\t\t\t\t\t\t\tpadding-horizontal\n\t\t\t\t\t\t\t\tautocomplete=\"new-password\">\n\t\t\t\t\t\t\t</IonInput>\n\t\t\t\t\t\t</IonCol>\n\t\t\t\t\t</IonRow>\n\t\t\t\t\t<IonButton disabled={isInvalid} type=\"submit\" expand=\"block\">\n\t\t\t\t\t\t<Trans>Sign Up</Trans>\n\t\t\t\t\t</IonButton>\n\t\t\t\t\t{error && <p>{error.message}</p>}\n\t\t\t\t</form>\n\t\t\t</>\n\t\t)\n\t}\n}\n\nconst SignUpLink = ({ state }) => (\n\t<span>\n\t\t<Trans>No account yet?</Trans>\n    &nbsp;\n\t\t<Link to={{ pathname: ROUTES.SIGN_UP, state }} >\n\t\t\t<Trans>Sign Up</Trans>\n\t\t</Link></span>\n)\n\nconst SignUpForm = compose(\n\twithRouter,\n\twithFirebase,\n\twithTranslation()\n)(SignUpFormBase)\n\nexport default SignUpPage\n\nexport { SignUpForm, SignUpLink }","import React from 'react'\nimport { useTranslation } from 'react-i18next'\nimport { IonBackButton } from '@ionic/react'\n\n\nconst LabelledBackButton = ({ defaultHref }) => {\n\tconst { t } = useTranslation()\n\treturn (\n\t\t<IonBackButton\n\t\t\tdefaultHref={defaultHref}\n\t\t\ttext={t('Back')}\n\t\t\tdata-test='back'>\n\t\t</IonBackButton>\n\t)\n}\n\nexport default LabelledBackButton","import React, { Component } from 'react'\nimport { Link } from 'react-router-dom'\n\nimport { withFirebase } from '../../Firebase'\nimport * as ROUTES from '../../../constants/routes'\nimport { IonContent, IonGrid, IonButton, IonRow, IonCol, IonInput, IonHeader, IonToolbar, IonButtons } from '@ionic/react'\nimport SplashLogo from '../../Reusables/ionic/SplashLogo'\n\nimport { Trans } from 'react-i18next'\nimport LabelledBackButton from '../../Reusables/ionic/LabelledBackButton'\n\nconst PasswordForgetPage = () => (\n\t<>\n\t\t<IonHeader>\n\t\t\t<IonToolbar>\n\t\t\t\t<IonButtons slot=\"start\">\n\t\t\t\t\t<LabelledBackButton defaultHref={ROUTES.SIGN_IN} />\n\t\t\t\t</IonButtons>\n\t\t\t</IonToolbar>\n\t\t</IonHeader>\n\t\t<IonContent className=\"login-page\">\n\t\t\t<SplashLogo\n\t\t\t\tmaxWidth=\"100px\"\n\t\t\t\ttextStart=\"Forgot\"\n\t\t\t\ttextEnd=\"MyPassword!\"\n\t\t\t/>\n\t\t\t<IonGrid>\n\t\t\t\t<PasswordForgetForm />\n\t\t\t</IonGrid>\n\t\t</IonContent>\n\t</>\n)\n\nconst INITIAL_STATE = {\n\temail: '',\n\terror: null,\n}\n\nclass PasswordForgetFormBase extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = { ...INITIAL_STATE }\n\t}\n\n\tonSubmit = event => {\n\t\tconst { email } = this.state\n\n\t\tthis.props.firebase\n\t\t\t.doPasswordReset(email)\n\t\t\t.then(() => {\n\t\t\t\tthis.setState({ ...INITIAL_STATE })\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tthis.setState({ error })\n\t\t\t})\n\n\t\tevent.preventDefault()\n\t};\n\n\tonChange = event => {\n\t\tthis.setState({ [event.target.name]: event.target.value })\n\t};\n\n\trender() {\n\t\tconst { email, error } = this.state\n\n\t\tconst isInvalid = email === ''\n\n\t\treturn (\n\t\t\t<form onSubmit={this.onSubmit}>\n\t\t\t\t<IonRow>\n\t\t\t\t\t<IonCol>\n\t\t\t\t\t\t<IonInput\n\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\t\tonIonChange={this.onChange}\n\t\t\t\t\t\t\tclearInput\n\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\tplaceholder=\"Email\"\n\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\tpadding-horizontal\n\t\t\t\t\t\t\tclear-input=\"true\"></IonInput>\n\t\t\t\t\t</IonCol>\n\t\t\t\t</IonRow>\n\t\t\t\t<IonButton disabled={isInvalid} type=\"submit\" expand=\"block\">\n\t\t\t\t\t<Trans>Reset My Password</Trans>\n\t\t\t\t</IonButton>\n\t\t\t\t{error && <p>{error.message}</p>}\n\t\t\t</form>\n\t\t)\n\t}\n}\n\nconst PasswordForgetLink = () => (\n\t<span><Link to={ROUTES.PASSWORD_FORGET}><Trans>Forgot Password</Trans></Link></span>\n)\n\nexport default PasswordForgetPage\n\nconst PasswordForgetForm = withFirebase(PasswordForgetFormBase)\n\nexport { PasswordForgetForm, PasswordForgetLink }","import React from 'react'\nimport { inject } from 'mobx-react'\nimport { compose } from 'recompose'\n\nimport { withFirebase } from '../Firebase'\n\nconst withAuthentication = Component => {\n\tclass WithAuthentication extends React.Component {\n\t\tconstructor(props) {\n\t\t\tsuper(props)\n\n\t\t\tthis.props.sessionStore.setAuthUser(\n\t\t\t\tJSON.parse(localStorage.getItem('authUser')),\n\t\t\t)\n\n\t\t\tthis.listener = null\n\n\t\t\t// Decorate the wrapped components so that it can react on authentication happening\n\t\t\tthis.registerAuthListener = (handler) => {\n\t\t\t\tthis.listener = handler\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\n\t\tcomponentDidMount() {\n\t\t\tthis.unregisterHandler = this.props.firebase.onAuthUserListener(\n\t\t\t\tauthUser => {\n\t\t\t\t\tlocalStorage.setItem('authUser', JSON.stringify(authUser))\n\t\t\t\t\tthis.props.sessionStore.setAuthUser(authUser)\n\t\t\t\t\tif (this.listener) this.listener(authUser)\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tlocalStorage.removeItem('authUser')\n\t\t\t\t\tthis.props.sessionStore.setAuthUser(null)\n\t\t\t\t\tif (this.listener) this.listener(null)\n\t\t\t\t},\n\t\t\t)\n\t\t}\n\n\t\tcomponentWillUnmount() {\n\t\t\tthis.unregisterHandler()\n\t\t}\n\n\t\trender() {\n\t\t\treturn <Component\n\t\t\t\t{...this.props}\n\t\t\t\tregisterAuthListener={this.registerAuthListener}\n\t\t\t/>\n\t\t}\n\t}\n\n\treturn compose(\n\t\twithFirebase,\n\t\tinject('sessionStore'),\n\t)(WithAuthentication)\n}\n\nexport default withAuthentication\n","import React from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { inject, observer } from 'mobx-react'\nimport { compose } from 'recompose'\n\nimport { withFirebase } from '../Firebase'\nimport * as ROUTES from '../../constants/routes'\n\nconst withAuthorization = condition => Component => {\n\tclass WithAuthorization extends React.Component {\n\t\tcomponentDidMount() {\n\t\t\tthis.listener = this.props.firebase.onAuthUserListener(\n\t\t\t\tauthUser => {\n\t\t\t\t\tif (!condition(authUser)) {\n\t\t\t\t\t\tthis.props.history.push(ROUTES.SIGN_IN)\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() => this.props.history.push(ROUTES.SIGN_IN),\n\t\t\t)\n\t\t}\n\n\t\tcomponentWillUnmount() {\n\t\t\tthis.listener()\n\t\t}\n\n\t\trender() {\n\t\t\treturn condition(this.props.sessionStore.authUser) ? (\n\t\t\t\t<Component {...this.props} />\n\t\t\t) : null\n\t\t}\n\t}\n\n\treturn compose(\n\t\twithRouter,\n\t\twithFirebase,\n\t\tinject('sessionStore'),\n\t\tobserver,\n\t)(WithAuthorization)\n}\n\nexport default withAuthorization\n","import React from 'react'\nimport { inject, observer } from 'mobx-react'\nimport { compose } from 'recompose'\n\nimport { withFirebase } from '../Firebase'\n\nimport { Trans } from 'react-i18next'\nimport { IonContent, IonGrid, IonRow, IonCol, IonButton } from '@ionic/react'\nimport SplashLogo from '../Reusables/ionic/SplashLogo'\n\nimport '../Reusables/sign-in-up-page.scss'\n\nconst needsEmailVerification = authUser =>\n\tauthUser &&\n\t!authUser.emailVerified &&\n\tauthUser.providerData\n\t\t.map(provider => provider.providerId)\n\t\t.includes('password')\n\nconst withEmailVerification = Component => {\n\tclass WithEmailVerification extends React.Component {\n\t\tconstructor(props) {\n\t\t\tsuper(props)\n\n\t\t\tthis.state = { isSent: false }\n\t\t}\n\n\t\tonSendEmailVerification = () => {\n\t\t\tthis.props.firebase\n\t\t\t\t.doSendEmailVerification()\n\t\t\t\t.then(() => this.setState({ isSent: true }))\n\t\t};\n\n\t\trender() {\n\n\t\t\treturn needsEmailVerification(\n\t\t\t\tthis.props.sessionStore.authUser,\n\t\t\t) ? (\n\t\t\t\t\t<IonContent className=\"login-page\">\n\t\t\t\t\t\t<SplashLogo\n\t\t\t\t\t\t\tmaxWidth=\"150px\"\n\t\t\t\t\t\t\ttextStart='Check'\n\t\t\t\t\t\t\ttextEnd='YourEmail'\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<IonGrid>\n\t\t\t\t\t\t\t<IonRow>\n\t\t\t\t\t\t\t\t<IonCol>\n\t\t\t\t\t\t\t\t\t{this.state.isSent ? (\n\t\t\t\t\t\t\t\t\t\t<Trans>Email_confirmation_sent</Trans>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<Trans>Email_verification_needed</Trans>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</IonCol>\n\t\t\t\t\t\t\t</IonRow>\n\t\t\t\t\t\t\t<IonRow>\n\t\t\t\t\t\t\t\t<IonCol>\n\t\t\t\t\t\t\t\t\t<IonButton\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tonClick={this.onSendEmailVerification}\n\t\t\t\t\t\t\t\t\t\tdisabled={this.state.isSent}\n\t\t\t\t\t\t\t\t\t\texpand=\"block\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Trans>Send confirmation E-Mail</Trans>\n\t\t\t\t\t\t\t\t\t</IonButton>\n\t\t\t\t\t\t\t\t\t<IonButton\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => location.reload()} //eslint-disable-line\n\t\t\t\t\t\t\t\t\t\texpand=\"block\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Trans>Is confirmed. Reload</Trans>\n\t\t\t\t\t\t\t\t\t</IonButton>\n\t\t\t\t\t\t\t\t</IonCol>\n\t\t\t\t\t\t\t</IonRow>\n\t\t\t\t\t\t</IonGrid>\n\t\t\t\t\t</IonContent>\n\t\t\t\t) : (\n\t\t\t\t\t<Component {...this.props} />\n\t\t\t\t)\n\t\t}\n\t}\n\n\treturn compose(\n\t\twithFirebase,\n\t\tinject('sessionStore'),\n\t\tobserver,\n\t)(WithEmailVerification)\n}\n\nexport default withEmailVerification\n","import React, { Component } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { compose } from 'recompose'\n\nimport { withFirebase } from '../../Firebase'\nimport { SHOPPING, SIGN_IN } from '../../../constants/routes'\nimport { IonGrid, IonRow, IonCol, IonContent, IonInput, IonIcon, IonButton, IonItem, IonText } from '@ionic/react'\n\nimport { logoGoogle, logoFacebook, logoTwitter } from 'ionicons/icons'\nimport SplashLogo from '../../Reusables/ionic/SplashLogo'\nimport { PasswordForgetLink } from '../../PasswordForget/ionic'\nimport { SignUpLink } from '../../SignUp/ionic'\n\nimport { withTranslation, Trans } from 'react-i18next'\n\nimport '../../Reusables/sign-in-up-page.scss'\nimport '../../Reusables/components.scss'\nimport { withEmailVerification } from '../../Session'\n\nconst SignInPage = (props) => {\n\tconst isShareRedirect = !!(props.location.state && props.location.state.from && props.location.state.from.pathname.match('^/share/'))\n\treturn (\n\t\t<>\n\t\t\t<IonContent className=\"login-page\">\n\t\t\t\t<SplashLogo maxWidth={isShareRedirect ? '100px' : '150px'} />\n\t\t\t\t{isShareRedirect && <IonItem color=\"success\" className=\"permanent-message\">\n\t\t\t\t\t<IonText><h5><Trans>Sharing_link_received</Trans></h5></IonText>\n\t\t\t\t</IonItem>}\n\t\t\t\t<IonGrid>\n\t\t\t\t\t<SignInForm />\n\t\t\t\t\t<IonRow>\n\t\t\t\t\t\t<IonCol>\n\t\t\t\t\t\t\t<PasswordForgetLink />\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<SignUpLink state={props.location.state} />\n\t\t\t\t\t\t</IonCol>\n\t\t\t\t\t</IonRow>\n\t\t\t\t\t<div className=\"separator\">\n\t\t\t\t\t\t<Trans>or with</Trans>\n\t\t\t\t\t</div>\n\t\t\t\t\t<SignInGoogle />\n\t\t\t\t\t{/* <SignInFacebook /> */}\n\t\t\t\t\t{/* <SignInTwitter /> */}\n\t\t\t\t</IonGrid>\n\t\t\t</IonContent>\n\t\t</>\n\t)\n}\n\nconst INITIAL_STATE = {\n\temail: '',\n\tpassword: '',\n\terror: null,\n}\n\nconst ERROR_CODE_ACCOUNT_EXISTS =\n\t'auth/account-exists-with-different-credential'\n\nconst ERROR_MSG_ACCOUNT_EXISTS = `\n  An account with an E-Mail address to\n  this social account already exists. Try to login from\n  this account instead and associate your social accounts on\n  your personal account page.\n`\n\n// this function defers the navigation to the referrer or to another site\n// after signing in.\n// this is necessary since if not deferred, the session's authUser may not be \n// available in the cache.\n// It's a hack since there's no option / hook into the event which it can be hooked into\n// probably, a MobX reaction in the session store could provide a hook.\nconst navigateIfRequested = function () {\n\tconst { from } = this.props.location.state || { from: { pathname: '/' } }\n\tconst { redirectToReferrer } = this.state\n\tconst { history } = this.props\n\tif (redirectToReferrer === true) {\n\t\tsetTimeout(() => history.push((from && from.pathname) || SHOPPING), 500)\n\t}\n}\n\nclass SignInFormBase extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = { ...INITIAL_STATE }\n\t}\n\n\tonSubmit = event => {\n\t\tconst { email, password } = this.state\n\n\t\tevent.preventDefault()\n\n\t\tthis.props.firebase\n\t\t\t.doSignInWithEmailAndPassword(email, password)\n\t\t\t// .then(authUser => {\n\n\t\t\t//   // Instantiate PasswordCredential with the form\n\t\t\t//   if (window.PasswordCredential) {\n\t\t\t//     // eslint-disable-next-line no-undef\n\t\t\t//     var c = new PasswordCredential(event.target);\n\t\t\t//     return navigator.credentials.store(c);\n\t\t\t//   } else {\n\t\t\t//     return Promise.resolve(authUser);\n\t\t\t//   }\n\t\t\t// })\n\t\t\t.then(() => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tredirectToReferrer: true\n\t\t\t\t\t, ...INITIAL_STATE\n\t\t\t\t})\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tthis.setState({ error })\n\t\t\t})\n\n\t};\n\n\tonChange = event => {\n\t\tthis.setState({ [event.target.name]: event.target.value })\n\t};\n\n\trender() {\n\t\tconst { email, password, error } = this.state\n\n\t\tconst isInvalid = password === '' || email === ''\n\n\t\tconst { t } = this.props\n\n\t\t// trigger a navigation instead of rendering if necessary (after successful log-in)\n\t\tnavigateIfRequested.call(this)\n\n\t\treturn (\n\t\t\t<form onSubmit={this.onSubmit}>\n\t\t\t\t<IonRow>\n\t\t\t\t\t<IonCol>\n\t\t\t\t\t\t<IonInput\n\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\t\tonIonChange={this.onChange}\n\t\t\t\t\t\t\tclearInput\n\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\tplaceholder={t('Email')}\n\t\t\t\t\t\t\tclassName=\"input\"\n\t\t\t\t\t\t\tpadding-horizontal\n\t\t\t\t\t\t\tclear-input=\"true\"\n\t\t\t\t\t\t\tautocomplete=\"username email\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t</IonInput>\n\t\t\t\t\t</IonCol>\n\t\t\t\t</IonRow>\n\t\t\t\t<IonRow>\n\t\t\t\t\t<IonCol>\n\t\t\t\t\t\t<IonInput\n\t\t\t\t\t\t\tclearInput\n\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t\t\tonIonChange={this.onChange}\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tplaceholder={t('Password')}\n\t\t\t\t\t\t\tclassName=\"input\"\n\t\t\t\t\t\t\tautocomplete=\"current-password\"\n\t\t\t\t\t\t\tpadding-horizontal>\n\t\t\t\t\t\t</IonInput>\n\t\t\t\t\t</IonCol>\n\t\t\t\t</IonRow>\n\t\t\t\t<IonButton disabled={isInvalid} type=\"submit\" expand=\"block\">\n\t\t\t\t\t<Trans>Sign In</Trans>\n\t\t\t\t</IonButton>\n\n\t\t\t\t{error && <p>{error.message}</p>}\n\t\t\t</form>\n\t\t)\n\t}\n}\n\nclass SignInGoogleBase extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = { error: null }\n\t}\n\n\tonSubmit = event => {\n\t\tthis.props.firebase\n\t\t\t.doSignInWithGoogle({redirectUri: SIGN_IN ,state: this.props.location.state})\n\t\t\t.then(socialAuthUser => {\n\t\t\t\t//this will be passed only in case of signInWithPopup\n\t\t\t\t// Create a user in your Firebase Realtime Database too\n\t\t\t\treturn this.props.firebase.user(socialAuthUser.user.uid).set({\n\t\t\t\t\tusername: socialAuthUser.user.displayName,\n\t\t\t\t\temail: socialAuthUser.user.email,\n\t\t\t\t\troles: {},\n\t\t\t\t},\n\t\t\t\t{ merge: true },\n\t\t\t\t)\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tredirectToReferrer: true\n\t\t\t\t\t, error: null\n\t\t\t\t})\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (error.code === ERROR_CODE_ACCOUNT_EXISTS) {\n\t\t\t\t\terror.message = ERROR_MSG_ACCOUNT_EXISTS\n\t\t\t\t}\n\n\t\t\t\tthis.setState({ error })\n\t\t\t})\n\n\t\tevent.preventDefault()\n\t};\n\n\trender() {\n\t\tconst { error } = this.state\n\n\t\tnavigateIfRequested.call(this)\n\n\t\treturn (\n\t\t\t<form onSubmit={this.onSubmit}>\n\t\t\t\t<IonRow>\n\t\t\t\t\t<IonCol>\n\t\t\t\t\t\t<IonButton onClick={this.onSubmit} type=\"submit\" expand=\"block\" color=\"secondary\"><IonIcon\n\t\t\t\t\t\t\ticon={logoGoogle} /><span className=\"social-button-text\">Google</span></IonButton>\n\t\t\t\t\t</IonCol>\n\t\t\t\t</IonRow>\n\t\t\t\t{error && <p>{error.message}</p>}\n\t\t\t</form>\n\t\t)\n\t}\n}\n\nclass SignInFacebookBase extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = { error: null }\n\t}\n\n\tonSubmit = event => {\n\t\tthis.props.firebase\n\t\t\t.doSignInWithFacebook()\n\t\t\t.then(socialAuthUser => {\n\t\t\t\t// Create a user in your Firebase Realtime Database too\n\t\t\t\treturn this.props.firebase.user(socialAuthUser.user.uid).set({\n\t\t\t\t\tusername: socialAuthUser.additionalUserInfo.profile.name,\n\t\t\t\t\temail: socialAuthUser.additionalUserInfo.profile.email,\n\t\t\t\t\troles: {},\n\t\t\t\t},\n\t\t\t\t{ merge: true },\n\t\t\t\t)\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tredirectToReferrer: true,\n\t\t\t\t\terror: null\n\t\t\t\t})\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (error.code === ERROR_CODE_ACCOUNT_EXISTS) {\n\t\t\t\t\terror.message = ERROR_MSG_ACCOUNT_EXISTS\n\t\t\t\t}\n\n\t\t\t\tthis.setState({ error })\n\t\t\t})\n\n\t\tevent.preventDefault()\n\t};\n\n\trender() {\n\t\tconst { error } = this.state\n\n\t\tnavigateIfRequested.call(this)\n\n\t\treturn (\n\t\t\t<form onSubmit={this.onSubmit}>\n\t\t\t\t<IonRow>\n\n\t\t\t\t\t<IonCol>\n\t\t\t\t\t\t<IonButton onClick={this.onSubmit} type=\"submit\" expand=\"block\" color=\"secondary\"><IonIcon\n\t\t\t\t\t\t\ticon={logoFacebook} /><span\n\t\t\t\t\t\t\tclassName=\"social-button-text\">Facebook</span></IonButton>\n\t\t\t\t\t</IonCol>\n\t\t\t\t</IonRow>\n\n\t\t\t\t{error && <p>{error.message}</p>}\n\t\t\t</form>\n\t\t)\n\t}\n}\n\nclass SignInTwitterBase extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = { error: null }\n\t}\n\n\tonSubmit = event => {\n\t\tthis.props.firebase\n\t\t\t.doSignInWithTwitter()\n\t\t\t.then(socialAuthUser => {\n\t\t\t\t// Create a user in your Firebase Realtime Database too\n\t\t\t\treturn this.props.firebase.user(socialAuthUser.user.uid).set({\n\t\t\t\t\tusername: socialAuthUser.additionalUserInfo.profile.name,\n\t\t\t\t\temail: socialAuthUser.additionalUserInfo.profile.email,\n\t\t\t\t\troles: {},\n\t\t\t\t},\n\t\t\t\t{ merge: true },\n\t\t\t\t)\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tredirectToReferrer: true,\n\t\t\t\t\terror: null\n\t\t\t\t})\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (error.code === ERROR_CODE_ACCOUNT_EXISTS) {\n\t\t\t\t\terror.message = ERROR_MSG_ACCOUNT_EXISTS\n\t\t\t\t}\n\n\t\t\t\tthis.setState({ error })\n\t\t\t})\n\n\t\tevent.preventDefault()\n\t};\n\n\trender() {\n\t\tconst { error } = this.state\n\n\t\tnavigateIfRequested.call(this)\n\n\t\treturn (\n\t\t\t<form onSubmit={this.onSubmit}>\n\t\t\t\t<IonRow>\n\n\t\t\t\t\t<IonCol>\n\t\t\t\t\t\t<IonButton onClick={this.onSubmit} type=\"submit\" expand=\"block\" color=\"secondary\"><IonIcon\n\t\t\t\t\t\t\ticon={logoTwitter} /><span\n\t\t\t\t\t\t\tclassName=\"social-button-text\">Twitter</span></IonButton>\n\t\t\t\t\t</IonCol>\n\t\t\t\t</IonRow>\n\n\t\t\t\t{error && <p>{error.message}</p>}\n\t\t\t</form>\n\t\t)\n\t}\n}\n\nconst SignInForm = compose(\n\twithRouter,\n\twithFirebase,\n\twithTranslation(),\n)(SignInFormBase)\n\nconst SignInGoogle = compose(\n\twithRouter,\n\twithFirebase,\n)(SignInGoogleBase)\n\nconst SignInFacebook = compose(\n\twithRouter,\n\twithFirebase,\n)(SignInFacebookBase)\n\nconst SignInTwitter = compose(\n\twithRouter,\n\twithFirebase,\n)(SignInTwitterBase)\n\nexport default withEmailVerification(SignInPage)\n\nexport { SignInForm, SignInGoogle, SignInFacebook, SignInTwitter }\n","import React, { Component } from 'react'\n\nimport { withFirebase } from '../../Firebase'\nimport { IonHeader, IonButtons, IonToolbar, IonContent, IonGrid, IonRow, IonCol, IonInput, IonButton, IonIcon } from '@ionic/react'\nimport { ACCOUNT, PASSWORD_CHANGE } from '../../../constants/routes'\nimport SplashLogo from '../../Reusables/ionic/SplashLogo'\nimport { pencilOutline } from 'ionicons/icons'\n\nimport { Trans } from 'react-i18next'\nimport LabelledBackButton from '../../Reusables/ionic/LabelledBackButton'\n\nconst INITIAL_STATE = {\n\tpasswordOne: '',\n\tpasswordTwo: '',\n\terror: null,\n}\n\nconst PasswordChangePage = () => (\n\t<>\n\t\t<IonHeader>\n\t\t\t<IonToolbar>\n\t\t\t\t<IonButtons slot=\"start\">\n\t\t\t\t\t<LabelledBackButton defaultHref={ACCOUNT} />\n\t\t\t\t</IonButtons>\n\t\t\t</IonToolbar>\n\t\t</IonHeader>\n\t\t<IonContent className=\"login-page\">\n\t\t\t<SplashLogo\n\t\t\t\tmaxWidth=\"100px\"\n\t\t\t\ttextStart=\"Change\"\n\t\t\t\ttextEnd=\"MyPassword!\"\n\t\t\t/>\n\t\t\t<IonGrid>\n\t\t\t\t<PasswordChangeForm />\n\t\t\t</IonGrid>\n\t\t</IonContent>\n\t</>\n)\n\nclass PasswordChangeFormBase extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = { ...INITIAL_STATE }\n\t}\n\n\tonSubmit = event => {\n\t\tconst { passwordOne } = this.state\n\n\t\tthis.props.firebase\n\t\t\t.doPasswordUpdate(passwordOne)\n\t\t\t.then(() => {\n\t\t\t\tthis.setState({ ...INITIAL_STATE })\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tthis.setState({ error })\n\t\t\t})\n\n\t\tevent.preventDefault()\n\t};\n\n\tonChange = event => {\n\t\tthis.setState({ [event.target.name]: event.target.value })\n\t};\n\n\trender() {\n\t\tconst { passwordOne, passwordTwo, error } = this.state\n\n\t\tconst isInvalid =\n\t\t\tpasswordOne !== passwordTwo || passwordOne === ''\n\n\t\treturn (\n\t\t\t<form onSubmit={this.onSubmit}>\n\t\t\t\t<IonRow>\n\t\t\t\t\t<IonCol>\n\t\t\t\t\t\t<IonInput\n\t\t\t\t\t\t\tname=\"passwordOne\"\n\t\t\t\t\t\t\tvalue={passwordOne}\n\t\t\t\t\t\t\tonIonChange={this.onChange}\n\t\t\t\t\t\t\tclearInput\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tplaceholder=\"Type your password\"\n\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\tpadding-horizontal\n\t\t\t\t\t\t\tclear-input=\"true\">\n\t\t\t\t\t\t</IonInput>\n\t\t\t\t\t\t<IonInput\n\t\t\t\t\t\t\tname=\"passwordTwo\"\n\t\t\t\t\t\t\tvalue={passwordTwo}\n\t\t\t\t\t\t\tonIonChange={this.onChange}\n\t\t\t\t\t\t\tclearInput\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tplaceholder=\"Confirm new password\"\n\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\tpadding-horizontal\n\t\t\t\t\t\t\tclear-input=\"true\">\n\t\t\t\t\t\t</IonInput>\n\t\t\t\t\t</IonCol>\n\t\t\t\t</IonRow>\n\t\t\t\t<IonButton type=\"submit\" disabled={isInvalid} expand=\"block\">\n\t\t\t\t\tReset My Password\n\t\t\t\t</IonButton>\n\t\t\t\t{error && <p>{error.message}</p>}\n\t\t\t</form>\n\t\t)\n\t}\n}\n\nconst PasswordChangeButton = () => (\n\t<IonButton expand=\"block\" color=\"secondary\" href={PASSWORD_CHANGE}>\n\t\t<Trans>Change Password</Trans>\n\t\t<IonIcon slot=\"end\" icon={pencilOutline} />\n\t</IonButton>\n)\n\nconst PasswordChangeForm = withFirebase(PasswordChangeFormBase)\n\nexport default PasswordChangePage\nexport { PasswordChangeButton }","import React from 'react'\nimport md5 from 'md5'\n\nconst UserProfileImg = ({\n\tuser,\n\tsize = 200\n}) => {\n\tlet userImage = user ? user.photoURL : null\n\tconst emailMd5 = md5(user.email)\n\tconst namePathComponent = encodeURIComponent(encodeURIComponent(user.username))\n\t// const colorPathComponent = encodeURIComponent(`color=${ff0000}`);\n\tlet src = userImage\n\t\t? userImage\n\t\t: (`https://www.gravatar.com/avatar/${emailMd5}?s=${size}&d=https%3A%2F%2Fui-avatars.com%2Fapi%2F/${namePathComponent}/${size}%3Frounded%3Dtrue%26bold%3Dtrue`)\n\n\treturn <img src={src} alt=\"User Profile\" style={{ borderRadius: '50%' }} />\n}\n\nexport default UserProfileImg","import React from 'react'\nimport { compose } from 'recompose'\nimport { inject, observer } from 'mobx-react'\nimport { IonCardHeader, IonCard, IonCardSubtitle, IonCardTitle } from '@ionic/react'\nimport UserProfileImg from '../../Reusables/ionic/UserProfileImg'\n\nconst Profile = (props) => {\n\tconst user = props.sessionStore.authUser\n\treturn (\n\t\t<IonCard style={{\n\t\t\tpadding: '30px',\n\t\t}}>\n\t\t\t<IonCardHeader class=\"ion-text-center\">\n\t\t\t\t<UserProfileImg user={user} size={150} />\n\t\t\t\t<IonCardSubtitle >{user.username}</IonCardSubtitle>\n\t\t\t\t<IonCardTitle>{user.email}</IonCardTitle>\n\t\t\t</IonCardHeader>\n\t\t</IonCard>\n\t)\n}\n\nexport default compose(\n\tinject('sessionStore'),\n\tobserver,\n)(Profile)","import React from 'react'\n\nimport { withFirebase } from '../../Firebase'\nimport { IonButton, IonIcon } from '@ionic/react'\nimport { logOut } from 'ionicons/icons'\n\nimport { Trans } from 'react-i18next'\n\nconst SignOutButton = ({ firebase }) => (\n\t<IonButton\n\t\texpand=\"block\"\n\t\tonClick={firebase.doSignOut}\n\t>\n\t\t<Trans>Sign Out</Trans>\n\t\t<IonIcon slot=\"end\" icon={logOut} />\n\t</IonButton>\n)\n\nexport default withFirebase(SignOutButton)\n","import React from 'react'\nimport { IonContent, IonHeader, IonPage, IonTitle, IonToolbar, IonFooter } from '@ionic/react'\nimport { inject, observer } from 'mobx-react'\nimport { withEmailVerification, withAuthorization } from '../../Session'\nimport { compose } from 'recompose'\nimport Profile from './Profile'\nimport SignOutButton from '../../SignOut/ionic'\n\nimport { PasswordChangeButton } from '../../PasswordChange/ionic'\n\nimport {Trans} from 'react-i18next'\n\nimport './page.css'\n\nconst AccountPage = () => {\n\treturn (\n\t\t<IonPage>\n\t\t\t<IonHeader>\n\t\t\t\t<IonToolbar>\n\t\t\t\t\t<IonTitle><Trans>Account</Trans></IonTitle>\n\t\t\t\t</IonToolbar>\n\t\t\t</IonHeader>\n\t\t\t<IonContent>\n\t\t\t\t<IonHeader collapse=\"condense\">\n\t\t\t\t\t<IonToolbar>\n\t\t\t\t\t\t<IonTitle size=\"large\"><Trans>Account</Trans></IonTitle>\n\t\t\t\t\t</IonToolbar>\n\t\t\t\t</IonHeader>\n\t\t\t\t<Profile />\n\t\t\t\t<IonFooter>\n\t\t\t\t\t<IonToolbar>\n\t\t\t\t\t\t<PasswordChangeButton />\n\t\t\t\t\t\t<SignOutButton />\n\t\t\t\t\t</IonToolbar>\n\t\t\t\t</IonFooter>\n\t\t\t</IonContent>\n\t\t</IonPage>\n\t)\n}\n\nconst condition = authUser => !!authUser\n\nexport default compose(\n\tinject('sessionStore'),\n\tobserver,\n\twithEmailVerification,\n\twithAuthorization(condition),\n)(AccountPage)","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { inject, observer } from 'mobx-react';\nimport { compose } from 'recompose';\n\nimport { withFirebase } from '../../Firebase';\nimport * as ROUTES from '../../../constants/routes';\n\nclass UserList extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      loading: false,\n    };\n  }\n\n  componentDidMount() {\n    this.setState({ loading: true });\n    this.unsubscribe = this.props.firebase\n      .users()\n      .onSnapshot(snapshot => {\n        let users = [];\n        snapshot.forEach(doc =>\n          users.push({ ...doc.data(), uid: doc.id }),\n        );\n\n        this.props.userStore.setUsers(users);\n\n        this.setState({\n          loading: false,\n        });\n      });\n  }\n  componentWillUnmount() {\n    this.unsubscribe();\n  }\n\n\n  render() {\n    const users = this.props.userStore.userList;\n    const { loading } = this.state;\n\n    return (\n      <div>\n        <h2>Users</h2>\n        {loading && <div>Loading ...</div>}\n        <ul>\n          {users.map(user => (\n            <li key={user.uid}>\n              <span>\n                <strong>ID:</strong> {user.uid}\n              </span>\n              <span>\n                <strong>E-Mail:</strong> {user.email}\n              </span>\n              <span>\n                <strong>Username:</strong> {user.username}\n              </span>\n              <span>\n                <Link to={`${ROUTES.ADMIN}/${user.uid}`}>\n                  Details\n                </Link>\n              </span>\n            </li>\n          ))}\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default compose(\n  withFirebase,\n  inject('userStore'),\n  observer,\n)(UserList);\n","import React, { Component } from 'react';\nimport { inject, observer } from 'mobx-react';\nimport { compose } from 'recompose';\n\nimport { withFirebase } from '../../Firebase';\n\nclass UserItem extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      loading: false,\n    };\n  }\n\n  componentDidMount() {\n    if (\n      !(\n        this.props.userStore.users &&\n        this.props.userStore.users[this.props.match.params.id]\n      )\n    ) {\n      this.setState({ loading: true });\n    }\n\n    this.unsubscribe = this.props.firebase\n      .user(this.props.match.params.id)\n      .onSnapshot(snapshot => {\n        this.props.userStore.setUser(\n          this.props.match.params.id,\n          snapshot.data(),\n        );\n\n        this.setState({ loading: false });\n      });\n  }\n\n  componentWillUnmount() {\n    this.unsubscribe && this.unsubscribe();\n  }\n\n  onSendPasswordResetEmail = () => {\n    this.props.firebase.doPasswordReset(\n      this.props.userStore.users[this.props.match.params.id].email,\n    );\n  };\n\n  render() {\n    const user = (this.props.userStore.users || {})[\n      this.props.match.params.id\n    ];\n    const { loading } = this.state;\n\n    return (\n      <div>\n        <h2>User ({this.props.match.params.id})</h2>\n        {loading && <div>Loading ...</div>}\n\n        {user && (\n          <div>\n            <span>\n              <strong>ID:</strong> {user.uid}\n            </span>\n            <span>\n              <strong>E-Mail:</strong> {user.email}\n            </span>\n            <span>\n              <strong>Username:</strong> {user.username}\n            </span>\n            <span>\n              <button\n                type=\"button\"\n                onClick={this.onSendPasswordResetEmail}\n              >\n                Send Password Reset\n              </button>\n            </span>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default compose(\n  withFirebase,\n  inject('userStore'),\n  observer,\n)(UserItem);\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport { compose } from 'recompose';\n\nimport { withAuthorization, withEmailVerification } from '../../Session';\nimport { UserList, UserItem } from '../../Users/simple-ui';\nimport * as ROLES from '../../../constants/roles';\nimport * as ROUTES from '../../../constants/routes';\n\nconst AdminPage = () => (\n  <div>\n    <h1>Admin</h1>\n    <p>The Admin Page is accessible by every signed in admin user.</p>\n\n    <Switch>\n      <Route exact path={ROUTES.ADMIN_DETAILS} component={UserItem} />\n      <Route exact path={ROUTES.ADMIN} component={UserList} />\n    </Switch>\n  </div>\n);\n\nconst condition = authUser =>\n  authUser && !!authUser.roles[ROLES.ADMIN];\n\nexport default compose(\n  withEmailVerification,\n  withAuthorization(condition),\n)(AdminPage);\n","/* eslint-disable no-console */\nimport { Component } from 'react'\n\n/**\n * This component represent the complete state of the needs section of the app.\n * As such, it manages as *all the state*, all subordinate components have to be stateless!\n * This includes both, ephemeral state as well as application state:\n * - Application state is managed in th Stores.\n *   This component reads and writes to the store, based upon the handlers it sets-up\n *   It passes the application state (not the Stores themselves!) down to subordinate components\n * - Ephemeral state is managed in the `state` property of the component.\n *   Since all subordinate components are stateless with respect to applications state,\n *   subordinate components are being passed functions to manipulate it.\n *   This might get messy as the application grows and might be refactored, but it's not that simple to do.\n * \n * This component shall not have a representation. However, it can serve as base-class \n * for visualizing components.\n * \n */\nclass Shopping extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tlistsLoading: false,\n\t\t\titemsLoading: false,\n\t\t}\n\t}\n\n\t_tryInitialization() {\n\t\tif (this.props.sessionStore.dbAuthenticated && !this.unsubscribeLists) {\n\t\t\tthis.ensureExistingCurrentShoppingList()\n\t\t\tthis.onListenForShoppingLists()\n\t\t\tthis.onListenForCurrentShoppingListItems()\n\t\t}\n\t}\n\n\t// React lifecycle methods\n\n\tcomponentDidMount() {\n\t\tif (!this.props.shoppingStore.shoppingListsArray.length) {\n\t\t\tthis.setState({\n\t\t\t\tlistsLoading: true,\n\t\t\t\titemsLoading: true\n\t\t\t})\n\t\t}\n\n\t\tthis._tryInitialization()\n\t}\n\n\tcomponentDidUpdate() {\n\t\tthis._tryInitialization()\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.unregisterAllListeners()\n\t}\n\n\tunregisterAllListeners() {\n\t\tif (this.unsubscribeLists) this.unsubscribeLists()\n\t\tif (this.unsubscribeItems) this.unsubscribeItems()\n\t\tif (this.unsubscribeDependentNeedsLists) this.unsubscribeDependentNeedsLists()\n\t\tthis.unsubscribeAllDependentNeedsListItems()\n\t}\n\n\t// listeners to the database\n\tonListenForShoppingLists = () => {\n\t\tthis.unsubscribeLists = this.props.firebase\n\t\t\t.myShoppingLists()\n\t\t\t.orderBy('createdAt', 'desc')\n\t\t\t// .limit(this.state.limit)\n\t\t\t.onSnapshot(snapshot => {\n\t\t\t\tlet currentShoppingListId = null\n\n\t\t\t\tthis.props.shoppingStore.setInitializationDone(true)\n\n\t\t\t\tif (snapshot.size) {\n\t\t\t\t\tlet shoppingLists = []\n\t\t\t\t\tsnapshot.forEach(doc => {\n\t\t\t\t\t\tconst shoppingList = doc.data()\n\t\t\t\t\t\tshoppingLists.push({ ...shoppingList, uid: doc.id })\n\t\t\t\t\t\tif (shoppingList.isCurrent) {\n\t\t\t\t\t\t\tcurrentShoppingListId = doc.id\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n\t\t\t\t\tthis.props.shoppingStore.setShoppingLists(shoppingLists)\n\n\t\t\t\t\tthis.setState(Object.assign(this.state, { listsLoading: false }))\n\t\t\t\t} else {\n\t\t\t\t\tthis.props.shoppingStore.setShoppingLists([])\n\n\t\t\t\t\tthis.setState({ listsLoading: false, itemsLoading: false })\n\t\t\t\t}\n\n\t\t\t\t// register for item updates - this should actually be done implicitly, but it seems it isn't\n\t\t\t\tif (this.unsubscribeItems) this.unsubscribeItems()\n\t\t\t\tthis.onListenForCurrentShoppingListItems(currentShoppingListId)\n\n\t\t\t\t// register for dependent needs list items\n\t\t\t\tif (this.unsubscribeDependentNeedsLists) this.unsubscribeDependentNeedsLists()\n\t\t\t\tthis.unsubscribeAllDependentNeedsListItems()\n\t\t\t\tthis.onListenForDependentNeedsLists(currentShoppingListId)\n\n\t\t\t})\n\t}\n\n\tonListenForCurrentShoppingListItems = (currentShoppingListId) => {\n\t\tthis.unsubscribeItems = this.props.firebase\n\t\t\t.listItems(currentShoppingListId)\n\t\t\t.onSnapshot(snapshot => {\n\t\t\t\tif (snapshot.size) {\n\t\t\t\t\tlet shoppingItems = []\n\t\t\t\t\tsnapshot.forEach(doc =>\n\t\t\t\t\t\tshoppingItems.push({ ...doc.data(), uid: doc.id, parentId: doc.ref.parent.parent.id }),\n\t\t\t\t\t)\n\n\t\t\t\t\tthis.props.shoppingStore.setCurrentShoppingListItems(shoppingItems)\n\n\t\t\t\t\tthis.setState({ itemsLoading: false })\n\t\t\t\t} else {\n\t\t\t\t\tthis.props.shoppingStore.setCurrentShoppingListItems([])\n\n\t\t\t\t\tthis.setState({ itemsLoading: false })\n\t\t\t\t}\n\t\t\t})\n\t};\n\n\tonListenForDependentNeedsLists = (originShoppingListId) => {\n\t\tthis.unsubscribeDependentNeedsLists = this.props.firebase\n\t\t\t.dependentNeedsListOfShoppingList(originShoppingListId)\n\t\t\t.onSnapshot(snapshot => {\n\t\t\t\t// remove observers for the lists items, they are going to be re-built for each needs list\n\t\t\t\tthis.unsubscribeAllDependentNeedsListItems()\n\n\t\t\t\tif (snapshot.size) {\n\t\t\t\t\tlet dependentNeedsLists = []\n\t\t\t\t\tthis.unsubscribeDependentNeedsListsItems = []\n\n\t\t\t\t\tsnapshot.forEach(doc => {\n\t\t\t\t\t\tconst needsList = doc.data()\n\n\t\t\t\t\t\tdependentNeedsLists.push({ ...needsList, uid: doc.id })\n\n\t\t\t\t\t\t// for each of those needs lists, we also need to setup a listener for the items\n\t\t\t\t\t\tthis.onListenForDependentNeedsListsItems(doc.id)\n\n\t\t\t\t\t\t// The owner of the needs list is a relevant user. \n\t\t\t\t\t\t// Make sure we've got his information buffered\n\t\t\t\t\t\t// we don't need reactivity for that in the first step to keep it simple\n\t\t\t\t\t\tconst { userId } = needsList\n\t\t\t\t\t\tif (!this.props.userStore.users[userId]) {\n\t\t\t\t\t\t\tthis.props.firebase.user(userId).get()\n\t\t\t\t\t\t\t\t.then(snapshot => {\n\t\t\t\t\t\t\t\t\tconst owner = snapshot.data()\n\t\t\t\t\t\t\t\t\tthis.props.userStore.setUser(snapshot.id, owner)\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t)\n\n\t\t\t\t\tthis.props.shoppingStore.setCurrentDependentNeedsLists(dependentNeedsLists)\n\t\t\t\t} else {\n\t\t\t\t\tthis.props.shoppingStore.setCurrentDependentNeedsLists([])\n\t\t\t\t}\n\t\t\t})\n\t}\n\n\tunsubscribeAllDependentNeedsListItems() {\n\t\tif (this.unsubscribeDependentNeedsListsItems\n\t\t\t&& this.unsubscribeDependentNeedsListsItems.length) this.unsubscribeDependentNeedsListsItems.forEach(handler => handler())\n\t}\n\n\tonListenForDependentNeedsListsItems = (needsListId) => {\n\t\tthis.unsubscribeDependentNeedsListsItems.push(\n\t\t\tthis.props.firebase\n\t\t\t\t.listItems(needsListId)\n\t\t\t\t// .orderBy('createdAt', 'desc')\n\t\t\t\t// .limit(this.state.limit)\n\t\t\t\t.onSnapshot(snapshot => {\n\t\t\t\t\tlet dependentNeedsListsItems = []\n\t\t\t\t\tsnapshot.forEach(doc =>\n\t\t\t\t\t\tdependentNeedsListsItems.push({ ...doc.data(), uid: doc.id, parentId: doc.ref.parent.parent.id }),\n\t\t\t\t\t)\n\t\t\t\t\tthis.props.shoppingStore.setDependentNeedsListItems(needsListId, dependentNeedsListsItems)\n\t\t\t\t})\n\t\t)\n\t}\n\n\t// event handlers for lists\n\tonChangeText = event => {\n\t\tthis.setState({ editingListName: event.target.value })\n\t};\n\n\thandleCreateShoppingList = (event) => {\n\t\tevent.preventDefault()\n\n\t\tthis.props.firebase.createShoppingList({\n\t\t\tname: this.state.editingListName\n\t\t})\n\n\t\tthis.setState({ editingListName: '' })\n\t};\n\n\tonCreateShoppingList = (name) => {\n\t\tthis.props.firebase.createShoppingList({\n\t\t\tname\n\t\t})\n\t};\n\n\tonEditShoppingList = (shoppingList) => {\n\t\t// eslint-disable-next-line no-unused-vars\n\t\tconst { uid, ...shoppingListSnapshot } = shoppingList\n\n\t\tthis.props.firebase.editList(shoppingList.uid, shoppingListSnapshot)\n\t};\n\n\tonRemoveShoppingList = uid => {\n\t\tthis.props.firebase.deleteList(uid)\n\t};\n\n\tonSetCurrentShoppingList = uid => {\n\t\tthis.props.firebase.setCurrentShoppingList(uid)\n\t}\n\n\tonReorderItems = (listId, items, order) => {\n\t\tthis.props.firebase.setItemsOrder(listId, items, order)\n\t}\n\n\tonOpenShopping = shoppingList => {\n\t\tthis.props.firebase.openShopping(shoppingList)\n\t}\n\n\tonGoShopping = shoppingList => {\n\t\tthis.props.firebase.goShopping(shoppingList)\n\t}\n\n\tonFinishShopping = shoppingList => {\n\t\tthis.props.firebase.finishShopping(shoppingList)\n\t}\n\n\tonArchiveShoppingList = async (shoppingList, carryForwardToNewList = true) => {\n\t\tlet newList\n\t\tif (carryForwardToNewList) {\n\t\t\tnewList = await this.props.firebase.createListFromTemplate(shoppingList, true)\n\t\t}\n\t\tthis.props.firebase.archiveShoppingList(shoppingList)\n\t\treturn newList\n\t}\n\n\t// event handlers for items\n\tonCreateItemForCurrentShoppingList = (item) => {\n\t\tconst { currentShoppingList } = this.props.shoppingStore\n\t\tif (currentShoppingList) {\n\t\t\treturn this.props.firebase.createItem(currentShoppingList.uid, item)\n\t\t} else {\n\t\t\tconsole.error('Cannot create item for non-existing shoppingList')\n\t\t\treturn new Promise(() => null)\n\t\t}\n\t};\n\n\tonEditShoppingItem = (item) => {\n\t\tconst { currentShoppingList } = this.props.shoppingStore\n\t\tif (currentShoppingList) {\n\t\t\tthis.props.firebase.editItem(currentShoppingList.uid, item)\n\t\t} else {\n\t\t\tconsole.error('Cannot edit item in non-existing shoppingList')\n\t\t}\n\t};\n\n\tonRemoveShoppingItem = (uid) => {\n\t\tconst { currentShoppingList } = this.props.shoppingStore\n\t\tif (currentShoppingList) {\n\t\t\tthis.props.firebase.deleteItem(currentShoppingList.uid, uid)\n\t\t} else {\n\t\t\tconsole.error('Cannot remove item from non-existing shoppingList')\n\t\t}\n\t};\n\n\tonShopShoppingItem = (listId, uid, shopped = true) => {\n\t\tthis.props.firebase.shopItem(listId, uid, shopped)\n\t};\n\n\t// helpers\n\tensureExistingCurrentShoppingList = async () => {\n\t\tconst currentShoppingListSnapshot = await this.props.firebase.myCurrentShoppingList().get()\n\t\tif (!currentShoppingListSnapshot.size) {\n\t\t\treturn this.props.firebase.createShoppingList({ name: '' })\n\t\t}\n\t}\n}\n\nexport default Shopping","export const ITEM_TYPE_SHOPPING = 'shopping'\nexport const ITEM_TYPE_NEW_SHOPPING = 'newShopping'\nexport const ITEM_TYPE_NEED = 'need'\nexport const ITEM_TYPE_POTENTIAL_NEED = 'potential'\nexport const ITEM_TYPE_IN_SHOPPING = 'inShopping'\nexport const ITEM_TYPE_BRING_ALONG = 'bringAlong'","import React, { Component } from 'react'\nimport { IonItem, IonButton, IonInput, IonSelect, IonSelectOption, IonLabel, IonIcon, IonToast } from '@ionic/react'\nimport { ITEM_TYPE_SHOPPING } from '../../../constants/items'\n\nimport { withTranslation } from 'react-i18next'\nimport { checkmarkOutline, closeOutline } from 'ionicons/icons'\nimport { ENTER } from '../../Reusables/keys'\n\nclass EditItem extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\t...props.item,\n\t\t\tshowToast: false,\n\t\t\tmessage: '',\n\t\t}\n\n\t\tthis.nameInput = React.createRef()\n\t\tthis.quantityInput = React.createRef()\n\t}\n\n\tconcludeEditing(confirm = true) {\n\t\tconst { item, t } = this.props\n\t\tif (confirm) {\n\t\t\tconst { name, quantity, unit = '' } = this.state\n\t\t\tif (name && quantity) {\n\t\t\t\tthis.props.onEditingConcluded(Object.assign(item, {\n\t\t\t\t\tname,\n\t\t\t\t\tquantity,\n\t\t\t\t\tunit,\n\t\t\t\t}))\n\t\t\t} else {\n\t\t\t\tthis.setState({\n\t\t\t\t\tshowToast: true,\n\t\t\t\t\tmessage: t('Name_and_quantity_mandatory')\n\t\t\t\t})\n\t\t\t}\n\t\t\tthis.quantityInput.current.setFocus()\n\t\t} else {\n\t\t\t// reset it\n\t\t\tthis.props.onEditingConcluded(item)\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tsetTimeout(() => {\n\t\t\tif (this.quantityInput.current) { this.quantityInput.current.setFocus() }\n\t\t}, 500)\n\t}\n\n\tonChange(event) {\n\t\tthis.setState({ [event.target.name]: event.target.value })\n\t}\n\n\tonKeyPress = (event) => {\n\t\tif (event.which === ENTER) this.concludeEditing()\n\t}\n\n\tonBlur(event) {\n\t\tif (event.target.parentElement !== event.srcElement.parentElement) {\n\t\t\tthis.concludeEditing()\n\t\t}\n\t}\n\n\tsetUnit(unit) {\n\t\tthis.setState({ unit })\n\t}\n\n\trender() {\n\t\tconst { name, quantity, unit } = this.state\n\n\t\tconst { t } = this.props\n\n\t\tconst unitOfMeasure = this.props.mode === ITEM_TYPE_SHOPPING\n\t\t\t? <IonSelect\n\t\t\t\tvalue={unit}\n\t\t\t\trequired=\"true\"\n\t\t\t\tslot=\"end\"\n\t\t\t\tonIonChange={e => this.setUnit(e.detail.value)}\n\t\t\t>\n\t\t\t\t<IonSelectOption>pc</IonSelectOption>\n\t\t\t\t<IonSelectOption>g</IonSelectOption>\n\t\t\t\t<IonSelectOption>kg</IonSelectOption>\n\t\t\t\t<IonSelectOption>l</IonSelectOption>\n\t\t\t\t<IonSelectOption>ml</IonSelectOption>\n\t\t\t</IonSelect>\n\t\t\t: <IonLabel\n\t\t\t\tmarginLeft=\"2px\"\n\t\t\t\tslot=\"end\"\n\t\t\t>\n\t\t\t\t{unit}\n\t\t\t</IonLabel>\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<IonItem style={{ width: '100%' }}>\n\t\t\t\t\t<IonInput\n\t\t\t\t\t\tplaceholder={t('Item name')}\n\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\tautocapitalize\n\t\t\t\t\t\tautocorrect=\"on\"\n\t\t\t\t\t\tdebounce={100}\n\t\t\t\t\t\tstyle={{ marginRight: '0px', minWidth: '135px' }}\n\t\t\t\t\t\tsize={16}\n\t\t\t\t\t\tslot=\"\"\n\t\t\t\t\t\tonKeyUp={this.onKeyPress}\n\t\t\t\t\t\tonIonInput={event => this.onKeyPress(event)}\n\t\t\t\t\t\tonIonChange={event => this.onChange(event)}\n\t\t\t\t\t\tonIonBlur={event => this.onBlur(event)}\n\t\t\t\t\t\tref={this.nameInput}\n\t\t\t\t\t/>\n\t\t\t\t\t<IonInput\n\t\t\t\t\t\t// autofocus={(this.props.mode === ITEM_TYPE_NEED) || (this.props.mode === ITEM_TYPE_SHOPPING && name)}\n\t\t\t\t\t\tplaceholder={t('Quantity')}\n\t\t\t\t\t\tname=\"quantity\"\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\tpattern=\"\\d+,?\\d*\"\n\t\t\t\t\t\tvalue={quantity}\n\t\t\t\t\t\tonKeyUp={this.onKeyPress}\n\t\t\t\t\t\tonIonChange={event => this.onChange(event)}\n\t\t\t\t\t\tonIonBlur={event => this.onBlur(event)}\n\t\t\t\t\t\trequired=\"false\"\n\t\t\t\t\t\tslot=\"end\"\n\t\t\t\t\t\tstyle={{ marginRight: '0px', maxWidth: '42px', textAlign: 'right' }}\n\t\t\t\t\t\tref={this.quantityInput}\n\t\t\t\t\t/>\n\t\t\t\t\t{unitOfMeasure}\n\t\t\t\t\t<IonButton\n\t\t\t\t\t\tcolor=\"danger\"\n\t\t\t\t\t\tslot=\"end\"\n\t\t\t\t\t\tonClick={() => this.concludeEditing(false)}\n\t\t\t\t\t// style={{ 'marginLeft': '10px' }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<IonIcon icon={closeOutline} />\n\t\t\t\t\t</IonButton>\n\t\t\t\t\t<IonButton color=\"success\"\n\t\t\t\t\t\tslot=\"end\"\n\t\t\t\t\t\tonClick={() => this.concludeEditing()}\n\t\t\t\t\t\tstyle={{ 'marginLeft': '10px' }}>\n\t\t\t\t\t\t<IonIcon icon={checkmarkOutline} />\n\t\t\t\t\t</IonButton>\n\t\t\t\t</IonItem>\n\t\t\t\t<IonToast\n\t\t\t\t\tisOpen={this.state.showToast}\n\t\t\t\t\tonDidDismiss={() => this.setState(() => ({ showToast: false }))}\n\t\t\t\t\tmessage={this.state.message}\n\t\t\t\t\tduration={3000}\n\t\t\t\t/>\n\t\t\t</>\n\t\t)\n\t}\n}\n\nexport default withTranslation()(EditItem)\n","export const ENTER = 13","import React from 'react'\nimport { IonAvatar } from '@ionic/react'\nimport UserProfileImg from './UserProfileImg'\n\nconst Avatar = ({\n\tuser,\n\tsize = 200,\n\tslot = ''\n}) => {\n\treturn (\n\t\t<IonAvatar style={{ width: size, height: size }} slot={slot}>\n\t\t\t<UserProfileImg size={size} user={user} />\n\t\t</IonAvatar>\n\t)\n}\n\nexport default Avatar","import React, { Component } from 'react'\nimport { IonItem, IonLabel, IonButton, IonIcon, IonReorder, IonCheckbox, IonList, IonChip } from '@ionic/react'\nimport EditItem from './EditItem'\nimport { trash, add, shareSocialOutline, createOutline } from 'ionicons/icons'\nimport { ITEM_TYPE_IN_SHOPPING, ITEM_TYPE_SHOPPING, ITEM_TYPE_NEW_SHOPPING, ITEM_TYPE_NEED, ITEM_TYPE_POTENTIAL_NEED, ITEM_TYPE_BRING_ALONG } from '../../../constants/items'\nimport { compose } from 'recompose'\nimport { inject, observer } from 'mobx-react'\nimport Avatar from '../../Reusables/ionic/Avatar'\nimport { toJS } from 'mobx'\n\nclass Item extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tinEdit: !props.item.quantity,\n\t\t}\n\t}\n\n\tsetEditMode(inEdit) {\n\t\tif (!this.props.readOnly) {\n\t\t\tthis.setState({ inEdit })\n\t\t}\n\t}\n\n\tonItemClick() {\n\t\tconst { uid, parentId, shopped } = this.props.item\n\t\tswitch (this.props.mode) {\n\t\tcase ITEM_TYPE_IN_SHOPPING:\n\t\tcase ITEM_TYPE_BRING_ALONG:\n\t\t\tthis.props.onShopItem(parentId, uid, !shopped)\n\t\t\tbreak\n\t\tcase ITEM_TYPE_POTENTIAL_NEED:\n\t\t\tbreak\n\t\tdefault:\n\t\t\tthis.setEditMode(true)\n\t\t\tbreak\n\t\t}\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\titem,\n\t\t\tbringAlongItems,\n\t\t\tmode,\n\t\t\tlistEditMode,\n\t\t\townList,\n\t\t\towner,\n\t\t\tonCreateNeed,\n\t\t\tonDeleteItem,\n\t\t\tonEditingConcluded,\n\t\t\tonShopItem,\n\t\t\treadOnly,\n\t\t} = this.props\n\n\t\tconst needIcon = !ownList && !readOnly && mode === ITEM_TYPE_POTENTIAL_NEED &&\n\t\t\t<IonButton\n\t\t\t\tfill=\"add\"\n\t\t\t\tsize=\"large\"\n\t\t\t\tslot=\"end\"\n\t\t\t\tcolor=\"primary\"\n\t\t\t\tdata-test=\"btn-create-need\"\n\t\t\t\tonClick={() => onCreateNeed(item)}\n\t\t\t>\n\t\t\t\t<IonIcon icon={add} />\n\t\t\t</IonButton>\n\n\t\tconst showQuantityLabel = [ITEM_TYPE_NEED, ITEM_TYPE_IN_SHOPPING, ITEM_TYPE_BRING_ALONG].includes(mode) ||\n\t\t\t([ITEM_TYPE_SHOPPING, ITEM_TYPE_NEW_SHOPPING].includes(mode) && (item.quantity > 1 || item.unit))\n\t\tconst quantityLabel = showQuantityLabel &&\n\t\t\t<IonChip\n\t\t\t\tonClick={() => this.setEditMode(true)}\n\t\t\t\tcolor={!item.shopped ? 'primary' : 'success'}>\n\t\t\t\t<IonLabel\n\t\t\t\t\tcolor={!item.shopped ? 'dark' : 'success'}\n\t\t\t\t\tdata-test=\"label-quantity\"\n\t\t\t\t>\n\t\t\t\t\t{mode === ITEM_TYPE_BRING_ALONG && '+'}{item.quantity} {item.unit}\n\t\t\t\t</IonLabel>\n\t\t\t</IonChip>\n\n\t\tconst showDeleteButton = ownList && !readOnly\n\t\t\t&& ((mode === ITEM_TYPE_SHOPPING && listEditMode) || mode === ITEM_TYPE_NEED)\n\n\t\tconst deleteIcon = showDeleteButton &&\n\t\t\t<IonButton\n\t\t\t\tclassName=\"button-end\"\n\t\t\t\tfill=\"clear\"\n\t\t\t\tsize=\"large\"\n\t\t\t\tslot=\"end\"\n\t\t\t\tcolor=\"danger\"\n\t\t\t\tonClick={() => onDeleteItem(item.uid)}\n\t\t\t\tdata-test=\"btn-delete-item\"\n\t\t\t>\n\t\t\t\t<IonIcon icon={trash} />\n\t\t\t</IonButton>\n\n\t\tconst showEditButton = ownList && !readOnly\n\t\t\t&& [ITEM_TYPE_SHOPPING].includes(mode)\n\t\t\t&& !(mode === ITEM_TYPE_SHOPPING && listEditMode)\n\n\t\tconst editIcon = showEditButton &&\n\t\t\t<IonButton\n\t\t\t\tclassName=\"button-end\"\n\t\t\t\tfill=\"clear\"\n\t\t\t\tsize=\"large\"\n\t\t\t\tslot=\"end\"\n\t\t\t\tonClick={() => this.setEditMode(true)}\n\t\t\t\tdata-test=\"btn-edit-item\"\n\t\t\t>\n\t\t\t\t<IonIcon icon={createOutline} slot=\"end\" />\n\t\t\t</IonButton>\n\n\n\t\tconst ownerIcon = owner &&\n\t\t\t<IonButton\n\t\t\t\tfill=\"clear\"\n\t\t\t\tsize=\"large\"\n\t\t\t\tslot=\"start\"\n\t\t\t\tdata-test=\"btn-owner\"\n\t\t\t><Avatar size=\"30px\" user={owner} /></IonButton>\n\n\t\tconst BringAlongQuantity = () => {\n\t\t\tif (mode === ITEM_TYPE_SHOPPING && bringAlongItems && bringAlongItems.length) {\n\t\t\t\tconst totalQuantity = bringAlongItems.reduce((total, bringAlongItem) => (total + Number(bringAlongItem.quantity)), 0)\n\t\t\t\tif (totalQuantity > 0) return (\n\t\t\t\t\t<span style={{ display: 'flex' }}>\n\t\t\t\t\t\t<IonChip color=\"secondary\">\n\t\t\t\t\t\t\t<IonIcon icon={shareSocialOutline} />\n\t\t\t\t\t\t\t<IonLabel\n\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\tdata-test=\"label-bring-along-quantity\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t+{totalQuantity} {item.unit}\n\t\t\t\t\t\t\t</IonLabel>\n\t\t\t\t\t\t</IonChip>\n\t\t\t\t\t</span>\n\t\t\t\t)\n\t\t\t}\n\t\t\treturn null\n\t\t}\n\n\t\tconst itemDisplay = this.state.inEdit ?\n\t\t\t<EditItem\n\t\t\t\titem={toJS(item)}\n\t\t\t\tonEditingConcluded={(item) => {\n\t\t\t\t\tthis.setEditMode(false)\n\t\t\t\t\tonEditingConcluded(item)\n\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tmode={mode}\n\t\t\t/>\n\t\t\t:\n\t\t\t<>\n\t\t\t\t{[ITEM_TYPE_IN_SHOPPING, ITEM_TYPE_BRING_ALONG].includes(mode) &&\n\t\t\t\t\t<IonCheckbox\n\t\t\t\t\t\tslot=\"start\"\n\t\t\t\t\t\tstyle={mode === ITEM_TYPE_BRING_ALONG ? { marginLeft: '40px' } : null}\n\t\t\t\t\t\tvalue={item.name}\n\t\t\t\t\t\tchecked={item.shopped}\n\t\t\t\t\t\tonClick={() => this.onItemClick()}\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tdata-test=\"check-shopped\"\n\t\t\t\t\t/>}\n\t\t\t\t<IonLabel\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tcursor: 'pointer',\n\t\t\t\t\t\ttextDecoration: (item.shopped ? 'line-through' : 'none'),\n\t\t\t\t\t\tcolor: ((item.shopped || mode === ITEM_TYPE_BRING_ALONG) ? 'grey' : 'black')\n\t\t\t\t\t}}\n\t\t\t\t\tonClick={() => this.onItemClick()}\n\t\t\t\t\tdata-test=\"label-item-name\">\n\t\t\t\t\t{item.name}\n\t\t\t\t</IonLabel>\n\t\t\t\t<BringAlongQuantity />\n\t\t\t\t{ownerIcon}\n\t\t\t\t{quantityLabel}\n\t\t\t\t{needIcon}\n\t\t\t\t{editIcon}\n\t\t\t\t{deleteIcon}\n\t\t\t</>\n\n\t\tconst dependentNeededItems = mode === ITEM_TYPE_IN_SHOPPING && bringAlongItems && (\n\t\t\t<IonList data-test=\"dependent-items\"\n\t\t\t>\n\t\t\t\t{bringAlongItems\n\t\t\t\t\t.map(neededItem => {\n\t\t\t\t\t\tconst owner = this.props.userStore.users[neededItem.ownerId]\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Item\n\t\t\t\t\t\t\t\tkey={neededItem.uid}\n\t\t\t\t\t\t\t\titem={neededItem}\n\t\t\t\t\t\t\t\towner={owner}\n\t\t\t\t\t\t\t\townList={false}\n\t\t\t\t\t\t\t\tonShopItem={() =>\n\t\t\t\t\t\t\t\t\tonShopItem(neededItem.parentId, neededItem.uid, !neededItem.shopped)}\n\t\t\t\t\t\t\t\tmode={ITEM_TYPE_BRING_ALONG} />\n\t\t\t\t\t\t)\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t</IonList>\n\t\t)\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<IonItem id={item.uid} data-test=\"item\">\n\t\t\t\t\t<IonReorder slot=\"start\" />\n\t\t\t\t\t{itemDisplay}\n\t\t\t\t</IonItem>\n\t\t\t\t{dependentNeededItems}\n\t\t\t</>\n\t\t)\n\t}\n}\n\nexport default compose(\n\tinject('userStore'),\n\tobserver,\n)(Item)\n","import React, { Component } from 'react'\nimport Item from '../../Item/ionic/Item'\nimport { IonList, IonReorderGroup, IonToggle, IonLabel, IonItem } from '@ionic/react'\nimport { LIFECYCLE_STATUS_OPEN } from '../../../constants/lists'\nimport { Trans } from 'react-i18next'\nimport { compose } from 'recompose'\nimport { inject, observer } from 'mobx-react'\nimport sortItems from '../../Reusables/functions/sortItems'\n\nclass ShoppingList extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\teditName: this.props.list.name,\n\t\t}\n\n\t\tif (this.props.addSaveEditHandler) {\n\t\t\tthis.props.addSaveEditHandler(this.saveEdit.bind(this))\n\t\t}\n\t}\n\n\tonChangeEditName = event => {\n\t\tthis.setState({ editName: event.target.value })\n\t};\n\n\tonSaveEditName = () => {\n\t\tthis.props.onEditList(this.props.list, this.state.editName)\n\t};\n\n\tdoReorder(event) {\n\t\tevent.detail.complete()\n\n\t\tconst { children } = event.srcElement\n\t\tlet order = {}\n\t\tevent.detail.complete()\n\t\tlet position = 0\n\n\t\t// eslint-disable-next-line\n\t\tfor (const k in children) {\n\t\t\tposition++\n\t\t\tif (children.hasOwnProperty(k)) {\n\t\t\t\tif (children[k].id) {\n\t\t\t\t\torder[children[k].id] = position\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.setState({ order })\n\t}\n\n\tsaveEdit() {\n\t\tthis.onSaveEditName()\n\t\tif (this.state.order) {\n\t\t\tthis.props.onReorderItems(this.props.list.uid, this.props.items, this.state.order)\n\n\t\t\t// also re-order all items to bring along\n\t\t\tconst {\n\t\t\t\tcurrentDependentNeedsListsArray: currentDependentNeedsLists,\n\t\t\t\tcurrentDependentNeedsListsItemsArray: currentDependentNeedsListsItems,\n\t\t\t} = this.props.shoppingStore\n\n\t\t\tcurrentDependentNeedsLists.forEach(needsList => {\n\t\t\t\tthis.props.onReorderItems(\n\t\t\t\t\tneedsList.uid,\n\t\t\t\t\tcurrentDependentNeedsListsItems.filter(item => item.parentId === needsList.uid),\n\t\t\t\t\tthis.state.order)\n\t\t\t})\n\n\t\t}\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\titems,\n\t\t\tlist,\n\t\t\tonEditList,\n\t\t\tonEditItem,\n\t\t\tonDeleteItem,\n\t\t\tonShopItem,\n\t\t\teditMode,\n\t\t\tuserStore,\n\t\t} = this.props\n\n\t\t// we need to visualize the items to bring along differently\n\t\t// whether they are related to a shopping list item or not\n\t\t// the following lines determine the relationship between shopping items\n\t\t// and the ones from dependent needs lists\n\t\tconst bringAlongItemsByShoppingItem = {} // Map with key shopping item id\n\t\tconst otherUsersOwnNeededItems = []; // additional items without any relation\n\n\t\t(this.props.bringAlongItems || []).forEach((neededItem) => {\n\t\t\tif (neededItem.quantity <= 0) return false\n\t\t\tconst originItem =\n\t\t\t\titems.find(item => item.uid === neededItem.originShoppingItemId) ||\n\t\t\t\titems.find(item => item.name === neededItem.name)\n\n\t\t\tif (originItem) {\n\t\t\t\tif (bringAlongItemsByShoppingItem[originItem.uid] &&\n\t\t\t\t\tbringAlongItemsByShoppingItem[originItem.uid].length\n\t\t\t\t) {\n\t\t\t\t\tbringAlongItemsByShoppingItem[originItem.uid].push(neededItem)\n\t\t\t\t} else {\n\t\t\t\t\tbringAlongItemsByShoppingItem[originItem.uid] = [neededItem]\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst owner = userStore.users[neededItem.ownerId]\n\t\t\t\totherUsersOwnNeededItems.push({\n\t\t\t\t\t...neededItem,\n\t\t\t\t\towner,\n\t\t\t\t\townedByOtherUser: true\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\n\t\tconst allItems = (items||[]).concat(otherUsersOwnNeededItems || [])\n\t\tif(allItems.length === 0) return null\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<IonList>\n\t\t\t\t\t{/* // The following component is actually a hack. I expected the IonReorderGroup to \n        // toggle \"disabled\" based on the edit mode.\n        // However, whit does not work as expected, as when leaving back to non-Edit-mode, \n        // the oder is destroyed until loaded from the database for the next time */}\n\t\t\t\t\t{\n\t\t\t\t\t\t!editMode\n\t\t\t\t\t\t&& allItems\n\t\t\t\t\t\t\t.sort((a, b) => sortItems(a, b))\n\t\t\t\t\t\t\t.map((item, key) => {\n\t\t\t\t\t\t\t\tconst relatedBringAlongItems = bringAlongItemsByShoppingItem[item.uid]\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Item\n\t\t\t\t\t\t\t\t\t\tkey={item.id || key}\n\t\t\t\t\t\t\t\t\t\titem={item}\n\t\t\t\t\t\t\t\t\t\towner={item.owner}\n\t\t\t\t\t\t\t\t\t\tbringAlongItems={relatedBringAlongItems}\n\t\t\t\t\t\t\t\t\t\townList={!item.ownedByOtherUser}\n\t\t\t\t\t\t\t\t\t\tonEditingConcluded={onEditItem}\n\t\t\t\t\t\t\t\t\t\tonDeleteItem={onDeleteItem}\n\t\t\t\t\t\t\t\t\t\tonShopItem={onShopItem}\n\t\t\t\t\t\t\t\t\t\tmode={this.props.mode}\n\t\t\t\t\t\t\t\t\t\treadOnly={this.props.list.lifecycleStatus !== LIFECYCLE_STATUS_OPEN || item.ownedByOtherUser}\n\t\t\t\t\t\t\t\t\t/>)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\t{/* { \n            !editMode && otherUsersOwnNeededItems && !!otherUsersOwnNeededItems.length\n            && <IonListHeader lines=\"inset\"><h3><Trans>Needed items of friends</Trans></h3></IonListHeader>\n          }\n          {\n            !editMode && otherUsersOwnNeededItems.map((item, key) => {\n            return (\n              <Item\n                key={item.id || key}\n                item={item}\n                ownList={false}\n                onShopItem={onShopItem}\n                mode={this.props.mode}\n                readOnly={true}\n              />)\n          })\n          } */}\n\t\t\t\t\t{\n\t\t\t\t\t\teditMode &&\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<IonItem lines=\"none\">\n\t\t\t\t\t\t\t\t<IonLabel><Trans>Allow friends to add own needs</Trans></IonLabel>\n\t\t\t\t\t\t\t\t<IonToggle\n\t\t\t\t\t\t\t\t\tname=\"allowCreateOwnNeeds\"\n\t\t\t\t\t\t\t\t\tchecked={list.allowCreateOwnNeeds}\n\t\t\t\t\t\t\t\t\tonIonChange={() => {\n\t\t\t\t\t\t\t\t\t\tonEditList(Object.assign(list, { allowCreateOwnNeeds: !list.allowCreateOwnNeeds }))\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</IonItem>\n\t\t\t\t\t\t\t<IonReorderGroup disabled={false} onIonItemReorder={this.doReorder.bind(this)}>\n\t\t\t\t\t\t\t\t{items.concat(otherUsersOwnNeededItems || [])\n\t\t\t\t\t\t\t\t\t.sort((a, b) => sortItems(a, b))\n\t\t\t\t\t\t\t\t\t.map((item, key) => (\n\t\t\t\t\t\t\t\t\t\t<Item\n\t\t\t\t\t\t\t\t\t\t\tkey={item.id || key}\n\t\t\t\t\t\t\t\t\t\t\titem={item}\n\t\t\t\t\t\t\t\t\t\t\townList={true}\n\t\t\t\t\t\t\t\t\t\t\tonEditingConcluded={onEditItem}\n\t\t\t\t\t\t\t\t\t\t\tonDeleteItem={onDeleteItem}\n\t\t\t\t\t\t\t\t\t\t\tonShopItem={onShopItem}\n\t\t\t\t\t\t\t\t\t\t\tmode={this.props.mode}\n\t\t\t\t\t\t\t\t\t\t\treadOnly={this.props.list.lifecycleStatus !== LIFECYCLE_STATUS_OPEN}\n\t\t\t\t\t\t\t\t\t\t\tlistEditMode={editMode}\n\t\t\t\t\t\t\t\t\t\t/>))}\n\t\t\t\t\t\t\t</IonReorderGroup>\n\t\t\t\t\t\t</>\n\t\t\t\t\t}\n\t\t\t\t</IonList>\n\t\t\t</>\n\t\t)\n\t}\n}\n\nexport default compose(\n\tinject('shoppingStore', 'userStore'),\n\tobserver,\n)(ShoppingList)\n","import React from 'react'\nimport { IonLoading } from '@ionic/react'\nimport { useTranslation } from 'react-i18next'\n\nconst LoadingAnimation = ({ loading }) => {\n\tconst { t } = useTranslation()\n\n\treturn (\n\t\t<IonLoading\n\t\t\tisOpen={loading}\n\t\t\tmessage={t('Loading_message')}\n\t\t/>\n\t)\n}\n\nexport default LoadingAnimation","const UNITS = [\n\t'pc',\n\t'g',\n\t'kg',\n\t'l',\n\t'ml',\n\t'oz',\n\t'Stück',\n\t'Packungen'\n]\n\nexport default UNITS","import React, { Component } from 'react'\nimport { IonItem, IonButton, IonInput, IonSelect, IonSelectOption, IonIcon, IonToast, IonLabel } from '@ionic/react'\n\nimport { withTranslation } from 'react-i18next'\nimport { addOutline } from 'ionicons/icons'\nimport { ENTER } from '../../Reusables/keys'\nimport { ITEM_TYPE_NEED } from '../../../constants/items'\n\nimport './createItem.scss'\nimport units from '../units'\nimport parseName from '../parseName'\n\nclass CreateItem extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tshowToast: false,\n\t\t\tmessage: '',\n\t\t}\n\n\t\tthis.nameInput = React.createRef()\n\t\tthis.quantityInput = React.createRef()\n\t}\n\n\t_setFocus() {\n\t\tif (this.state.name) {\n\t\t\tsetTimeout(() =>\n\t\t\t\tthis.quantityInput.current && this.quantityInput.current.setFocus()\n\t\t\t, 100)\n\t\t} else {\n\t\t\tsetTimeout(() =>\n\t\t\t\tthis.nameInput.current && this.nameInput.current.setFocus()\n\t\t\t, 100)\n\t\t}\n\t}\n\n\tconcludeEditing() {\n\t\tconst { t } = this.props\n\t\tconst { name, quantity, unit = '' } = this.props.item\n\t\tif (name) {\n\t\t\tif (!quantity) {\n\t\t\t\tthis.props.onEditingConcluded(parseName(name))\n\t\t\t} else {\n\t\t\t\tthis.props.onEditingConcluded({\n\t\t\t\t\tname,\n\t\t\t\t\tquantity: quantity || 1,\n\t\t\t\t\tunit,\n\t\t\t\t})\n\t\t\t}\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tshowToast: true,\n\t\t\t\tmessage: t('Name_mandatory')\n\t\t\t})\n\t\t}\n\n\t\tthis._setFocus()\n\t}\n\n\tonChange(event) {\n\t\tthis.props.onChange(event)\n\t}\n\n\tonKeyPress = (event) => {\n\t\tif (event.which === ENTER) this.concludeEditing()\n\t}\n\n\tonBlur(event) {\n\t\tif (event.target.parentElement !== event.srcElement.parentElement) {\n\t\t\tthis.concludeEditing()\n\t\t}\n\t}\n\n\tsetUnit(unit) {\n\t\tthis.props.onChange({target: {name: 'unit', value: unit}})\n\t}\n\n\tcomponentDidMount() {\n\t\tthis._setFocus()\n\t}\n\n\trender() {\n\t\tconst { name, quantity, unit, originShoppingItemUid } = this.props.item\n\n\t\tconst { t, isFirstItem, highlight } = this.props\n\n\t\tconst unitOfMeasure =\n\t\t\tthis.props.mode === ITEM_TYPE_NEED && unit\n\t\t\t\t? <IonLabel\n\t\t\t\t\tslot=\"end\"\n\t\t\t\t\tclassName=\"hide-sm-down\"\n\t\t\t\t>{unit}</IonLabel>\n\t\t\t\t: <IonSelect\n\t\t\t\t\tvalue={unit}\n\t\t\t\t\trequired=\"true\"\n\t\t\t\t\tslot=\"end\"\n\t\t\t\t\tstyle={{ marginRight: '0px' }}\n\t\t\t\t\tonIonChange={e => this.setUnit(e.detail.value)}\n\t\t\t\t\tclassName=\"hide-sm-down\"\n\t\t\t\t\tdata-test=\"select-unit\"\n\t\t\t\t>\n\t\t\t\t\t{units.map(unit =>\n\t\t\t\t\t\t<IonSelectOption key={unit}>\n\t\t\t\t\t\t\t{unit}\n\t\t\t\t\t\t</IonSelectOption>)\n\t\t\t\t\t}\n\t\t\t\t</IonSelect>\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<IonItem\n\t\t\t\t\tkey=\"createItemWrapper\"\n\t\t\t\t\tlines=\"none\"\n\t\t\t\t\tstyle={{ width: '100%' }}\n\t\t\t\t\tclassName={`create-item ${(isFirstItem || highlight) && 'highlight'}`}\n\t\t\t\t\tdata-test=\"create-item\">\n\t\t\t\t\t<IonInput\n\t\t\t\t\t\tplaceholder={t('Item name')}\n\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\treadonly={!!originShoppingItemUid}\n\t\t\t\t\t\trequired=\"true\"\n\t\t\t\t\t\tautocapitalize\n\t\t\t\t\t\tautocorrect=\"on\"\n\t\t\t\t\t\tdebounce={100}\n\t\t\t\t\t\tstyle={{ marginRight: '0px', minWidth: '135px' }}\n\t\t\t\t\t\tsize={16}\n\t\t\t\t\t\tref={this.nameInput}\n\t\t\t\t\t\tslot=\"start\"\n\t\t\t\t\t\tdata-test=\"input-name\"\n\t\t\t\t\t\tonKeyUp={this.onKeyPress}\n\t\t\t\t\t\tonIonInput={event => this.onKeyPress(event)}\n\t\t\t\t\t\tonIonChange={event => this.onChange(event)}\n\t\t\t\t\t\tonIonBlur={event => this.onBlur(event)}\n\t\t\t\t\t/>\n\t\t\t\t\t<IonInput\n\t\t\t\t\t\tplaceholder={t('Quantity')}\n\t\t\t\t\t\tname=\"quantity\"\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\tpattern=\"\\d+,?\\d*\"\n\t\t\t\t\t\tvalue={quantity}\n\t\t\t\t\t\trequired=\"false\"\n\t\t\t\t\t\tslot=\"end\"\n\t\t\t\t\t\tstyle={{ marginRight: '0px', minWidth: '63px' }}\n\t\t\t\t\t\tclassName=\"hide-sm-down\"\n\t\t\t\t\t\tref={this.quantityInput}\n\t\t\t\t\t\tdata-test=\"input-quantity\"\n\t\t\t\t\t\tonKeyUp={this.onKeyPress}\n\t\t\t\t\t\tonIonChange={event => this.onChange(event)}\n\t\t\t\t\t\tonIonBlur={event => this.onBlur(event)}\n\t\t\t\t\t/>\n\t\t\t\t\t{unitOfMeasure}\n\t\t\t\t\t<IonButton\n\t\t\t\t\t\tslot=\"end\"\n\t\t\t\t\t\tdata-test=\"btn-create-item\"\n\t\t\t\t\t\tonClick={() => this.concludeEditing()} style={{ 'marginLeft': '10px' }}>\n\t\t\t\t\t\t<IonIcon icon={addOutline} />\n\t\t\t\t\t</IonButton>\n\t\t\t\t</IonItem>\n\t\t\t\t<IonToast\n\t\t\t\t\tisOpen={this.state.showToast}\n\t\t\t\t\tonDidDismiss={() => this.setState(() => ({ showToast: false }))}\n\t\t\t\t\tmessage={this.state.message}\n\t\t\t\t\tduration={3000}\n\t\t\t\t/>\n\t\t\t</>\n\t\t)\n\t}\n}\n\nexport default withTranslation()(CreateItem)\n","import units from './units'\n\nexport default function (itemDescription) {\n\t//support two formats:\n\t//prefix: 100ml Milk\n\t//postfix: Milk 100ml\n\ttry {\n\t\tconst prefixRegex = new RegExp(`^((\\\\d)+)\\\\s?(${units.join('|')})?\\\\s((.)+)$`, 'i')\n\t\tconst prefixMatch = itemDescription.match(prefixRegex)\n\t\tif (prefixMatch) {\n\t\t\treturn {\n\t\t\t\tname: prefixMatch[4],\n\t\t\t\tquantity: prefixMatch[1],\n\t\t\t\tunit: prefixMatch[3] || ''\n\t\t\t}\n\t\t}\n\n\t\tconst postfixRegex = new RegExp(`^((.)+)\\\\s((\\\\d)+)\\\\s?(${units.join('|')})?$`,'i')\n\t\tconst postfixMatch = itemDescription.match(postfixRegex)\n\t\tif (postfixMatch) {\n\t\t\treturn {\n\t\t\t\tname: postfixMatch[1],\n\t\t\t\tquantity: postfixMatch[3],\n\t\t\t\tunit: postfixMatch[5] || ''\n\t\t\t}\n\t\t}\n\t} catch (e) {\n\t\t// fallback for any unforeseen format\n\t\treturn { name: itemDescription, quantity: 1 }\n\t}\n\treturn { name: itemDescription, quantity: 1 }\n}","import React, { Component } from 'react'\nimport { inject, observer } from 'mobx-react'\nimport { compose } from 'recompose'\n\nimport ShoppingList from './ShoppingList'\n\nimport LoadingAnimation from '../../Reusables/ionic/LoadingAnimation'\nimport { withRouter } from 'react-router'\nimport { GO_SHOPPING } from '../../../constants/routes'\nimport { ITEM_TYPE_IN_SHOPPING, ITEM_TYPE_SHOPPING } from '../../../constants/items'\nimport { LIFECYCLE_STATUS_OPEN } from '../../../constants/lists'\nimport { IonList, IonItem } from '@ionic/react'\nimport CreateItem from '../../Item/ionic/CreateItem'\n\nclass Shopping extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\teditingListName: '',\n\t\t\titemInCreation: {},\n\t\t}\n\n\t\tthis.statusTransitionTriggered = false\n\t}\n\n\tcomponentDidUpdate() {\n\t\tif (!this.statusTransitionTriggered && this.props.shoppingStore.currentShoppingList) {\n\t\t\tthis.props.model.onOpenShopping(this.props.shoppingStore.currentShoppingList)\n\t\t\tthis.statusTransitionTriggered = true\n\t\t}\n\t}\n\n\tonCreatingItemChange(event) {\n\t\tthis.setState({\n\t\t\titemInCreation:\n\t\t\t\tObject.assign(this.state.itemInCreation, { [event.target.name]: event.target.value })\n\t\t})\n\t}\n\n\tonCreateComplete(newItem) {\n\t\tif (!newItem.name || !newItem.quantity) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.props.model.onCreateItemForCurrentShoppingList(newItem)\n\t\tthis.setState({ itemInCreation: {} })\n\t}\n\n\trender() {\n\t\tconst { shoppingStore, sessionStore } = this.props\n\t\tconst {\n\t\t\t// shoppingListsArray: shoppingLists,\n\t\t\tcurrentShoppingList,\n\t\t\tcurrentShoppingListItemsArray: currentShoppingListItems,\n\t\t\tcurrentDependentNeedsListsArray: currentDependentNeedsLists,\n\t\t\tcurrentDependentNeedsListsItemsArray: currentDependentNeedsListsItems,\n\t\t\tinitializationDone,\n\t\t} = shoppingStore\n\n\t\tconst mode = this.props.location.pathname === GO_SHOPPING\n\t\t\t? ITEM_TYPE_IN_SHOPPING\n\t\t\t: ITEM_TYPE_SHOPPING\n\n\t\tif (!initializationDone) return <LoadingAnimation loading={initializationDone} />\n\n\t\treturn (\n\t\t\tcurrentShoppingList &&\n\t\t\t<>\n\t\t\t\t{currentShoppingList.lifecycleStatus === LIFECYCLE_STATUS_OPEN &&\n\t\t\t\t\t<IonList>\n\t\t\t\t\t\t<IonItem>\n\t\t\t\t\t\t\t<CreateItem\n\t\t\t\t\t\t\t\titem={this.state.itemInCreation}\n\t\t\t\t\t\t\t\tmode={ITEM_TYPE_SHOPPING}\n\t\t\t\t\t\t\t\tisFirstItem={!currentShoppingListItems.length}\n\t\t\t\t\t\t\t\tonChange={this.onCreatingItemChange.bind(this)}\n\t\t\t\t\t\t\t\tonEditingConcluded={this.onCreateComplete.bind(this)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</IonItem>\n\t\t\t\t\t</IonList>}\n\t\t\t\t<ShoppingList\n\t\t\t\t\tauthUser={sessionStore.authUser}\n\t\t\t\t\tlist={currentShoppingList}\n\t\t\t\t\titems={currentShoppingListItems}\n\t\t\t\t\tmode={mode}\n\t\t\t\t\tdependentNeedLists={currentDependentNeedsLists}\n\t\t\t\t\tbringAlongItems={currentDependentNeedsListsItems}\n\t\t\t\t\tonEditList={this.props.model.onEditShoppingList}\n\t\t\t\t\tonEditItem={this.props.model.onEditShoppingItem}\n\t\t\t\t\tonShopItem={this.props.model.onShopShoppingItem}\n\t\t\t\t\tonDeleteItem={this.props.model.onRemoveShoppingItem}\n\t\t\t\t\tonReorderItems={this.props.model.onReorderItems}\n\t\t\t\t\teditMode={this.props.editMode}\n\t\t\t\t\taddSaveEditHandler={this.props.addSaveEditHandler}\n\t\t\t\t/>\n\t\t\t</>\n\t\t)\n\t}\n}\n\nexport default compose(\n\twithRouter,\n\tinject('shoppingStore', 'sessionStore'),\n\tobserver,\n)(Shopping)\n","import React, { Component } from 'react'\nimport { withRouter } from 'react-router'\nimport { CopyToClipboard } from 'react-copy-to-clipboard'\nimport { withTranslation } from 'react-i18next'\n\nimport {\n\tIonToast,\n\tIonFabButton,\n\tIonIcon\n} from '@ionic/react'\nimport { shareSocialOutline } from 'ionicons/icons'\nimport { compose } from 'recompose'\nimport { inject } from 'mobx-react'\n\nclass ShareListFab extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis._hasUnmounted = false\n\t\tthis.state = {\n\t\t\tmessage: '',\n\t\t\tshowToast: false\n\t\t}\n\t}\n\n\tgenerateShareLink = () => {\n\t\tlet shoppingListId = this.props.shoppingStore.currentShoppingList.uid\n\t\treturn `${window.location.origin}/share/${shoppingListId}`\n\t};\n\n\tasync componentDidMount() {\n\t\tif (this._hasUnmounted) {\n\t\t\treturn\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis._hasUnmounted = true\n\t}\n\n\trender() {\n\t\tconst { t } = this.props\n\t\tconst sharingMessageTextTranslation = t('Sharing_message')\n\t\tconst sharingMessageText = sharingMessageTextTranslation !== 'Sharing_message'\n\t\t\t? sharingMessageTextTranslation + ' '\n\t\t\t: ''\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<CopyToClipboard text={sharingMessageText + this.generateShareLink()}>\n\t\t\t\t\t<IonFabButton title={t('Share')} color=\"primary\" onClick={() => {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tshowToast: true,\n\t\t\t\t\t\t\tmessage: t('Sharing_link_copied')\n\t\t\t\t\t\t})\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<IonIcon icon={shareSocialOutline} />\n\t\t\t\t\t</IonFabButton>\n\t\t\t\t</CopyToClipboard>\n\t\t\t\t<IonToast\n\t\t\t\t\tisOpen={this.state.showToast}\n\t\t\t\t\tonDidDismiss={() => this.setState(() => ({ showToast: false }))}\n\t\t\t\t\tmessage={this.state.message}\n\t\t\t\t\tduration={5000}\n\t\t\t\t/>\n\t\t\t</>\n\t\t)\n\t}\n}\n\nexport default compose(\n\twithTranslation(),\n\tinject('shoppingStore'),\n\twithRouter\n)(ShareListFab)","import React from 'react'\nimport { GO_SHOPPING } from '../../../constants/routes'\nimport { IonFabButton, IonIcon } from '@ionic/react'\nimport { useTranslation } from 'react-i18next'\nimport { cartOutline } from 'ionicons/icons'\nimport { withRouter } from 'react-router-dom'\n\nimport '../../Reusables/fabButtonTitle.scss'\n\nconst GoShoppingAction = () => {\n\tconst { t } = useTranslation()\n\treturn (\n\t\t<IonFabButton color=\"primary\" href={GO_SHOPPING} title={t('Go Shopping')}>\n\t\t\t<IonIcon icon={cartOutline} />\n\t\t</IonFabButton>\n\t)\n}\n\nexport default withRouter(GoShoppingAction)","import React from 'react'\nimport { IonFabButton, IonIcon } from '@ionic/react'\nimport { addOutline } from 'ionicons/icons'\n\nimport '../../Reusables/fabButtonTitle.scss'\n\nconst CreateListAction = ({ onClick, title }) => (\n\t<IonFabButton color=\"primary\" title={title} onClick={onClick}  data-test=\"fab-btn-create-list\">\n\t\t<IonIcon icon={addOutline} />\n\t</IonFabButton>\n)\n\nexport default CreateListAction","import React from 'react'\nimport { IonFabButton, IonFab, IonIcon, IonFabList } from '@ionic/react'\nimport { ellipsisVerticalOutline } from 'ionicons/icons'\n\nimport ShareFabButton from './ShareAction'\nimport GoShoppingAction from './GoShoppingAction'\n\nimport './shoppingActions.scss'\nimport { compose } from 'recompose'\nimport { inject } from 'mobx-react'\nimport { LIFECYCLE_STATUS_ARCHIVED } from '../../../constants/lists'\nimport CreateListAction from '../../List/ionic/CreateListAction'\nimport { useTranslation } from 'react-i18next'\n\nconst ShoppingActions = ({ model, shoppingStore, hasItems }) => {\n\tconst { t } = useTranslation()\n\tconst { initializationDone, currentShoppingList } = shoppingStore\n\n\tconst CreateShoppingListAction = () => <CreateListAction\n\t\ttitle={t('Create Shopping List')}\n\t\tonClick={() => model.onCreateShoppingList(`${t('Shopping list')}`)}\n\t/>\n\n\n\tif (!initializationDone) return null\n\tif (currentShoppingList && currentShoppingList.lifecycleStatus !== LIFECYCLE_STATUS_ARCHIVED && !hasItems) return null\n\n\treturn (\n\t\t<IonFab vertical=\"bottom\" horizontal=\"end\" className=\"shopping-actions\">\n\t\t\t{currentShoppingList && currentShoppingList.lifecycleStatus !== LIFECYCLE_STATUS_ARCHIVED\n\t\t\t\t? <>\n\t\t\t\t\t<IonFabButton>\n\t\t\t\t\t\t<IonIcon icon={ellipsisVerticalOutline} />\n\t\t\t\t\t</IonFabButton>\n\t\t\t\t\t<IonFabList side=\"top\">\n\t\t\t\t\t\t<ShareFabButton />\n\t\t\t\t\t\t<GoShoppingAction model={model} />\n\t\t\t\t\t\t<CreateShoppingListAction />\n\t\t\t\t\t</IonFabList>\n\t\t\t\t</>\n\t\t\t\t: <CreateShoppingListAction />\n\t\t\t}\n\t\t</IonFab>\n\t)\n}\n\nexport default compose(\n\tinject('shoppingStore')\n)(ShoppingActions)","import React from 'react'\n\nimport { IonButton, IonIcon } from '@ionic/react'\nimport { listOutline } from 'ionicons/icons'\n\nimport { Trans } from 'react-i18next'\n\nconst AllListsButton = ({ href, label }) => (\n\t<IonButton fill=\"clear\" data-test=\"btn-all-lists\"\n\t\thref={href}>\n\t\t<span className=\"hide-sm-down\"><Trans>{label}</Trans></span>\n\t\t<IonIcon slot=\"start\" icon={listOutline} />\n\t</IonButton>\n)\n\nexport default AllListsButton","import { useTranslation } from 'react-i18next'\n\nconst ListTitle = ({ list }) => {\n\n\tconst { t } = useTranslation()\n\tif (!list) return ''\n\n\treturn list.name || t('Shopping list')\n}\n\nexport default ListTitle","import React from 'react'\nimport { LIFECYCLE_STATUS_SHOPPING, LIFECYCLE_STATUS_FINISHED, LIFECYCLE_STATUS_ARCHIVED } from '../../../constants/lists'\nimport { IonIcon } from '@ionic/react'\nimport { cartOutline, receiptOutline, trashBinOutline } from 'ionicons/icons'\n\nconst ListLifecycleIcon = ({ list, slot = '', defaultIcon = null }) => {\n\tif (!list) return null\n\n\tswitch (list.lifecycleStatus) {\n\tcase LIFECYCLE_STATUS_SHOPPING:\n\t\treturn <IonIcon color=\"primary\" slot={slot} icon={cartOutline} />\n\tcase LIFECYCLE_STATUS_FINISHED:\n\t\treturn <IonIcon color=\"primary\" slot={slot} icon={receiptOutline} />\n\tcase LIFECYCLE_STATUS_ARCHIVED:\n\t\treturn <IonIcon color=\"danger\" slot={slot} icon={trashBinOutline} />\n\tdefault:\n\t\treturn defaultIcon && <IonIcon color=\"primary\" slot={slot} icon={defaultIcon}  data-test=\"icon-lifecycle\" />\n\t}\n}\n\nexport default ListLifecycleIcon","\nimport React from 'react'\nimport { IonIcon } from '@ionic/react'\nimport { lockOpenOutline, lockClosedOutline } from 'ionicons/icons'\n\nconst AllowCreateOwnNeedsIcon = ({ shoppingList, slot = '', size = '' }) => (\n\tshoppingList\n\t&& <IonIcon\n\t\tsize={size}\n\t\tslot={slot}\n\t\ticon={\n\t\t\tshoppingList.allowCreateOwnNeeds\n\t\t\t\t? lockOpenOutline\n\t\t\t\t: lockClosedOutline\n\t\t} />\n)\n\nexport default AllowCreateOwnNeedsIcon","import React from 'react'\n\nimport ShoppingModel from '../../../models/Shopping'\nimport Shopping from './Shopping'\nimport { compose } from 'recompose'\nimport { withFirebase } from '../../Firebase'\nimport { withEmailVerification } from '../../Session'\nimport { inject, observer } from 'mobx-react'\n\nimport { IonButton, IonIcon, IonPage, IonHeader, IonToolbar, IonButtons, IonTitle, IonContent, IonFooter } from '@ionic/react'\nimport { createOutline, saveOutline } from 'ionicons/icons'\n\nimport { Trans } from 'react-i18next'\nimport ShoppingActions from './ShoppingActions'\nimport { SHOPPING_LISTS } from '../../../constants/routes'\nimport AllListsButton from '../../List/ionic/AllListsButton'\nimport ListTitle from '../../List/ionic/ListTitle'\nimport ListLifecycleIcon from '../../List/ionic/ListLifecycleIcon'\nimport AllowCreateOwnNeedsIcon from '../../Reusables/ionic/AllowCreateOwnNeedsIcon'\n\nclass ShoppingPage extends ShoppingModel {\n\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = Object.assign(this.state, {\n\t\t\teditMode: false\n\t\t})\n\n\t\tthis.saveHandler = []\n\t}\n\n\tsaveEdit() {\n\t\tthis.saveHandler.forEach(handler => handler())\n\t\tthis.setState({ editMode: false })\n\t}\n\n\taddSaveEditHandler(handlerFn) {\n\t\tthis.saveHandler.push(handlerFn)\n\t}\n\n\trender() {\n\t\tconst { currentShoppingList, currentShoppingListItemsArray: currentShoppingListItems, initializationDone } = this.props.shoppingStore\n\n\t\tconst EditButton = () => (\n\t\t\t!this.state.editMode &&\n\t\t\t<IonButton\n\t\t\t\tcolor=\"danger\"\n\t\t\t\tfill=\"clear\"\n\t\t\t\tdata-test=\"btn-edit-list\"\n\t\t\t\tonClick={() => this.setState({ editMode: true })}>\n\t\t\t\t<span className=\"hide-sm-down\"><Trans>Edit</Trans></span>\n\t\t\t\t<IonIcon slot=\"end\" icon={createOutline} />\n\t\t\t</IonButton>\n\t\t)\n\n\t\tconst SaveButton = () => (\n\t\t\tthis.state.editMode &&\n\t\t\t<IonButton\n\t\t\t\tcolor=\"danger\"\n\t\t\t\tfill=\"clear\"\n\t\t\t\tdata-test=\"btn-save-list\"\n\t\t\t\tonClick={() => this.saveEdit()}>\n\t\t\t\t<span className=\"hide-sm-down\"><Trans >Save</Trans></span>\n\t\t\t\t<IonIcon slot=\"end\" icon={saveOutline} />\n\t\t\t</IonButton>\n\t\t)\n\n\t\treturn (\n\t\t\t<IonPage>\n\t\t\t\t<IonHeader>\n\t\t\t\t\t<IonToolbar>\n\t\t\t\t\t\t<IonTitle>\n\t\t\t\t\t\t\t<AllowCreateOwnNeedsIcon shoppingList={currentShoppingList} />\n\t\t\t\t\t\t\t<ListLifecycleIcon list={currentShoppingList} slot={''} />&nbsp;<ListTitle list={currentShoppingList} />\n\t\t\t\t\t\t</IonTitle>\n\t\t\t\t\t\t<IonButtons slot=\"primary\">\n\t\t\t\t\t\t\t<EditButton />\n\t\t\t\t\t\t\t<SaveButton />\n\t\t\t\t\t\t</IonButtons>\n\t\t\t\t\t\t<IonButtons slot=\"secondary\">\n\t\t\t\t\t\t\t<AllListsButton\n\t\t\t\t\t\t\t\tlabel=\"All Shopping Lists\"\n\t\t\t\t\t\t\t\thref={SHOPPING_LISTS}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</IonButtons>\n\t\t\t\t\t</IonToolbar>\n\t\t\t\t</IonHeader>\n\t\t\t\t<IonContent>\n\t\t\t\t\t<IonHeader collapse=\"condense\">\n\t\t\t\t\t\t<IonToolbar>\n\t\t\t\t\t\t\t<IonTitle size=\"large\">\n\t\t\t\t\t\t\t\t<AllowCreateOwnNeedsIcon shoppingList={currentShoppingList} />\n\t\t\t\t\t\t\t\t<ListLifecycleIcon list={currentShoppingList} slot={''} />&nbsp;<ListTitle list={currentShoppingList} />\n\t\t\t\t\t\t\t</IonTitle>\n\t\t\t\t\t\t</IonToolbar>\n\t\t\t\t\t</IonHeader>\n\t\t\t\t\t{this.props.sessionStore.dbAuthenticated &&\n\t\t\t\t\t\t<Shopping model={this}\n\t\t\t\t\t\t\teditMode={this.state.editMode}\n\t\t\t\t\t\t\taddSaveEditHandler={this.addSaveEditHandler.bind(this)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\n\t\t\t\t</IonContent>\n\t\t\t\t<IonFooter>\n\t\t\t\t\t{initializationDone &&\n\t\t\t\t\t\t<ShoppingActions\n\t\t\t\t\t\t\tmodel={this}\n\t\t\t\t\t\t\thasItems={currentShoppingListItems && currentShoppingListItems.length} /> //TODO: make model injectable\n\t\t\t\t\t}\n\t\t\t\t</IonFooter>\n\t\t\t</IonPage>\n\t\t)\n\t}\n}\n\n\nexport default compose(\n\twithFirebase,\n\twithEmailVerification,\n\tinject('shoppingStore', 'userStore', 'sessionStore'),\n\tobserver,\n)(ShoppingPage)\n","import React, { Component } from 'react'\nimport { inject, observer } from 'mobx-react'\nimport { compose } from 'recompose'\n\nimport LoadingAnimation from '../../Reusables/ionic/LoadingAnimation'\nimport { withRouter } from 'react-router'\nimport { ITEM_TYPE_IN_SHOPPING } from '../../../constants/items'\nimport ShoppingList from '../../Shopping/ionic/ShoppingList'\n\nclass GoShopping extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.statusTransitionTriggered = false\n\t}\n\n\tcomponentDidUpdate() {\n\t\tif (!this.statusTransitionTriggered && this.props.shoppingStore.currentShoppingList) {\n\t\t\tthis.props.model.onGoShopping(this.props.shoppingStore.currentShoppingList)\n\t\t\tthis.statusTransitionTriggered = true\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { shoppingStore, sessionStore } = this.props\n\t\tconst {\n\t\t\t// shoppingListsArray: shoppingLists,\n\t\t\tcurrentShoppingList,\n\t\t\tcurrentShoppingListItemsArray: currentShoppingListItems,\n\t\t\tcurrentDependentNeedsListsArray: currentDependentNeedsLists,\n\t\t\tcurrentDependentNeedsListsItemsArray: currentDependentNeedsListsItems,\n\t\t\tinitializationDone,\n\t\t} = shoppingStore\n\n\t\tif (!initializationDone) return <LoadingAnimation loading={initializationDone} />\n\n\t\treturn (\n\t\t\tcurrentShoppingList &&\n\t\t\t<>\n\t\t\t\t<ShoppingList\n\t\t\t\t\tauthUser={sessionStore.authUser}\n\t\t\t\t\tlist={currentShoppingList}\n\t\t\t\t\titems={currentShoppingListItems}\n\t\t\t\t\tmode={ITEM_TYPE_IN_SHOPPING}\n\t\t\t\t\tdependentNeedLists={currentDependentNeedsLists}\n\t\t\t\t\tbringAlongItems={currentDependentNeedsListsItems}\n\t\t\t\t\tonCreateItem={this.props.model.onCreateItemForCurrentShoppingList}\n\t\t\t\t\tonEditItem={this.props.model.onEditShoppingItem}\n\t\t\t\t\tonShopItem={this.props.model.onShopShoppingItem}\n\t\t\t\t\tonDeleteItem={this.props.model.onRemoveShoppingItem}\n\t\t\t\t\tonReorderItems={this.props.model.onReorderItems}\n\t\t\t\t/>\n\t\t\t</>\n\t\t)\n\t}\n}\n\nexport default compose(\n\twithRouter,\n\tinject('shoppingStore', 'sessionStore'),\n\tobserver,\n)(GoShopping)\n","import React from 'react'\nimport { FINISH_SHOPPING } from '../../../constants/routes'\nimport { IonFabButton, IonIcon } from '@ionic/react'\nimport { receiptOutline } from 'ionicons/icons'\nimport { withRouter } from 'react-router-dom'\n\nconst GoShoppingAction = () => {\n\treturn (\n\t\t<IonFabButton fill=\"clear\" href={FINISH_SHOPPING}>\n\t\t\t<IonIcon icon={receiptOutline} />\n\t\t</IonFabButton>\n\t)\n}\n\nexport default withRouter(GoShoppingAction)","import React from 'react'\n\nimport ShoppingModel from '../../../models/Shopping'\nimport GoShopping from './GoShopping'\nimport { compose } from 'recompose'\nimport { withFirebase } from '../../Firebase'\nimport { withEmailVerification } from '../../Session'\nimport { inject, observer } from 'mobx-react'\n\nimport { IonPage, IonHeader, IonToolbar, IonButtons, IonTitle, IonContent, IonFooter, IonFab } from '@ionic/react'\n\nimport { SHOPPING } from '../../../constants/routes'\nimport LabelledBackButton from '../../Reusables/ionic/LabelledBackButton'\nimport FinishShoppingAction from './FinishShoppingAction'\nimport ListLifecycleIcon from '../../List/ionic/ListLifecycleIcon'\nimport ListTitle from '../../List/ionic/ListTitle'\n\nclass ShoppingPage extends ShoppingModel {\n\n\trender() {\n\t\tconst { currentShoppingList } = this.props.shoppingStore\n\n\t\treturn (\n\t\t\t<IonPage>\n\t\t\t\t<IonHeader>\n\t\t\t\t\t<IonToolbar>\n\t\t\t\t\t\t<IonTitle>\n\t\t\t\t\t\t\t<ListLifecycleIcon list={currentShoppingList} />&nbsp;<ListTitle list={currentShoppingList} />\n\t\t\t\t\t\t</IonTitle>\n\t\t\t\t\t\t<IonButtons slot=\"primary\">\n\t\t\t\t\t\t</IonButtons>\n\t\t\t\t\t\t<IonButtons slot=\"secondary\">\n\t\t\t\t\t\t\t<LabelledBackButton defaultHref={SHOPPING} />\n\t\t\t\t\t\t</IonButtons>\n\t\t\t\t\t</IonToolbar>\n\t\t\t\t</IonHeader>\n\t\t\t\t<IonContent>\n\t\t\t\t\t<IonHeader collapse=\"condense\">\n\t\t\t\t\t\t<IonToolbar>\n\t\t\t\t\t\t\t<IonTitle size=\"large\">\n\t\t\t\t\t\t\t\t<ListLifecycleIcon list={currentShoppingList} />&nbsp;<ListTitle list={currentShoppingList} />\n\t\t\t\t\t\t\t</IonTitle>\n\t\t\t\t\t\t</IonToolbar>\n\t\t\t\t\t</IonHeader>\n\n\t\t\t\t\t{this.props.sessionStore.dbAuthenticated &&\n\t\t\t\t\t\t<GoShopping model={this} />\n\t\t\t\t\t}\n\n\t\t\t\t</IonContent>\n\t\t\t\t<IonFooter>\n\t\t\t\t\t{currentShoppingList &&\n\t\t\t\t\t\t<IonFab vertical=\"bottom\" horizontal=\"end\">\n\t\t\t\t\t\t\t<FinishShoppingAction />\n\t\t\t\t\t\t</IonFab>\n\t\t\t\t\t}\n\t\t\t\t</IonFooter>\n\t\t\t</IonPage>\n\t\t)\n\t}\n}\n\n\n// const condition = (authUser) => !!authUser;\n\nexport default compose(\n\twithFirebase,\n\twithEmailVerification,\n\tinject('shoppingStore', 'userStore', 'sessionStore'),\n\tobserver,\n)(ShoppingPage)\n","import React, { Component } from 'react'\nimport { IonList } from '@ionic/react'\nimport Item from '../../Item/ionic/Item'\nimport { LIFECYCLE_STATUS_OPEN } from '../../../constants/lists'\n\nclass NeedsList extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\teditMode: false,\n\t\t\teditText: '',\n\t\t}\n\t}\n\n\tonToggleEditMode = () => {\n\t\tthis.setState(state => ({\n\t\t\teditMode: !state.editMode,\n\t\t\teditText: this.props.list.name,\n\t\t}))\n\t};\n\n\tonChangeEditText = event => {\n\t\tthis.setState({ editText: event.target.value })\n\t};\n\n\tonSaveEditText = () => {\n\t\tthis.props.onEditNeedsList(this.props.list, this.state.editText)\n\n\t\tthis.setState({ editMode: false })\n\t};\n\n\trender() {\n\t\tconst {\n\t\t\tlist,\n\t\t\townList,\n\t\t\titems,\n\t\t\tmode,\n\t\t\tonCreateItem,\n\t\t\tonEditItem,\n\t\t\tonDeleteItem\n\t\t} = this.props\n\n\t\treturn (\n\t\t\t<IonList>\n\t\t\t\t{(items || []).map((item, key) => (\n\t\t\t\t\t<Item\n\t\t\t\t\t\tkey={item.id || key}\n\t\t\t\t\t\titem={item}\n\t\t\t\t\t\tonEditingConcluded={onEditItem}\n\t\t\t\t\t\tonDeleteItem={onDeleteItem}\n\t\t\t\t\t\tonCreateNeed={onCreateItem}\n\t\t\t\t\t\tmode={mode}\n\t\t\t\t\t\townList={ownList}\n\t\t\t\t\t\treadOnly={list && list.lifecycleStatus !== LIFECYCLE_STATUS_OPEN}\n\t\t\t\t\t/>))\n\t\t\t\t}\n\t\t\t</IonList>\n\t\t)\n\t}\n}\n\nexport default NeedsList\n","import React, { Component } from 'react'\nimport { inject, observer } from 'mobx-react'\nimport { compose } from 'recompose'\n\nimport LoadingAnimation from '../../Reusables/ionic/LoadingAnimation'\nimport { withRouter } from 'react-router'\nimport { ITEM_TYPE_NEED, ITEM_TYPE_SHOPPING } from '../../../constants/items'\nimport NeedsList from '../../Needs/ionic/NeedsList'\nimport Avatar from '../../Reusables/ionic/Avatar'\nimport { IonItem, IonList, IonListHeader, IonLabel } from '@ionic/react'\nimport { Trans } from 'react-i18next'\nimport ShoppingList from '../../Shopping/ionic/ShoppingList'\n\nclass FinishShopping extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.statusTransitionTriggered = false\n\t}\n\n\tcomponentDidUpdate() {\n\t\tif (!this.statusTransitionTriggered && this.props.shoppingStore.currentShoppingList) {\n\t\t\tthis.props.model.onFinishShopping(this.props.shoppingStore.currentShoppingList)\n\t\t\tthis.statusTransitionTriggered = true\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { shoppingStore } = this.props\n\t\tconst {\n\t\t\tcurrentShoppingList,\n\t\t\tcurrentShoppingListItemsArray: currentShoppingListItems,\n\t\t\tcurrentDependentNeedsListsArray: currentDependentNeedsLists,\n\t\t\tcurrentDependentNeedsListsItemsArray: currentDependentNeedsListsItems,\n\t\t\tinitializationDone,\n\t\t} = shoppingStore\n\n\t\tif (!initializationDone) return <LoadingAnimation loading={initializationDone} />\n\n\t\treturn (\n\t\t\tcurrentShoppingList &&\n\t\t\t<IonList>\n\t\t\t\t<IonListHeader lines=\"inset\">\n\t\t\t\t\t<IonLabel><h1><Trans>My own shopped items</Trans></h1></IonLabel>\n\t\t\t\t</IonListHeader>\n\t\t\t\t<ShoppingList\n\t\t\t\t\tkey={currentShoppingList.userId}\n\t\t\t\t\tlist={currentShoppingList}\n\t\t\t\t\titems={currentShoppingListItems.filter(item => !!item.shopped)}\n\t\t\t\t\townList={false}\n\t\t\t\t\tmode={ITEM_TYPE_SHOPPING}\n\t\t\t\t/>\n\t\t\t\t{currentDependentNeedsLists && currentDependentNeedsLists.map(dependentNeedsList => {\n\t\t\t\t\tconst broughtAlongItems = currentDependentNeedsListsItems\n\t\t\t\t\t\t.filter(item => !!item.shopped && (item.ownerId === dependentNeedsList.userId))\n\t\t\t\t\tif (!broughtAlongItems.length) return null\n\t\t\t\t\tconst owner = this.props.userStore.users[dependentNeedsList.userId]\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<IonItem key={dependentNeedsList.userId}>\n\t\t\t\t\t\t\t\t{owner &&\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<Avatar user={owner} size=\"50px\" slot=\"end\" />\n\t\t\t\t\t\t\t\t\t\t<IonLabel><h1><Trans>For</Trans>&nbsp;{owner.username}</h1></IonLabel>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</IonItem>\n\t\t\t\t\t\t\t<NeedsList\n\t\t\t\t\t\t\t\tlist={dependentNeedsList}\n\t\t\t\t\t\t\t\titems={broughtAlongItems}\n\t\t\t\t\t\t\t\townList={false}\n\t\t\t\t\t\t\t\tmode={ITEM_TYPE_NEED}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)\n\t\t\t\t})}\n\t\t\t</IonList>\n\t\t)\n\t}\n}\n\nexport default compose(\n\twithRouter,\n\tinject('shoppingStore', 'userStore'),\n\tobserver,\n)(FinishShopping)\n","import React from 'react'\n\nimport { compose } from 'recompose'\nimport { inject, observer } from 'mobx-react'\n\nimport ShoppingModel from '../../../models/Shopping'\n\nimport { IonHeader, IonToolbar, IonButtons, IonContent, IonIcon, IonFooter, IonFab, IonFabButton, IonPage, IonTitle } from '@ionic/react'\n\nimport { GO_SHOPPING, SHOPPING } from '../../../constants/routes'\nimport { withEmailVerification } from '../../Session'\nimport { withFirebase } from '../../Firebase'\nimport { checkmarkDoneOutline } from 'ionicons/icons'\nimport LabelledBackButton from '../../Reusables/ionic/LabelledBackButton'\nimport FinishShopping from './FinishShopping'\nimport { Trans } from 'react-i18next'\nimport { withRouter } from 'react-router'\n\nconst DoneButton = ({ currentShoppingList, onArchiveShoppingList, history }) =>\n\tcurrentShoppingList\n\t\t? (\n\t\t\t<IonFabButton onClick={() => {\n\t\t\t\tonArchiveShoppingList(currentShoppingList)\n\t\t\t\thistory.push(SHOPPING)\n\t\t\t}}>\n\t\t\t\t<IonIcon icon={checkmarkDoneOutline} />\n\t\t\t</IonFabButton>\n\t\t)\n\t\t: null\n\nclass FinishShoppingPage extends ShoppingModel {\n\trender() {\n\t\treturn (\n\t\t\t<IonPage>\n\t\t\t\t<IonHeader>\n\t\t\t\t\t<IonToolbar>\n\t\t\t\t\t\t<IonButtons slot=\"start\">\n\t\t\t\t\t\t\t<LabelledBackButton defaultHref={GO_SHOPPING} />\n\t\t\t\t\t\t</IonButtons>\n\t\t\t\t\t\t<IonTitle>\n\t\t\t\t\t\t\t<Trans>Finish shopping</Trans>\n\t\t\t\t\t\t</IonTitle>\n\t\t\t\t\t</IonToolbar>\n\t\t\t\t</IonHeader>\n\t\t\t\t<IonContent>\n\n\t\t\t\t\t{this.props.sessionStore.dbAuthenticated\n            && <FinishShopping model={this} />}\n\n\t\t\t\t</IonContent>\n\t\t\t\t<IonFooter>\n\t\t\t\t\t<IonFab vertical=\"bottom\" horizontal=\"end\">\n\t\t\t\t\t\t<DoneButton\n\t\t\t\t\t\t\tcurrentShoppingList={this.props.shoppingStore.currentShoppingList}\n\t\t\t\t\t\t\tonArchiveShoppingList={this.onArchiveShoppingList}\n\t\t\t\t\t\t\thistory={this.props.history}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</IonFab>\n\t\t\t\t</IonFooter>\n\t\t\t</IonPage>)\n\t}\n}\n\nexport default compose(\n\twithFirebase,\n\twithEmailVerification,\n\twithRouter,\n\tinject('shoppingStore', 'userStore', 'sessionStore'),\n\tobserver,\n)(FinishShoppingPage)\n\n","import React from 'react'\nimport { IonItem, IonLabel, IonIcon, IonList, IonButton } from '@ionic/react'\nimport { trashBinOutline, documentTextOutline } from 'ionicons/icons'\nimport { withRouter } from 'react-router'\nimport ListTitle from './ListTitle'\nimport ListLifecycleIcon from './ListLifecycleIcon'\nimport { LIFECYCLE_STATUS_ARCHIVED } from '../../../constants/lists'\nimport { Trans } from 'react-i18next'\n\nconst Lists = (props) => {\n\treturn (\n\t\t<IonList>\n\t\t\t{\n\t\t\t\tprops.lists && props.lists\n\t\t\t\t\t.filter(l => props.includeArchived ? true : l.lifecycleStatus !== LIFECYCLE_STATUS_ARCHIVED)\n\t\t\t\t\t.map(list => (\n\t\t\t\t\t\t<IonItem\n\t\t\t\t\t\t\tkey={list.uid}\n\t\t\t\t\t\t\tdata-test=\"list\"\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tprops.onSetCurrentList(list)\n\t\t\t\t\t\t\t\tprops.history.push(props.hrefOnClick)\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t<IonLabel>\n\t\t\t\t\t\t\t\t<ListTitle list={list} /><br />\n\t\t\t\t\t\t\t\t{list && list.createdAt && <span style={{ fontSize: '0.7em' }}><Trans>Created on</Trans>&nbsp;{new Date(list.createdAt.seconds * 1000).toLocaleDateString()}</span>}\n\t\t\t\t\t\t\t</IonLabel>\n\t\t\t\t\t\t\t<ListLifecycleIcon list={list} slot=\"start\" defaultIcon={documentTextOutline} />\n\t\t\t\t\t\t\t{list.lifecycleStatus !== LIFECYCLE_STATUS_ARCHIVED &&\n\t\t\t\t\t\t\t\t<IonButton\n\t\t\t\t\t\t\t\t\tslot=\"end\"\n\t\t\t\t\t\t\t\t\tcolor=\"danger\"\n\t\t\t\t\t\t\t\t\tdata-test=\"btn-delete-list\"\n\t\t\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\t\t\tfill=\"clear\"\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tprops.onRemoveList(list)\n\t\t\t\t\t\t\t\t\t}} >\n\t\t\t\t\t\t\t\t\t<IonIcon icon={trashBinOutline} />\n\t\t\t\t\t\t\t\t</IonButton>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</IonItem>\n\t\t\t\t\t))\n\t\t\t}\n\t\t</IonList>\n\t)\n}\n\nexport default withRouter(Lists)","import React from 'react'\n\nimport { compose } from 'recompose'\nimport { inject, observer } from 'mobx-react'\n\nimport ShoppingModel from '../../../models/Shopping'\n\nimport { IonHeader, IonToolbar, IonButtons, IonContent, IonIcon, IonFooter, IonFab, IonFabButton, IonPage, IonToggle, IonLabel, IonItem } from '@ionic/react'\n\nimport { SHOPPING } from '../../../constants/routes'\nimport Lists from '../../List/ionic/Lists'\nimport { withEmailVerification } from '../../Session'\nimport { withFirebase } from '../../Firebase'\nimport { addOutline } from 'ionicons/icons'\nimport LabelledBackButton from '../../Reusables/ionic/LabelledBackButton'\nimport { Trans } from 'react-i18next'\nimport { withRouter } from 'react-router'\n\nconst CreateShoppingListButton = ({ onCreateShoppingList, history }) => (\n\t<IonFabButton onClick={() => {\n\t\tonCreateShoppingList()\n\t\thistory.push(SHOPPING)\n\t}}>\n\t\t<IonIcon icon={addOutline} />\n\t</IonFabButton>\n)\n\nclass ShoppingListsPage extends ShoppingModel {\n\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = { ...this.state, includeArchived: false }\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<IonPage>\n\t\t\t\t<IonHeader>\n\t\t\t\t\t<IonToolbar>\n\t\t\t\t\t\t<IonButtons slot=\"start\">\n\t\t\t\t\t\t\t<LabelledBackButton defaultHref={SHOPPING} />\n\t\t\t\t\t\t</IonButtons>\n\t\t\t\t\t\t<IonItem lines=\"none\" slot=\"end\">\n\t\t\t\t\t\t\t<IonLabel><Trans>Include archived</Trans></IonLabel>\n\t\t\t\t\t\t\t<IonToggle checked={this.state.includeArchived} onIonChange={e => this.setState({ includeArchived: e.detail.checked })} />\n\t\t\t\t\t\t</IonItem>\n\t\t\t\t\t</IonToolbar>\n\t\t\t\t</IonHeader>\n\t\t\t\t<IonContent>\n\n\t\t\t\t\t{this.props.sessionStore.dbAuthenticated\n\t\t\t\t\t\t&& <Lists\n\t\t\t\t\t\t\tlists={this.props.shoppingStore.shoppingListsArray}\n\t\t\t\t\t\t\tonSetCurrentList={(list) => this.onSetCurrentShoppingList(list.uid)}\n\t\t\t\t\t\t\tonRemoveList={(list) => this.onArchiveShoppingList(list, false)}\n\t\t\t\t\t\t\tincludeArchived={this.state.includeArchived}\n\t\t\t\t\t\t\threfOnClick={SHOPPING}\n\t\t\t\t\t\t/>}\n\n\t\t\t\t</IonContent>\n\t\t\t\t<IonFooter>\n\t\t\t\t\t<IonFab vertical=\"bottom\" horizontal=\"end\">\n\t\t\t\t\t\t<CreateShoppingListButton\n\t\t\t\t\t\t\tonCreateShoppingList={this.onCreateShoppingList}\n\t\t\t\t\t\t\thistory={this.props.history}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</IonFab>\n\t\t\t\t</IonFooter>\n\t\t\t</IonPage>)\n\t}\n}\n\nexport default compose(\n\twithFirebase,\n\twithEmailVerification,\n\twithRouter,\n\tinject('shoppingStore', 'userStore', 'sessionStore'),\n\tobserver,\n)(ShoppingListsPage)\n\n","/* eslint-disable no-console */\nimport { Component } from 'react'\n\n/**\n * This component represent the complete state of the needs section of the app.\n * As such, it manages as *all the state*, all subordinate components have to be stateless!\n * This includes both, ephemeral state as well as application state:\n * - Application state is managed in th Stores.\n *   This component reads and writes to the store, based upon the handlers it sets-up\n *   It passes the application state (not the Stores themselves!) down to subordinate components\n * - Ephemeral state is managed in the `state` property of the component.\n *   Since all subordinate components are stateless with respect to applications state,\n *   subordinate components are being passed functions to manipulate it.\n *   This might get messy as the application grows and might be refactored, but it's not that simple to do.\n * \n * This component shall not have a representation. However, it can serve as base-class \n * for visualizing components.\n */\nclass Needs extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tlistsLoading: false,\n\t\t\titemsLoading: false,\n\t\t}\n\t}\n\n\t_tryInitialization() {\n\t\tif (this.props.sessionStore.dbAuthenticated && !this.unsubscribeLists) {\n\t\t\tthis.onListenForNeedsLists()\n\t\t}\n\t}\n\n\t// React lifecycle methods\n\n\tcomponentDidMount() {\n\t\tif (!this.props.needsStore.needsListsArray.length) {\n\t\t\tthis.setState({\n\t\t\t\tlistsLoading: true,\n\t\t\t\titemsLoading: true\n\t\t\t})\n\t\t}\n\t\tthis._tryInitialization()\n\t}\n\n\tcomponentDidUpdate() {\n\t\tthis._tryInitialization()\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.unregisterAllListeners()\n\t}\n\n\tunregisterAllListeners() {\n\t\tif (this.unsubscribeLists) this.unsubscribeLists()\n\t\tif (this.unsubscribeItems) this.unsubscribeItems()\n\t\tif (this.unsubscribeOriginShoppingList) this.unsubscribeOriginShoppingList()\n\t\tif (this.unsubscribeOriginShoppingListItems) this.unsubscribeOriginShoppingListItems()\n\t}\n\n\t// listeners to the database\n\tonListenForNeedsLists = () => {\n\t\tthis.unsubscribeLists = this.props.firebase\n\t\t\t.myNeedsLists()\n\t\t\t.orderBy('createdAt', 'desc')\n\t\t\t// .limit(this.state.limit)\n\t\t\t.onSnapshot(snapshot => {\n\t\t\t\tlet currentNeedsListId = null\n\t\t\t\tlet currentOriginShoppingListId = null\n\n\t\t\t\tthis.props.needsStore.setInitializationDone(true)\n\n\t\t\t\tif (snapshot.size) {\n\t\t\t\t\tlet needsLists = []\n\t\t\t\t\tsnapshot.forEach(doc => {\n\t\t\t\t\t\tconst needsList = doc.data()\n\t\t\t\t\t\tneedsLists.push({ ...needsList, uid: doc.id })\n\t\t\t\t\t\tif (needsList.isCurrent && needsList.shoppingListId) {\n\t\t\t\t\t\t\tcurrentNeedsListId = doc.id\n\t\t\t\t\t\t\tcurrentOriginShoppingListId = needsList.shoppingListId\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// The owner of the shopping list for which the needs list \n\t\t\t\t\t\t// has been created is a relevant user. \n\t\t\t\t\t\t// Make sure we've got his information buffered\n\t\t\t\t\t\t// we don't need reactivity for that in the first step to keep it simple\n\t\t\t\t\t\tconst { shoppingListOwnerId } = needsList\n\t\t\t\t\t\tif (shoppingListOwnerId && !this.props.userStore.users[shoppingListOwnerId]) {\n\t\t\t\t\t\t\tthis.props.firebase.user(shoppingListOwnerId).get()\n\t\t\t\t\t\t\t\t.then(snapshot => {\n\t\t\t\t\t\t\t\t\tconst owner = snapshot.data()\n\t\t\t\t\t\t\t\t\tthis.props.userStore.setUser(snapshot.id, owner)\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t)\n\n\t\t\t\t\tthis.props.needsStore.setNeedsLists(needsLists)\n\n\t\t\t\t\tthis.setState(Object.assign(this.state, { listsLoading: false }))\n\t\t\t\t} else {\n\t\t\t\t\tthis.props.needsStore.setNeedsLists([])\n\n\t\t\t\t\tthis.setState({ listsLoading: false, itemsLoading: false })\n\t\t\t\t}\n\n\t\t\t\t// react on item updates - this should actually be done implicitly, but it seems it isn't\n\t\t\t\tif (this.unsubscribeItems) this.unsubscribeItems()\n\t\t\t\tif (currentNeedsListId) this.onListenForCurrentNeedsListItems(currentNeedsListId)\n\n\t\t\t\t//* react on changes of the origin shopping list\n\t\t\t\t//  remove obsolete listeners first (if exist)\n\t\t\t\tif (this.unsubscribeOriginShoppingList) this.unsubscribeOriginShoppingList()\n\t\t\t\tif (this.unsubscribeOriginShoppingListItems) this.unsubscribeOriginShoppingListItems()\n\n\t\t\t\t// register for changes in the origin shopping list\n\t\t\t\tif (currentOriginShoppingListId) {\n\t\t\t\t\tthis.unsubscribeOriginShoppingList = this.onListenForOriginShoppingList(currentOriginShoppingListId)\n\t\t\t\t} else {\n\t\t\t\t\tthis.clearOriginShoppingListInStore()\n\t\t\t\t}\n\n\t\t\t})\n\t}\n\n\tonListenForCurrentNeedsListItems = uid => {\n\t\tthis.unsubscribeItems = this.props.firebase\n\t\t\t.listItems(uid)\n\t\t\t.onSnapshot(snapshot => {\n\t\t\t\tif (snapshot.size) {\n\t\t\t\t\tlet neededItems = []\n\t\t\t\t\tsnapshot.forEach(doc =>\n\t\t\t\t\t\tneededItems.push({ ...doc.data(), uid: doc.id, parentId: doc.ref.parent.parent.id }),\n\t\t\t\t\t)\n\n\t\t\t\t\tthis.props.needsStore.setCurrentNeedsListItems(neededItems)\n\n\t\t\t\t\tthis.setState(Object.assign(this.state, { itemsLoading: false }))\n\t\t\t\t} else {\n\t\t\t\t\tthis.props.needsStore.setCurrentNeedsListItems([])\n\n\t\t\t\t\tthis.setState({ itemsLoading: false })\n\t\t\t\t}\n\t\t\t})\n\t};\n\n\tonListenForOriginShoppingList = (uid) => {\n\t\tthis.unsubscribeOriginShoppingList = this.props.firebase\n\t\t\t.list(uid)\n\t\t\t.onSnapshot(snapshot => {\n\t\t\t\tif (snapshot.exists) {\n\t\t\t\t\tconst shoppingList = snapshot.data()\n\t\t\t\t\tthis.props.needsStore.setCurrentOriginShoppingList(shoppingList)\n\n\t\t\t\t\tif (this.unsubscribeOriginShoppingListItems) this.unsubscribeOriginShoppingListItems()\n\t\t\t\t\tthis.onListenForOriginShoppingListItems(uid)\n\n\t\t\t\t} else {\n\t\t\t\t\tthis.clearOriginShoppingListInStore()\n\t\t\t\t}\n\t\t\t})\n\t}\n\n\tonListenForOriginShoppingListItems = (originListId) => {\n\t\tthis.unsubscribeOriginShoppingListItems = this.props.firebase\n\t\t\t.listItems(originListId)\n\t\t\t// .orderBy('createdAt', 'desc')\n\t\t\t// .limit(this.state.limit)\n\t\t\t.onSnapshot(snapshot => {\n\t\t\t\tif (snapshot.size) {\n\t\t\t\t\tlet OriginShoppingListItems = []\n\t\t\t\t\tsnapshot.forEach(doc =>\n\t\t\t\t\t\tOriginShoppingListItems.push({ ...doc.data(), uid: doc.id }),\n\t\t\t\t\t)\n\n\t\t\t\t\tthis.props.needsStore.setCurrentOriginShoppingListItems(OriginShoppingListItems)\n\n\t\t\t\t} else {\n\t\t\t\t\tthis.props.needsStore.setCurrentOriginShoppingListItems([])\n\t\t\t\t}\n\t\t\t})\n\t};\n\n\tclearOriginShoppingListInStore() {\n\t\tthis.props.needsStore.setCurrentOriginShoppingList(null)\n\t\tthis.props.needsStore.setCurrentOriginShoppingListItems([])\n\t}\n\n\t// event handlers for lists\n\tonChangeText = event => {\n\t\tthis.setState({ editingListName: event.target.value })\n\t};\n\n\tonCreateNeedsList = (event) => {\n\t\tevent.preventDefault()\n\n\t\tthis.props.firebase.createNeedsList({\n\t\t\tname: this.state.editingListName,\n\t\t})\n\n\t\tthis.setState({ editingListName: '' })\n\t};\n\n\tonEditNeedsList = (needsList, editingListName) => {\n\t\t// eslint-disable-next-line no-unused-vars\n\t\tconst { uid, ...needsListSnapshot } = needsList\n\n\t\tthis.props.firebase.editList(needsList.uid, {\n\t\t\t...needsListSnapshot,\n\t\t\tname: editingListName,\n\t\t})\n\t};\n\n\tonArchiveNeedsList = list => {\n\t\tthis.props.firebase.archiveNeedsList(list)\n\t};\n\n\tonRemoveNeedsList = uid => {\n\t\tthis.props.firebase.deleteList(uid)\n\t};\n\n\tonSetCurrentNeedsList = uid => {\n\t\tthis.props.firebase.setCurrentNeedsList(uid)\n\t}\n\n\t// event handlers for items\n\tonCreateItemForCurrentNeedsList = (potentiallyNeededItem, { name, quantity = '', unit = '' }) => {\n\t\tconst { currentNeedsList } = this.props.needsStore\n\t\tif (currentNeedsList) {\n\t\t\tthis.props.firebase.addNeededItemFromShoppingListItem(currentNeedsList.uid, potentiallyNeededItem, { name, quantity, unit })\n\t\t} else {\n\t\t\tconsole.error('Cannot create item for non-existing needsList')\n\t\t}\n\t};\n\n\tonEditNeededItem = (item) => {\n\t\tconst { currentNeedsList } = this.props.needsStore\n\t\tif (currentNeedsList) {\n\t\t\tthis.props.firebase.editItem(currentNeedsList.uid, item)\n\t\t} else {\n\t\t\tconsole.error('Cannot edit item in non-existing needsList')\n\t\t}\n\t};\n\n\tonRemoveNeededItem = (uid) => {\n\t\tconst { currentNeedsList } = this.props.needsStore\n\t\tif (currentNeedsList) {\n\t\t\tthis.props.firebase\n\t\t\t\t.listItem(currentNeedsList.uid, uid)\n\t\t\t\t.delete()\n\t\t} else {\n\t\t\tconsole.error('Cannot remove item from non-existing needsList')\n\t\t}\n\t};\n\n\tonAddFromShoppingListItem = (item) => {\n\t\tconst { currentNeedsList } = this.props.needsStore\n\t\tif (currentNeedsList) {\n\t\t\tthis.props.firebase.addNeededItemFromShoppingListItem(currentNeedsList.uid, Object.assign(item, { quantity: 0 }))\n\t\t} else {\n\t\t\tconsole.error('Cannot add item to non-existing needsList')\n\t\t}\n\t}\n}\n\nexport default Needs","import React, { Component } from 'react'\nimport { inject, observer } from 'mobx-react'\nimport { compose } from 'recompose'\nimport NeedsList from './NeedsList'\nimport { ITEM_TYPE_NEED, ITEM_TYPE_POTENTIAL_NEED } from '../../../constants/items'\nimport SplashLogo from '../../Reusables/ionic/SplashLogo'\nimport { IonGrid, IonCol, IonRow, IonItem, IonList, IonText } from '@ionic/react'\nimport LoadingAnimation from '../../Reusables/ionic/LoadingAnimation'\nimport { LIFECYCLE_STATUS_OPEN, LIFECYCLE_STATUS_SHOPPING, LIFECYCLE_STATUS_FINISHED, LIFECYCLE_STATUS_ARCHIVED } from '../../../constants/lists'\nimport CreateItem from '../../Item/ionic/CreateItem'\nimport { Trans } from 'react-i18next'\n\nconst INITIAL_ITEM = {\n\tname: '',\n\tquantity: '',\n\tunit: ''\n}\nclass Needs extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\teditingListName: '',\n\t\t\titemInCreation: { ...INITIAL_ITEM },\n\t\t}\n\t}\n\n\tonCreatingItemChange(event) {\n\t\tthis.setState({\n\t\t\titemInCreation:\n\t\t\t\tObject.assign(this.state.itemInCreation, { [event.target.name]: event.target.value })\n\t\t})\n\t}\n\n\tonCreateComplete(newItem) {\n\t\tif (!newItem.name || !newItem.quantity) {\n\t\t\treturn\n\t\t}\n\t\tthis.props.model.onCreateItemForCurrentNeedsList(this.state.itemInCreation, newItem)\n\t\tthis.setState({ itemInCreation: { ...INITIAL_ITEM } })\n\t}\n\n\tcopyPotentialNeed(potentialNeed) {\n\t\t// this.setState({\n\t\t//   itemInCreation: { ...potentialNeed, quantity: '' }\n\t\t// })\n\t\tconst quantity = potentialNeed.unit && potentialNeed.quantity >= 100\n\t\t\t? 100\n\t\t\t: 1\n\t\tthis.props.model.onCreateItemForCurrentNeedsList(potentialNeed, Object.assign(potentialNeed, { quantity }))\n\t}\n\n\trender() {\n\t\tconst { needsStore, sessionStore } = this.props\n\t\tconst {\n\t\t\tcurrentNeedsList,\n\t\t\tpotentiallyNeededItemsArray: potentiallyNeededItems,\n\t\t\tcurrentNeedsListItemsArray: currentNeedsListItems,\n\t\t\tcurrentOriginShoppingList,\n\t\t\tinitializationDone,\n\t\t} = needsStore\n\n\t\tconst { itemInCreation } = this.state\n\n\t\tconst itemHasBeenCopied = (itemInCreation && itemInCreation.name)\n\n\t\tconst createNeedsVisible =\n\t\t\tcurrentNeedsList && currentNeedsList.lifecycleStatus === LIFECYCLE_STATUS_OPEN\n\t\t\t&& (itemHasBeenCopied\n\t\t\t\t|| (currentOriginShoppingList && currentOriginShoppingList.allowCreateOwnNeeds)) // user is allowed to define own needs\n\t\t\t&&\n\t\t\t<IonList>\n\t\t\t\t<IonItem key=\"createItem\">\n\t\t\t\t\t<CreateItem\n\t\t\t\t\t\titem={itemInCreation}\n\t\t\t\t\t\tonChange={this.onCreatingItemChange.bind(this)}\n\t\t\t\t\t\tonEditingConcluded={this.onCreateComplete.bind(this)}\n\t\t\t\t\t\thighlight={itemHasBeenCopied}\n\t\t\t\t\t\tmode={ITEM_TYPE_NEED}\n\t\t\t\t\t/>\n\t\t\t\t</IonItem>\n\t\t\t</IonList>\n\n\t\tconst createNeedsNotAllowed = currentOriginShoppingList\n\t\t\t&& !currentOriginShoppingList.allowCreateOwnNeeds\n\t\t\t&& currentOriginShoppingList.lifecycleStatus === LIFECYCLE_STATUS_OPEN\n\t\t\t&&\n\t\t\t<IonItem color=\"warning\" className=\"permanent-message\">\n\t\t\t\t<IonText>\n\t\t\t\t\t<Trans>Creating_own_items_disabled</Trans>\n\t\t\t\t</IonText>\n\t\t\t</IonItem>\n\n\t\tconst NothingSharedYet = () => (\n\t\t\t<IonGrid>\n\t\t\t\t<IonRow>\n\t\t\t\t\t<IonCol>\n\t\t\t\t\t\t<IonItem>\n\t\t\t\t\t\t\t<SplashLogo\n\t\t\t\t\t\t\t\tmaxWidth=\"150px\"\n\t\t\t\t\t\t\t\ttextStart=\"Nothing\"\n\t\t\t\t\t\t\t\ttextEnd=\"SharedYet\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</IonItem>\n\t\t\t\t\t</IonCol>\n\t\t\t\t</IonRow>\n\n\t\t\t</IonGrid>\n\t\t)\n\n\t\tconst StatusMessage = ({ lifecycleStatus }) => {\n\n\t\t\tif (lifecycleStatus === LIFECYCLE_STATUS_OPEN) return null\n\t\t\tconst messageMapping = {}\n\t\t\tmessageMapping[LIFECYCLE_STATUS_SHOPPING] = <Trans>Edit_not_possible_shopping</Trans>\n\t\t\tmessageMapping[LIFECYCLE_STATUS_FINISHED] = <Trans>Edit_not_possible_finished</Trans>\n\t\t\tmessageMapping[LIFECYCLE_STATUS_ARCHIVED] = <Trans>Edit_not_possible_archived</Trans>\n\n\t\t\treturn <IonItem color=\"warning\" className=\"permanent-message\">\n\t\t\t\t{messageMapping[lifecycleStatus]}\n\t\t\t</IonItem>\n\t\t}\n\n\t\tif (!initializationDone) return <LoadingAnimation loading={initializationDone} />\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{currentOriginShoppingList && <StatusMessage lifecycleStatus={currentOriginShoppingList.lifecycleStatus} />}\n\t\t\t\t{createNeedsVisible}\n\t\t\t\t{/* Needs */}\n\t\t\t\t{currentNeedsList &&\n\t\t\t\t\t<NeedsList\n\t\t\t\t\t\tauthUser={sessionStore.authUser}\n\t\t\t\t\t\tlist={currentOriginShoppingList}\n\t\t\t\t\t\titems={currentNeedsListItems}\n\t\t\t\t\t\tonCreateItem={this.props.model.onCreateItemForCurrentNeedsList}\n\t\t\t\t\t\tonEditItem={this.props.model.onEditNeededItem}\n\t\t\t\t\t\tonDeleteItem={this.props.model.onRemoveNeededItem}\n\t\t\t\t\t\townList={true}\n\t\t\t\t\t\tmode={ITEM_TYPE_NEED}\n\t\t\t\t\t/>\n\t\t\t\t}\n\n\t\t\t\t{!currentNeedsList &&\n\t\t\t\t\t<NothingSharedYet />\n\t\t\t\t}\n\n\t\t\t\t{/* Potentially needed */}\n\t\t\t\t{currentOriginShoppingList &&\n\t\t\t\t\t<NeedsList\n\t\t\t\t\t\tauthUser={sessionStore.authUser}\n\t\t\t\t\t\tlist={currentOriginShoppingList}\n\t\t\t\t\t\titems={potentiallyNeededItems}\n\t\t\t\t\t\tonCreateItem={(template) => this.copyPotentialNeed(template)}\n\t\t\t\t\t\tonEditItem={this.props.model.onEditNeededItem}\n\t\t\t\t\t\tonDeleteItem={this.props.model.onRemoveNeededItem}\n\t\t\t\t\t\townList={false}\n\t\t\t\t\t\tmode={ITEM_TYPE_POTENTIAL_NEED}\n\t\t\t\t\t/>\n\t\t\t\t}\n\n\t\t\t\t{createNeedsNotAllowed}\n\n\t\t\t</>\n\t\t)\n\t}\n}\n\nexport default compose(\n\tinject('needsStore', 'sessionStore'),\n\tobserver,\n)(Needs)\n","import React from 'react'\nimport { IonContent, IonHeader, IonPage, IonTitle, IonToolbar, IonButtons } from '@ionic/react'\nimport NeedsModel from '../../../models/Needs'\nimport Needs from './Needs'\nimport './page.css'\nimport { withFirebase } from '../../Firebase'\nimport { compose } from 'recompose'\nimport { inject, observer } from 'mobx-react'\n// import Avatar from '../../Reusables/ionic/Avatar';\n\nimport { withTranslation } from 'react-i18next'\nimport { withEmailVerification } from '../../Session'\nimport AllListsButton from '../../List/ionic/AllListsButton'\nimport { NEEDS_LISTS } from '../../../constants/routes'\nimport ListTitle from '../../List/ionic/ListTitle'\nimport ListLifecycleIcon from '../../List/ionic/ListLifecycleIcon'\n\nclass NeedsPage extends NeedsModel {\n\trender() {\n\t\tconst { currentNeedsList } = this.props.needsStore\n\n\t\tconst ListHeader = ({\n\t\t\tuserStore,\n\t\t\tsize\n\t\t}) => {\n\t\t\tif (currentNeedsList\n        && userStore.users) {\n\t\t\t\tconst owner = userStore.users[currentNeedsList.shoppingListOwnerId]\n\t\t\t\tif (owner) return (\n\t\t\t\t\t<IonTitle size={size}>\n\n\t\t\t\t\t\t{/* // TODO: Display the Avatar of the owner */}\n\t\t\t\t\t\t{/* <Avatar\n              size=\"35px\"\n              user={owner}\n            /> */}\n\t\t\t\t\t\t<ListLifecycleIcon list={currentNeedsList} />&nbsp;<ListTitle list={currentNeedsList} />\n\t\t\t\t\t</IonTitle>\n\t\t\t\t)\n\t\t\t}\n\t\t\treturn null\n\t\t}\n\n\t\treturn (\n\t\t\t<IonPage>\n\t\t\t\t<IonHeader>\n\t\t\t\t\t<IonToolbar>\n\t\t\t\t\t\t<ListHeader\n\t\t\t\t\t\t\tneedsStore={this.props.needsStore}\n\t\t\t\t\t\t\tuserStore={this.props.userStore}\n\t\t\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<IonButtons slot=\"secondary\">\n\t\t\t\t\t\t\t<AllListsButton\n\t\t\t\t\t\t\t\tlabel=\"All Needs Lists\"\n\t\t\t\t\t\t\t\thref={NEEDS_LISTS}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</IonButtons>\n\t\t\t\t\t</IonToolbar>\n\t\t\t\t</IonHeader>\n\t\t\t\t<IonContent>\n\t\t\t\t\t<IonHeader collapse=\"condense\">\n\t\t\t\t\t\t<IonToolbar>\n\t\t\t\t\t\t\t<ListHeader\n\t\t\t\t\t\t\t\tneedsStore={this.props.needsStore}\n\t\t\t\t\t\t\t\tuserStore={this.props.userStore}\n\t\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</IonToolbar>\n\t\t\t\t\t</IonHeader>\n\n\t\t\t\t\t{this.props.sessionStore.dbAuthenticated &&\n            <Needs model={this} />\n\t\t\t\t\t}\n\n\t\t\t\t</IonContent>\n\t\t\t</IonPage>\n\t\t)\n\t}\n}\n\nexport default compose(\n\twithFirebase,\n\twithEmailVerification,\n\twithTranslation(),\n\tinject('needsStore', 'userStore', 'sessionStore'),\n\tobserver,\n)(NeedsPage)","import React from 'react'\n\nimport { compose } from 'recompose'\nimport { inject, observer } from 'mobx-react'\n\nimport NeedsModel from '../../../models/Needs'\n\nimport { IonHeader, IonToolbar, IonButtons, IonContent, IonFooter, IonPage, IonItem, IonLabel, IonToggle } from '@ionic/react'\n\nimport { NEEDS } from '../../../constants/routes'\nimport Lists from '../../List/ionic/Lists'\nimport { withEmailVerification } from '../../Session'\nimport { withFirebase } from '../../Firebase'\nimport LabelledBackButton from '../../Reusables/ionic/LabelledBackButton'\nimport { Trans } from 'react-i18next'\n\nclass NeedsListsPage extends NeedsModel {\n\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = { ...this.state, includeArchived: false }\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<IonPage>\n\t\t\t\t<IonHeader>\n\t\t\t\t\t<IonToolbar>\n\t\t\t\t\t\t<IonButtons slot=\"start\">\n\t\t\t\t\t\t\t<LabelledBackButton defaultHref={NEEDS} />\n\t\t\t\t\t\t</IonButtons>\n\t\t\t\t\t\t<IonItem lines=\"none\" slot=\"end\">\n\t\t\t\t\t\t\t<IonLabel><Trans>Include archived</Trans></IonLabel>\n\t\t\t\t\t\t\t<IonToggle checked={this.state.includeArchived} onIonChange={e => this.setState({ includeArchived: e.detail.checked })} />\n\t\t\t\t\t\t</IonItem>\n\t\t\t\t\t</IonToolbar>\n\t\t\t\t</IonHeader>\n\t\t\t\t<IonContent>\n\n\t\t\t\t\t{this.props.sessionStore.dbAuthenticated\n\t\t\t\t\t\t&& <Lists\n\t\t\t\t\t\t\tlists={this.props.needsStore.needsListsArray}\n\t\t\t\t\t\t\tonSetCurrentList={(list) => this.onSetCurrentNeedsList(list.uid)}\n\t\t\t\t\t\t\tonRemoveList={(list) => this.onArchiveNeedsList(list)}\n\t\t\t\t\t\t\tincludeArchived={this.state.includeArchived}\n\t\t\t\t\t\t\threfOnClick={NEEDS}\n\t\t\t\t\t\t/>}\n\n\t\t\t\t</IonContent>\n\t\t\t\t<IonFooter>\n\n\t\t\t\t</IonFooter>\n\t\t\t</IonPage>)\n\t}\n}\n\nexport default compose(\n\twithFirebase,\n\twithEmailVerification,\n\tinject('needsStore', 'userStore', 'sessionStore'),\n\tobserver,\n)(NeedsListsPage)\n\n","import React, { Component } from 'react'\nimport { compose } from 'recompose'\nimport { withFirebase } from '../../Firebase'\nimport { inject, observer } from 'mobx-react'\nimport { NEEDS } from '../../../constants/routes'\n\nimport { IonButton, IonContent, IonToolbar, IonPage, IonHeader, IonTitle, IonCard, IonCardHeader, IonCardTitle, IonCardSubtitle, IonFooter } from '@ionic/react'\n\nimport { Trans } from 'react-i18next'\n\nimport './page.css'\nimport LoadingAnimation from '../../Reusables/ionic/LoadingAnimation'\nimport UserProfileImg from '../../Reusables/ionic/UserProfileImg'\nimport { withEmailVerification } from '../../Session'\n\nclass NeedsInSharedShoppingList extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tshoppingListId: null,\n\t\t\tsharedShoppingList: null,\n\t\t\tsharingUser: null,\n\t\t\tisValid: false,\n\t\t\tloading: true\n\t\t}\n\t}\n\n\tasync componentDidMount() {\n\t\tconst { location } = this.props\n\t\tconst { pathname } = location\n\t\tconst shoppingListId = pathname.replace('/share/', '')\n\n\t\tconst snapshot = await this.props.firebase.list(shoppingListId).get()\n\t\tconst sharedShoppingList = snapshot.data()\n\t\tconst sharingUser = sharedShoppingList\n\t\t\t? (await this.props.firebase.user(sharedShoppingList.userId).get()).data()\n\t\t\t: null\n\n\t\tthis.setState({\n\t\t\tshoppingListId,\n\t\t\tsharedShoppingList,\n\t\t\tsharingUser,\n\t\t\tisValid: snapshot.exists,\n\t\t\tloading: false\n\t\t})\n\t}\n\n\tonCreateNeedsListForShoppingList(shoppingListId, name) {\n\t\tthis.props.firebase.createNeedsListForShoppingList(shoppingListId, name)\n\t\t\t.then(() => {\n\t\t\t\tthis.props.history.push(NEEDS)\n\t\t\t})\n\t}\n\n\trender() {\n\t\tconst { loading, shoppingListId, sharingUser, isValid } = this.state\n\n\t\tconst Content = (props) => {\n\t\t\tif (loading) return <LoadingAnimation loading={loading} />\n\t\t\tif (!loading && !isValid) return <div>The list with id {shoppingListId} does not exist</div>\n\t\t\tif (!loading && isValid) return (\n\t\t\t\t<>\n\t\t\t\t\t<IonCard style={{\n\t\t\t\t\t\tpadding: '30px',\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<IonCardHeader class=\"ion-text-center\">\n\t\t\t\t\t\t\t<UserProfileImg user={sharingUser} size={150} />\n\t\t\t\t\t\t\t<IonCardTitle>{sharingUser.username}&nbsp;({sharingUser.email})</IonCardTitle>\n\t\t\t\t\t\t\t<IonCardSubtitle><Trans>has shared a shopping list with you</Trans></IonCardSubtitle>\n\t\t\t\t\t\t</IonCardHeader>\n\t\t\t\t\t</IonCard>\n\t\t\t\t\t<IonFooter>\n\t\t\t\t\t\t<CreateNeedsListButton\n\t\t\t\t\t\t\t{...props}\n\t\t\t\t\t\t\tshoppingListId={shoppingListId}\n\t\t\t\t\t\t\tsharingUser={sharingUser}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</IonFooter>\n\t\t\t\t</>\n\t\t\t)\n\t\t\treturn null\n\t\t}\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<IonPage>\n\t\t\t\t\t<IonHeader>\n\t\t\t\t\t\t<IonToolbar>\n\t\t\t\t\t\t\t<IonTitle><Trans>Shared</Trans></IonTitle>\n\t\t\t\t\t\t</IonToolbar>\n\t\t\t\t\t</IonHeader>\n\t\t\t\t\t<IonContent>\n\t\t\t\t\t\t<IonHeader collapse=\"condense\">\n\t\t\t\t\t\t\t<IonToolbar>\n\t\t\t\t\t\t\t\t<IonTitle size=\"large\"><Trans>Shared</Trans></IonTitle>\n\t\t\t\t\t\t\t</IonToolbar>\n\t\t\t\t\t\t</IonHeader>\n\t\t\t\t\t\t<Content\n\t\t\t\t\t\t\t{...this.props}\n\t\t\t\t\t\t\tonCreateNeedsListForShoppingList={this.onCreateNeedsListForShoppingList.bind(this)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</IonContent>\n\t\t\t\t</IonPage>\n\t\t\t</>\n\t\t)\n\t}\n}\n\nconst CreateNeedsListButton = ({ shoppingListId, sharingUser, onCreateNeedsListForShoppingList }) => (\n\t<IonButton\n\t\ttype=\"button\"\n\t\texpand=\"block\"\n\t\tonClick={() => onCreateNeedsListForShoppingList(shoppingListId, sharingUser.username)}\n\t>\n\t\t<Trans>Open shared shopping list</Trans>\n\t</IonButton>\n)\n\nexport default compose(\n\twithFirebase,\n\twithEmailVerification,\n\tinject('needsStore', 'sessionStore'),\n\tobserver,\n)(NeedsInSharedShoppingList)\n","import React from 'react'\nimport { Route, Redirect, Switch } from 'react-router-dom'\nimport { inject, observer } from 'mobx-react'\nimport { compose } from 'recompose'\n\n// import { ellipse, square, triangle } from 'ionicons/icons';\nimport SignUpPage from '../../SignUp/ionic'\nimport SignInPage from '../../SignIn/ionic'\nimport PasswordForgetPage from '../../PasswordForget/ionic'\nimport PasswordChangePage from '../../PasswordChange/ionic'\nimport AccountPage from '../../Account/ionic'\nimport AdminPage from '../../Admin/simple-ui'\nimport ShoppingPage from '../../Shopping/ionic'\nimport GoShoppingPage from '../../GoShopping/ionic'\nimport FinishShoppingPage from '../../FinishShopping/ionic'\nimport ShoppingListsPage from '../../ShoppingLists/ionic'\nimport NeedsPage from '../../Needs/ionic'\nimport NeedsListsPage from '../../NeedsLists/ionic'\nimport SharedShoppingList from '../../Needs/ionic/SharedShoppingList'\n\nimport { useLocation } from 'react-router-dom'\n\nimport { Trans } from 'react-i18next'\n\nimport * as ROUTES from '../../../constants/routes'\nimport {\n\t// IonIcon,\n\tIonLabel,\n\tIonRouterOutlet,\n\tIonTabBar,\n\tIonTabButton,\n\tIonTabs,\n\tIonIcon\n} from '@ionic/react'\n\nimport { cartOutline, personOutline, lockClosed, shareSocialOutline } from 'ionicons/icons'\n\nexport const NavigationAuth = () => (\n\t<>\n\t\t<IonTabs>\n\t\t\t<IonRouterOutlet>\n\t\t\t\t<Route path={ROUTES.PASSWORD_FORGET} render={() => <PasswordForgetPage />} />\n\t\t\t\t<Route path={ROUTES.PASSWORD_CHANGE} render={() => <PasswordChangePage />} />\n\t\t\t\t<Route path={ROUTES.ACCOUNT} render={() => <AccountPage />} />\n\t\t\t\t<Route path={ROUTES.SHOPPING_LISTS} render={() => <ShoppingListsPage />} />\n\t\t\t\t<Route path={ROUTES.SHOPPING} render={() => <ShoppingPage />} />\n\t\t\t\t<Route path={ROUTES.FINISH_SHOPPING} render={() => <FinishShoppingPage />} />\n\t\t\t\t<Route path={ROUTES.GO_SHOPPING} render={() => <GoShoppingPage />} />\n\t\t\t\t<Route path={ROUTES.NEEDS_LISTS} render={() => <NeedsListsPage />} />\n\t\t\t\t<Route path={ROUTES.NEEDS} render={() => <NeedsPage />} />\n\t\t\t\t<Route path={ROUTES.SHARED_SHOPPING_LIST} component={SharedShoppingList} />\n\t\t\t\t<Route path={ROUTES.ADMIN} render={() => <AdminPage />} />\n\t\t\t\t<Redirect exact from={ROUTES.SIGN_IN} to={ROUTES.SHOPPING} />\n\t\t\t\t<Redirect exact from={ROUTES.SIGN_UP} to={ROUTES.SHOPPING} />\n\t\t\t\t<Redirect exact from=\"/\" to={ROUTES.SHOPPING} />\n\t\t\t</IonRouterOutlet>\n\t\t\t<IonTabBar slot=\"bottom\">\n\t\t\t\t<IonTabButton tab=\"Shopping\" href={ROUTES.SHOPPING} data-test=\"tab-btn-shopping\">\n\t\t\t\t\t<IonIcon icon={cartOutline} />\n\t\t\t\t\t<IonLabel><Trans>Shopping</Trans></IonLabel>\n\t\t\t\t</IonTabButton>\n\t\t\t\t<IonTabButton tab=\"Needs\" href={ROUTES.NEEDS} data-test=\"tab-btn-needs\">\n\t\t\t\t\t<IonIcon icon={shareSocialOutline} />\n\t\t\t\t\t<IonLabel><Trans>Shared</Trans></IonLabel>\n\t\t\t\t</IonTabButton>\n\t\t\t\t<IonTabButton tab=\"Account\" href={ROUTES.ACCOUNT} data-test=\"tab-btn-account\">\n\t\t\t\t\t<IonIcon icon={personOutline} />\n\t\t\t\t\t<IonLabel><Trans>Account</Trans></IonLabel>\n\t\t\t\t</IonTabButton>\n\t\t\t</IonTabBar>\n\t\t</IonTabs>\n\t</>\n)\n\n\nexport const NavigationNonAuth = () => {\n\tconst currentLocation = useLocation()\n\treturn (\n\t\t<IonTabs>\n\t\t\t<IonRouterOutlet>\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route path={ROUTES.SIGN_UP} component={SignUpPage} />\n\t\t\t\t\t<Route path={ROUTES.SIGN_IN} component={SignInPage} />\n\t\t\t\t\t<Route path={ROUTES.PASSWORD_FORGET} render={() => <PasswordForgetPage />} />\n\t\t\t\t\t<Redirect from=\"/\" to={{\n\t\t\t\t\t\tpathname: ROUTES.SIGN_IN,\n\t\t\t\t\t\tstate: { from: currentLocation }\n\t\t\t\t\t}} />\n\t\t\t\t</Switch>\n\t\t\t</IonRouterOutlet>\n\t\t\t<IonTabBar slot=\"bottom\">\n\t\t\t\t<IonTabButton tab=\"Sign In\" href={ROUTES.SIGN_IN} data-test=\"tab-btn-signin\">\n\t\t\t\t\t<IonIcon icon={lockClosed} />\n\t\t\t\t\t<IonLabel>Sign In</IonLabel>\n\t\t\t\t</IonTabButton>\n\t\t\t</IonTabBar>\n\t\t</IonTabs>\n\t)\n}\n\nconst Navigation = ({ sessionStore }) => {\n\treturn sessionStore.authUser ? (\n\t\t<NavigationAuth authUser={sessionStore.authUser} />\n\t) : (\n\t\t<NavigationNonAuth authUser={sessionStore.authUser} />\n\t)\n}\n\nexport default compose(\n\tinject('sessionStore'),\n\tobserver,\n)(Navigation)\n\n// The following was a try of using a protected route redirect.\n// However, this lead to issues when not being authenticated.\n// Keeping it here commented for further reference.\n// Making it the default export will show the issues\n// const AuthAwareNavigation = () => (\n//     <>\n//         <IonTabs>\n//             <IonRouterOutlet>\n//                 <Route path={ROUTES.SIGN_UP} render={() => <SignUpPage />} />\n//                 <Route path={ROUTES.SIGN_IN} render={() => <SignInPage />} />\n//                 <Route path={ROUTES.PASSWORD_FORGET} render={() => <PasswordForgetPage />} />\n//                 <PrivateRoute path={ROUTES.ACCOUNT} render={() => <AccountPage />} />\n//                 <PrivateRoute path={ROUTES.SHOPPING} render={() => <ShoppingPage />} />\n//                 <PrivateRoute path={ROUTES.NEEDS} render={() => <NeedsPage />} />\n//                 <PrivateRoute path={ROUTES.SHARED_SHOPPING_LIST} render={() => <SharedShoppingList />} />\n//                 <PrivateRoute path={ROUTES.ADMIN} render={() => <AdminPage />} />\n//                 <Redirect exact from=\"/\" to={ROUTES.SHOPPING} />\n//             </IonRouterOutlet>\n//             <IonTabBar slot=\"bottom\">\n//                 <IonTabButton tab=\"Shopping\" href={ROUTES.SHOPPING}>\n//                     {/* <IonIcon icon={triangle} /> */}\n//                     <IonLabel>Shopping</IonLabel>\n//                 </IonTabButton>\n//                 <IonTabButton tab=\"Needs\" href={ROUTES.NEEDS}>\n//                     {/* <IonIcon icon={ellipse} /> */}\n//                     <IonLabel>Needs</IonLabel>\n//                 </IonTabButton>\n//                 <IonTabButton tab=\"Account\" href={ROUTES.ACCOUNT}>\n//                     {/* <IonIcon icon={square} /> */}\n//                     <IonLabel>Account</IonLabel>\n//                 </IonTabButton>\n//             </IonTabBar>\n//         </IonTabs>\n//     </>\n// )\n//\n// export default AuthAwareNavigation\n// export default compose(\n//     inject('sessionStore'),\n//     observer,\n// )(AuthAwareNavigation);\n","import React, { Component } from 'react'\nimport {\n\tIonApp,\n} from '@ionic/react'\nimport { IonReactRouter } from '@ionic/react-router'\nimport Navigation from '../../Navigation/ionic'\n\nimport { withAuthentication } from '../../Session'\n\n/* Core CSS required for Ionic components to work properly */\nimport '@ionic/react/css/core.css'\n\n/* Basic CSS for apps built with Ionic */\nimport '@ionic/react/css/normalize.css'\nimport '@ionic/react/css/structure.css'\nimport '@ionic/react/css/typography.css'\n\n/* Optional CSS utils that can be commented out */\nimport '@ionic/react/css/padding.css'\nimport '@ionic/react/css/float-elements.css'\nimport '@ionic/react/css/text-alignment.css'\nimport '@ionic/react/css/text-transformation.css'\nimport '@ionic/react/css/flex-utils.css'\nimport '@ionic/react/css/display.css'\n\n/* Theme variables */\nimport '../../../theme/variables.css'\nimport { compose } from 'recompose'\nimport { inject } from 'mobx-react'\n\n/* Global styles */\nimport '../../../theme/app.scss'\nimport '../../Reusables/page.scss'\n\n// const App: React.FC = () => (\n//   <IonApp>\n//     <IonReactRouter>\n\n//         <Navigation />\n\n//     </IonReactRouter>\n//   </IonApp>\n// );\n\nclass App extends Component {\n\n\tcomponentDidMount() {\n\t\tif (!this.handlerRegistered) {\n\t\t\tthis.handlerRegistered = this.props.registerAuthListener((authUser) => {\n\t\t\t\tthis.props.sessionStore.setDbAuthenticated(!!authUser)\n\t\t\t})\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<IonApp>\n\t\t\t\t<IonReactRouter>\n\n\t\t\t\t\t<Navigation />\n\n\t\t\t\t</IonReactRouter>\n\t\t\t</IonApp>\n\t\t)\n\t}\n}\n\n\nexport default compose(\n\twithAuthentication,\n\tinject('sessionStore')\n) (App)\n","import i18n from 'i18next'\nimport { initReactI18next } from 'react-i18next'\nimport LanguageDetector from 'i18next-browser-languagedetector'\n\n\n// the translations\n// (tip move them in a JSON file and import them)\nconst resources = {\n\ten: {\n\t\ttranslation: {\n\t\t\t'A shopping list has been shared with you': 'A shopping list has been shared with you!',\n\t\t\t'Account': 'Account',\n\t\t\t'Account_already_exists': `\n                An account with this E-Mail address already exists.\n                Try to login with this account instead. If you think the\n                account is already used from one of the social logins, try\n                to sign in with one of them. Afterward, associate your accounts\n                on your personal account page.\n                `,\n\t\t\t'All Needs Lists': 'Shared with me',\n\t\t\t'All Shopping Lists': 'My Shopping Lists',\n\t\t\t'Allow friends to add own needs': 'Allow friends to add own needs',\n\t\t\t'archived': 'archived',\n\t\t\t'Back': 'Back',\n\t\t\t'by': 'by',\n\t\t\t'Change Password': 'Change Password',\n\t\t\t'Create Shopping List': 'New Shopping List',\n\t\t\t'Created on': 'Created on',\n\t\t\t'Creating_own_items_disabled': 'The shopping list owner does not allow to add items which he does not shop anyway',\n\t\t\t'Edit': 'Edit',\n\t\t\t'Edit_not_possible_shopping': 'Editing ist not possible: It\\'s currently being shopped! If you want to change something, better give the shopper a call ;)',\n\t\t\t'Edit_not_possible_finished': 'Editing ist not possible: Shopping has already been completed.',\n\t\t\t'Edit_not_possible_archived': 'Editing ist not possible: The shopping list has been archived.',\n\t\t\t'Email': 'Email',\n\t\t\t'Email_confirmation_sent': `E-Mail confirmation sent: \\n\n                Check you E-Mails (Spam folder included) for a confirmation E-Mail.\\n\n                Refresh this page once you confirmed your E-Mail.`,\n\t\t\t'Email_verification_needed': `Verify your E-Mail: \\n\n                Check you E-Mails (Spam folder included) for a confirmation E-Mail \\n\n                or send another confirmation E-Mail.`,\n\t\t\t'Finish shopping': 'Finish shopping',\n\t\t\t'finished': 'Shopping finished',\n\t\t\t'For': 'For',\n\t\t\t'Forgot Password': 'Forgot Password?',\n\t\t\t'Full Name': 'Full Name',\n\t\t\t'Go Shopping': 'Go shopping',\n\t\t\t'has shared a shopping list with you': 'has shared a shopping list with you',\n\t\t\t'Include archived': 'Include archived lists',\n\t\t\t'Item name': 'Item',\n\t\t\t'Is confirmed. Reload': 'Is confirmed. Reload',\n\t\t\t'Loading_message': 'Loading...',\n\t\t\t'My own shopped items': 'My own shopped items',\n\t\t\t'Name_mandatory': 'Please enter what you want to shop!',\n\t\t\t'Name_and_quantity_mandatory': 'How much of what do you want to add to your cart?',\n\t\t\t'No account yet?': 'No account yet?',\n\t\t\t'Open shared shopping list': 'Open shared shopping list',\n\t\t\t'or with': 'or with',\n\t\t\t'Password': 'Password',\n\t\t\t'Plan Shopping': 'Plan Shopping',\n\t\t\t'Quantity': 'Quantity',\n\t\t\t'Reset My Password': 'Reset My Password',\n\t\t\t'Repeat Password': 'Repeat Password',\n\t\t\t'Save': 'Save',\n\t\t\t'Send confirmation E-Mail': 'Send confirmation E-Mail',\n\t\t\t'Share': 'Share',\n\t\t\t'Sharing_message': 'Hi there! I\\'m about to go for shopping. Is there something on my shopping list which I shall bring along for you as well? Here\\'s a link to my shopping list:',\n\t\t\t'Sharing_link_copied': 'A link to your shopping list has been copied to the clipboard.\\nSend it to people you like so that they ask you to bring something along for you!',\n\t\t\t'Sharing_link_received': 'You received a link to a shared shopping list! Just sign-in or -up quickly to see what items your friend is going to shop!',\n\t\t\t'Sign In': 'Sign In',\n\t\t\t'Sign Out': 'Sign Out',\n\t\t\t'Sign Up': 'Sign Up',\n\t\t\t'Shared': 'Shared',\n\t\t\t'shopping': 'currently shopping',\n\t\t\t'Shopping': 'Shopping',\n\t\t\t'Shopping list': 'Shopping list',\n\t\t\t'Username': 'Username',\n\t\t}\n\t},\n\tde: {\n\t\ttranslation: {\n\t\t\t'A shopping list has been shared with you': 'Ein Einkaufszettel wurde mit Dir geteilt!',\n\t\t\t'Account': 'Konto',\n\t\t\t'Account_already_exists': `\n                Ein Konto mit dieser E-Mail-Adresse existiert bereits.\\n\n                Versuche stattdessen, Dich mit diesem Konto anzumelden.\\n\n                Wenn Du glaubst, dass das Konto bereits von einem der sozialen Logins aus verwendet wird, \\n\n                versuche, Dich mit diesem anzumelden.\\n\n                Danach verbinde Deine Konten auf Deiner persönlichen Konto-Seite.\n                `,\n\t\t\t'All Needs Lists': 'Mit mir geteilt',\n\t\t\t'All Shopping Lists': 'Meine Einkaufszettel',\n\t\t\t'Allow friends to add own needs': 'Freunde können neue Artikel ergänzen',\n\t\t\t'archived': 'archiviert',\n\t\t\t'Back': 'Zurück',\n\t\t\t'by': 'von',\n\t\t\t'Change Password': 'Passwort ändern',\n\t\t\t'Create Shopping List': 'Neuer Einkauszettel',\n\t\t\t'Created on': 'Angelegt am',\n\t\t\t'Creating_own_items_disabled': 'Der Eigentümer des Einkaufszettels erlaubt es nicht, dass Du weitere Artikel ergänzt',\n\t\t\t'Edit': 'Bearbeiten',\n\t\t\t'Edit_not_possible_shopping': 'Bearbeiten ist nicht mehr möglich: Es wird gerade eingekauft! Wenn Du noch etwas ändern möchtest, ruf lieber an ;)',\n\t\t\t'Edit_not_possible_finished': 'Bearbeiten ist nicht mehr möglich: Der Einkauf ist schon beendet!',\n\t\t\t'Edit_not_possible_archived': 'Bearbeiten ist nicht mehr möglich: Der Einkaufszettel wurde archiviert',\n\t\t\t'Email': 'Email',\n\t\t\t'Email_confirmation_sent': `Bestätigungs-E-Mail wurde gesendet: \\n\n                Prüfe Deine E-Mails (inklusive des Spam-Ordners) für eine Bestätigungs-E-Mail.\\n\n                Aktualisiere diese Seite, sobald Du Deine E-Mail bestätigt hast.`,\n\t\t\t'Email_verification_needed': `Verifiziere Deine E-Mail-Adresse: \\n\n                Prüfe Deine E-Mails (inklusive des Spam-Ordners) für eine Bestätigungs-E-Mail.\\n\n                oder sende eine weitere E-Mail-Bestätigungs-Anfrage.`,\n\t\t\t'Finish shopping': 'Einkauf beenden',\n\t\t\t'finished': 'Einkauf beendet',\n\t\t\t'For': 'Für',\n\t\t\t'Forgot Password': 'Passwort vergessen?',\n\t\t\t'Full Name': 'Vollständiger Name',\n\t\t\t'Go Shopping': 'Einkaufen',\n\t\t\t'has shared a shopping list with you': 'hat einen Einkaufszettel mit Dir geteilt!',\n\t\t\t'Help': 'Hilfe',\n\t\t\t'Include archived': 'Auch archivierte anzeigen',\n\t\t\t'Item name': 'Artikel',\n\t\t\t'Is confirmed. Reload': 'Ist bestätigt. Aktualisieren!',\n\t\t\t'Loading_message': 'Ich lade...',\n\t\t\t'Login': 'Anmelden',\n\t\t\t'Logout': 'Abmelden',\n\t\t\t'My own shopped items': 'Meine eigenen Einkäufe',\n\t\t\t'Name_mandatory': 'Bitte gib an, was Du einkaufen möchtest!',\n\t\t\t'Name_and_quantity_mandatory': 'Was und wieviel soll es sein?',\n\t\t\t'No account yet?': 'Noch kein Konto?',\n\t\t\t'Open shared shopping list': 'Geteilten Einkaufszettel öffnen',\n\t\t\t'or with': 'oder mit',\n\t\t\t'Password': 'Passwort',\n\t\t\t'Plan Shopping': 'Einkauf planen',\n\t\t\t'Quantity': 'Menge',\n\t\t\t'Repeat Password': 'Passwort wiederholen',\n\t\t\t'Reset My Password': 'Mein Passwort zurücksetzen',\n\t\t\t'Save': 'Speichern',\n\t\t\t'Send confirmation E-Mail': 'Bestätigungs-E-Mail senden',\n\t\t\t'Share': 'Teilen',\n\t\t\t'Sign In': 'Anmelden',\n\t\t\t'Sign Out': 'Abmelden',\n\t\t\t'Sign Up': 'Anmelden',\n\t\t\t'Shared': 'Geteilt',\n\t\t\t'Sharing_message': 'Hallo! Ich gehe demnächst etwas einkaufen. \\nSteht auf meinem Einkaufszettel etwas, das ich Dir auch mitbringen soll? Hier ist ein Link auf meinen Einkaufszettel:',\n\t\t\t'Sharing_link_copied': `\n                Ein Link zu Deinem Einkaufszettel wurde in die Zwischenablage kopiert.\\n\n                Schicke ihn an Leute, denen Du etwas, das ohnehin schon auf Deinem Zettel steht, mitbringen möchtest.\n                `,\n\t\t\t'Sharing_link_received': 'Ein Freund hat einen Einkaufszettel mit Dir geteilt! \\nMelde Dich flott an, um zu erfahren, was drauf steht!',\n\t\t\t'shopping': 'wird eingekauft',\n\t\t\t'Shopping': 'Einkaufen',\n\t\t\t'Shopping list': 'Einkaufszettel',\n\t\t\t'Username': 'Benutzername',\n\t\t}\n\t}\n}\ni18n\n\t.use(LanguageDetector)\n\t.use(initReactI18next) // passes i18n down to react-i18next\n\t.init({\n\t\tresources,\n\t\tfallbackLng: 'en',\n\t\tdebug: true,\n\n\t\tkeySeparator: false, // we do not use keys in form messages.welcome\n\n\t\tinterpolation: {\n\t\t\tescapeValue: false // react already safes from xss\n\t\t}\n\t})\n\nexport default i18n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'mobx-react';\n\nimport * as serviceWorker from './serviceWorker';\n\nimport store from './stores';\nimport App from './components/App/ionic';\nimport Firebase, { FirebaseContext } from './components/Firebase';\n\nimport './i18n';\n\nReactDOM.render(\n  <Provider {...store}>\n    <FirebaseContext.Provider value={new Firebase()}>\n      <App />\n    </FirebaseContext.Provider>\n  </Provider>,\n  document.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","var map = {\n\t\"./ion-action-sheet-ios.entry.js\": [\n\t\t145,\n\t\t67\n\t],\n\t\"./ion-action-sheet-md.entry.js\": [\n\t\t146,\n\t\t68\n\t],\n\t\"./ion-alert-ios.entry.js\": [\n\t\t147,\n\t\t59\n\t],\n\t\"./ion-alert-md.entry.js\": [\n\t\t148,\n\t\t60\n\t],\n\t\"./ion-app_8-ios.entry.js\": [\n\t\t149,\n\t\t53\n\t],\n\t\"./ion-app_8-md.entry.js\": [\n\t\t150,\n\t\t54\n\t],\n\t\"./ion-avatar_3-ios.entry.js\": [\n\t\t151,\n\t\t8\n\t],\n\t\"./ion-avatar_3-md.entry.js\": [\n\t\t152,\n\t\t9\n\t],\n\t\"./ion-back-button-ios.entry.js\": [\n\t\t153,\n\t\t10\n\t],\n\t\"./ion-back-button-md.entry.js\": [\n\t\t154,\n\t\t11\n\t],\n\t\"./ion-backdrop-ios.entry.js\": [\n\t\t155,\n\t\t12\n\t],\n\t\"./ion-backdrop-md.entry.js\": [\n\t\t156,\n\t\t13\n\t],\n\t\"./ion-button_2-ios.entry.js\": [\n\t\t157,\n\t\t69\n\t],\n\t\"./ion-button_2-md.entry.js\": [\n\t\t158,\n\t\t70\n\t],\n\t\"./ion-card_5-ios.entry.js\": [\n\t\t159,\n\t\t14\n\t],\n\t\"./ion-card_5-md.entry.js\": [\n\t\t160,\n\t\t15\n\t],\n\t\"./ion-checkbox-ios.entry.js\": [\n\t\t161,\n\t\t16\n\t],\n\t\"./ion-checkbox-md.entry.js\": [\n\t\t162,\n\t\t17\n\t],\n\t\"./ion-chip-ios.entry.js\": [\n\t\t163,\n\t\t18\n\t],\n\t\"./ion-chip-md.entry.js\": [\n\t\t164,\n\t\t19\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t165,\n\t\t20\n\t],\n\t\"./ion-datetime_3-ios.entry.js\": [\n\t\t166,\n\t\t57\n\t],\n\t\"./ion-datetime_3-md.entry.js\": [\n\t\t167,\n\t\t58\n\t],\n\t\"./ion-fab_3-ios.entry.js\": [\n\t\t168,\n\t\t21\n\t],\n\t\"./ion-fab_3-md.entry.js\": [\n\t\t169,\n\t\t22\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t170,\n\t\t23\n\t],\n\t\"./ion-infinite-scroll_2-ios.entry.js\": [\n\t\t171,\n\t\t24\n\t],\n\t\"./ion-infinite-scroll_2-md.entry.js\": [\n\t\t172,\n\t\t25\n\t],\n\t\"./ion-input-ios.entry.js\": [\n\t\t173,\n\t\t26\n\t],\n\t\"./ion-input-md.entry.js\": [\n\t\t174,\n\t\t27\n\t],\n\t\"./ion-item-option_3-ios.entry.js\": [\n\t\t175,\n\t\t71\n\t],\n\t\"./ion-item-option_3-md.entry.js\": [\n\t\t176,\n\t\t72\n\t],\n\t\"./ion-item_8-ios.entry.js\": [\n\t\t177,\n\t\t73\n\t],\n\t\"./ion-item_8-md.entry.js\": [\n\t\t178,\n\t\t74\n\t],\n\t\"./ion-loading-ios.entry.js\": [\n\t\t179,\n\t\t28\n\t],\n\t\"./ion-loading-md.entry.js\": [\n\t\t180,\n\t\t29\n\t],\n\t\"./ion-menu_3-ios.entry.js\": [\n\t\t181,\n\t\t75\n\t],\n\t\"./ion-menu_3-md.entry.js\": [\n\t\t182,\n\t\t76\n\t],\n\t\"./ion-modal-ios.entry.js\": [\n\t\t183,\n\t\t55\n\t],\n\t\"./ion-modal-md.entry.js\": [\n\t\t184,\n\t\t56\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t185,\n\t\t66\n\t],\n\t\"./ion-popover-ios.entry.js\": [\n\t\t186,\n\t\t30\n\t],\n\t\"./ion-popover-md.entry.js\": [\n\t\t187,\n\t\t31\n\t],\n\t\"./ion-progress-bar-ios.entry.js\": [\n\t\t188,\n\t\t32\n\t],\n\t\"./ion-progress-bar-md.entry.js\": [\n\t\t189,\n\t\t33\n\t],\n\t\"./ion-radio_2-ios.entry.js\": [\n\t\t190,\n\t\t34\n\t],\n\t\"./ion-radio_2-md.entry.js\": [\n\t\t191,\n\t\t35\n\t],\n\t\"./ion-range-ios.entry.js\": [\n\t\t192,\n\t\t77\n\t],\n\t\"./ion-range-md.entry.js\": [\n\t\t193,\n\t\t78\n\t],\n\t\"./ion-refresher_2-ios.entry.js\": [\n\t\t194,\n\t\t61\n\t],\n\t\"./ion-refresher_2-md.entry.js\": [\n\t\t195,\n\t\t62\n\t],\n\t\"./ion-reorder_2-ios.entry.js\": [\n\t\t196,\n\t\t36\n\t],\n\t\"./ion-reorder_2-md.entry.js\": [\n\t\t197,\n\t\t37\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t198,\n\t\t38\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t199,\n\t\t79\n\t],\n\t\"./ion-searchbar-ios.entry.js\": [\n\t\t200,\n\t\t80\n\t],\n\t\"./ion-searchbar-md.entry.js\": [\n\t\t201,\n\t\t81\n\t],\n\t\"./ion-segment_2-ios.entry.js\": [\n\t\t202,\n\t\t82\n\t],\n\t\"./ion-segment_2-md.entry.js\": [\n\t\t203,\n\t\t83\n\t],\n\t\"./ion-select_3-ios.entry.js\": [\n\t\t204,\n\t\t84\n\t],\n\t\"./ion-select_3-md.entry.js\": [\n\t\t205,\n\t\t85\n\t],\n\t\"./ion-slide_2-ios.entry.js\": [\n\t\t206,\n\t\t86\n\t],\n\t\"./ion-slide_2-md.entry.js\": [\n\t\t207,\n\t\t87\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t208,\n\t\t39\n\t],\n\t\"./ion-split-pane-ios.entry.js\": [\n\t\t209,\n\t\t40\n\t],\n\t\"./ion-split-pane-md.entry.js\": [\n\t\t210,\n\t\t41\n\t],\n\t\"./ion-tab-bar_2-ios.entry.js\": [\n\t\t211,\n\t\t42\n\t],\n\t\"./ion-tab-bar_2-md.entry.js\": [\n\t\t212,\n\t\t43\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t213,\n\t\t44\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t214,\n\t\t45\n\t],\n\t\"./ion-textarea-ios.entry.js\": [\n\t\t215,\n\t\t46\n\t],\n\t\"./ion-textarea-md.entry.js\": [\n\t\t216,\n\t\t47\n\t],\n\t\"./ion-toast-ios.entry.js\": [\n\t\t217,\n\t\t63\n\t],\n\t\"./ion-toast-md.entry.js\": [\n\t\t218,\n\t\t64\n\t],\n\t\"./ion-toggle-ios.entry.js\": [\n\t\t219,\n\t\t48\n\t],\n\t\"./ion-toggle-md.entry.js\": [\n\t\t220,\n\t\t49\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t221,\n\t\t50\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 99;\nmodule.exports = webpackAsyncContext;"],"sourceRoot":""}