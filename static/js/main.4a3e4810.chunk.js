(this["webpackJsonpshare-my-cart"]=this["webpackJsonpshare-my-cart"]||[]).push([[6],{101:function(e,t,n){var r={"./ion-icon.entry.js":[225,90]};function i(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],i=t[0];return n.e(t[1]).then((function(){return n(i)}))}i.keys=function(){return Object.keys(r)},i.id=101,e.exports=i},122:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){},130:function(e,t,n){},141:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(36),s=n.n(a),o=n(7);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=n(3),l=n(9),u=function e(t){var n=this;Object(c.a)(this,e),this.authUser=null,this.dbAuthenticated=!1,this.setAuthUser=function(e){n.authUser=e},this.setDbAuthenticated=function(e){return n.dbAuthenticated=e},this.rootStore=t};Object(l.h)(u,{authUser:l.m,dbAuthenticated:l.m,setAuthUser:l.d,setDbAuthenticated:l.d});var p=u,d=n(12),m=n(4),h=n(15),f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"uid",n={};return e.reduce((function(e,n){return Object(d.a)({},e,Object(h.a)({},n[t],n))}),n)},g=function(){function e(t){var n=this;Object(c.a)(this,e),this.users={},this.setUsers=function(e){n.users=f(e)},this.setUser=function(e,t){n.users||(n.users={}),n.users[e]=t},this.rootStore=t}return Object(m.a)(e,[{key:"userList",get:function(){var e=this;return Object.keys(this.users||{}).map((function(t){return Object(d.a)({},e.users[t],{uid:t})}))}}]),e}();Object(l.h)(g,{users:l.m,setUser:l.d,setUsers:l.d,userList:l.e});var b=g,E=function(e,t){return e.order&&t.order&&e.order!==t.order?e.order-t.order:e.order&&!t.order?e.order:!e.order&&t.order?-1*t.order:e.createdAt&&t.createdAt?t.createdAt.seconds-e.createdAt.seconds:e.createdAt?t.createdAt?0:1:-1},S=function(){function e(t){var n=this;Object(c.a)(this,e),this.shoppingLists=null,this.currentShoppingList=null,this.currentShoppingListItems=null,this.currentDependentNeedsLists=null,this.currentDependentNeedsListsItems=null,this.initializationDone=!1,this.setShoppingLists=function(e){n.shoppingLists=f(e);var t=e.filter((function(e){return!!e.isCurrent}));n.currentShoppingList=t.length>0&&t[0]||null},this.setCurrentShoppingListItems=function(e){n.currentShoppingListItems=f(e)},this.setCurrentDependentNeedsLists=function(e){n.currentDependentNeedsLists=f(e)},this.setDependentNeedsListItems=function(e,t){n.currentDependentNeedsLists[e].items=t},this.rootStore=t}return Object(m.a)(e,[{key:"setInitializationDone",value:function(e){this.initializationDone=e}},{key:"shoppingListsArray",get:function(){var e=this;return Object.keys(this.shoppingLists||{}).map((function(t){return Object(d.a)({},e.shoppingLists[t],{uid:e.shoppingLists[t].uid})}))}},{key:"currentShoppingListItemsArray",get:function(){var e=this;return Object.keys(this.currentShoppingListItems||{}).map((function(t){return Object(d.a)({},e.currentShoppingListItems[t],{uid:e.currentShoppingListItems[t].uid})})).sort((function(e,t){return E(e,t)}))}},{key:"currentDependentNeedsListsArray",get:function(){var e=this;return Object.keys(this.currentDependentNeedsLists||{}).filter((function(e){return"archived"!==e.lifecycleStatus})).map((function(t){return Object(d.a)({},e.currentDependentNeedsLists[t],{uid:e.currentDependentNeedsLists[t].uid})}))}},{key:"currentDependentNeedsListsItemsArray",get:function(){var e=this;if(!this.currentDependentNeedsLists)return[];var t=[];return Object.keys(this.currentDependentNeedsLists||{}).forEach((function(n){var r=e.currentDependentNeedsLists[n].items;if(r&&r.length){var i=e.currentDependentNeedsLists[n];t=t.concat(r.map((function(e){return Object.assign(Object(l.o)(e),{needsListId:Object(l.o)(i.uid),ownerId:Object(l.o)(i.userId)})})))}})),t}}]),e}();Object(l.h)(S,{shoppingLists:l.m,currentShoppingList:l.m,currentShoppingListItems:l.m,currentDependentNeedsLists:l.m,currentDependentNeedsListsItems:l.m,initializationDone:l.m,setInitializationDone:l.d,setShoppingLists:l.d,setCurrentShoppingListItems:l.d,setCurrentDependentNeedsLists:l.d,setDependentNeedsListItems:l.d,shoppingListsArray:l.e,currentShoppingListItemsArray:l.e,currentDependentNeedsListsArray:l.e,currentDependentNeedsListsItemsArray:l.e});var y=S,v=function(){function e(t){var n=this;Object(c.a)(this,e),this.needsLists=null,this.currentNeedsList=null,this.currentNeedsListItems=null,this.currentOriginShoppingList=null,this.currentOriginShoppingListItems=null,this.initializationDone=!1,this.setNeedsLists=function(e){n.needsLists=f(e);var t=e.filter((function(e){return!!e.isCurrent}));n.currentNeedsList=t.length>0&&t[0]||null},this.setCurrentNeedsListItems=function(e){n.currentNeedsListItems=f(e)},this.setCurrentOriginShoppingList=function(e){return n.currentOriginShoppingList=e},this.setCurrentOriginShoppingListItems=function(e){n.currentOriginShoppingListItems=f(e)},this.rootStore=t}return Object(m.a)(e,[{key:"setInitializationDone",value:function(e){this.initializationDone=e}},{key:"needsListsArray",get:function(){var e=this;return Object.keys(this.needsLists||{}).map((function(t){return Object(d.a)({},e.needsLists[t],{uid:e.needsLists[t].uid})}))}},{key:"currentNeedsListItemsArray",get:function(){var e=this;return Object.keys(this.currentNeedsListItems||{}).map((function(t){return Object(d.a)({},e.currentNeedsListItems[t],{uid:e.currentNeedsListItems[t].uid})})).sort((function(e,t){return E(e,t)}))}},{key:"potentiallyNeededItemsArray",get:function(){var e=this,t={};return Object.keys(this.currentNeedsListItems||{}).forEach((function(n){var r=e.currentNeedsListItems[n];t[r.name]=r})),Object.keys(this.currentOriginShoppingListItems||{}).map((function(t){return Object(d.a)({},e.currentOriginShoppingListItems[t],{uid:e.currentOriginShoppingListItems[t].uid})})).filter((function(e){return!t[e.name]})).sort((function(e,t){return E(e,t)}))}}]),e}();Object(l.h)(v,{needsLists:l.m,currentNeedsList:l.m,currentNeedsListItems:l.m,currentOriginShoppingList:l.m,currentOriginShoppingListItems:l.m,initializationDone:l.m,setInitializationDone:l.d,setNeedsLists:l.d,setCurrentNeedsListItems:l.d,setCurrentOriginShoppingList:l.d,setCurrentOriginShoppingListItems:l.d,needsListsArray:l.e,currentNeedsListItemsArray:l.e,potentiallyNeededItemsArray:l.e});var L=v,O=new function e(){Object(c.a)(this,e),this.sessionStore=new p(this),this.userStore=new b(this),this.shoppingStore=new y(this),this.needsStore=new L(this)},j=O,I=n(5),w=n(6),C=n(1),k=n(79),N=n(17),A=n(11),x=n(24),D=i.a.createContext({}),_=function(e){return function(t){return i.a.createElement(D.Consumer,null,(function(n){return i.a.createElement(e,Object.assign({},t,{firebase:n}))}))}},U=D,F=n(2),z=n.n(F),P=n(10),M=n(39),R=n.n(M),T=(n(107),n(109),"sharemycart-prod"),q={apiKey:"AIzaSyCX15kVkA8iH1-Yxjgixd1L38CkkVHsxZc",authDomain:"".concat(T,".firebaseapp.com"),databaseURL:"https://".concat(T,".firebaseio.com"),projectId:"".concat(T),storageBucket:"".concat(T,".appspot.com"),emailRedirect:"https://app.sharemycart.com"},H=function e(){var t=this;Object(c.a)(this,e),this.doCreateUserWithEmailAndPassword=function(e,n){return t.auth.createUserWithEmailAndPassword(e,n)},this.doSignInWithEmailAndPassword=function(e,n){return t.auth.signInWithEmailAndPassword(e,n)},this.doSignInWithGoogle=function(){return t.auth.signInWithPopup(t.googleProvider)},this.doSignInWithFacebook=function(){return t.auth.signInWithPopup(t.facebookProvider)},this.doSignInWithTwitter=function(){return t.auth.signInWithPopup(t.twitterProvider)},this.doSignOut=function(){return t.auth.signOut()},this.doPasswordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.doSendEmailVerification=function(){return t.auth.currentUser.sendEmailVerification({url:q.emailRedirect})},this.doPasswordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},this.onAuthUserListener=function(e,n){return t.auth.onAuthStateChanged((function(r){r?t.user(r.uid).get().then((function(t){var n=t.exists?t.data():{};n.roles||(n.roles={}),r=Object(d.a)({uid:r.uid,email:r.email,emailVerified:r.emailVerified,providerData:r.providerData},n),e(r)})):n()}))},this.user=function(e){return t.db.doc("users/".concat(e))},this.users=function(){return t.db.collection("users")},this.message=function(e){return t.db.doc("messages/".concat(e))},this.messages=function(){return t.db.collection("messages")},this.list=function(e){return t.db.doc("lists/".concat(e))},this.lists=function(){return t.db.collection("/lists")},this.myCurrentList=function(e){return t.db.collection("/lists").where("type","==",e).where("isCurrent","==",!0).where("userId","==",t.auth.currentUser?t.auth.currentUser.uid:"idonotexist")},this.createList=function(e,n){var r=e.name,i=void 0===r?"":r,a=e.allowCreateOwnNeeds,s=void 0===a||a;return t.lists().add({name:i,allowCreateOwnNeeds:s,type:n,userId:t.auth.currentUser.uid,isCurrent:!0,lifecycleStatus:"open",createdAt:t.fieldValue.serverTimestamp()})},this.editList=function(e,n){return t.list(e).set(Object.assign(n,{editedAt:t.fieldValue.serverTimestamp()}))},this.deleteList=function(){var e=Object(P.a)(z.a.mark((function e(n){var r,i;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.list(n).get();case 2:if(!(r=e.sent).exists){e.next=12;break}return i=r.data(),e.next=7,t.list(n).delete();case 7:if(!i.isCurrent){e.next=12;break}return e.next=10,t.lists().where("userId","==",i.userId).where("type","==",i.type).where("lifecycleStatus","==","open").limit(1).get();case 10:e.sent.docs.forEach((function(e){return e.ref.update("isCurrent",!0)}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createListFromTemplate=function(){var e=Object(P.a)(z.a.mark((function e(n){var r,i,a=arguments;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(a.length>1&&void 0!==a[1])||a[1],e.next=3,t.createList({},n.type);case 3:return i=e.sent,"shopping"===n.type?t.setCurrentShoppingList(i.id):t.setCurrentNeedsList(i.id),e.next=7,t.listItems(n.uid).get();case 7:return e.sent.forEach((function(e){var n=e.data();n.shopped&&r||(delete n.id,delete n.shopped,delete n.shoppedAt,delete n.shoppedBy,t.createItem(i.id,n))})),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.listItems=function(e){return t.db.doc("lists/".concat(e)).collection("items")},this.listItem=function(e,n){return t.db.doc("lists/".concat(e)).collection("/items/").doc(n)},this.createItem=function(e,n){return t.listItems(e).add(Object.assign(n,{order:n.order||-1,createdAt:t.fieldValue.serverTimestamp()}))},this.editItem=function(e,n){return t.listItem(e,n.uid).set(Object.assign(n,{editedAt:t.fieldValue.serverTimestamp()}))},this.deleteItem=function(e,n){return t.listItem(e,n).delete()},this.setItemsOrder=function(e,n,r){var i=t.db.batch();n.forEach((function(n){return i.update(t.listItem(e,n.uid),"order",r[n.uid]||0)})),i.commit()},this.shopItem=function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t.listItem(e,n).update({shopped:r,shoppedBy:t.auth.currentUser.uid,shoppedAt:t.fieldValue.serverTimestamp(),editedAt:t.fieldValue.serverTimestamp()})},this.myCurrentShoppingList=function(){return t.myCurrentList("shopping")},this.myShoppingLists=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=["open","shopping","finished","archived"];return e&&n.push("archived"),t.lists().where("userId","==",t.auth.currentUser?t.auth.currentUser.uid:"idonotexist").where("type","==","shopping")},this.setCurrentShoppingList=function(e){t.myCurrentShoppingList().get().then((function(e){e.docs.forEach((function(e){return e.ref.update("isCurrent",!1)}))})).then((function(){return t.list(e).update("isCurrent",!0)}))},this.createShoppingList=function(){var e=Object(P.a)(z.a.mark((function e(n){var r;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.name,e.next=3,t.myCurrentShoppingList().get();case 3:return e.sent.docs.forEach((function(e){return e.ref.update("isCurrent",!1)})),e.abrupt("return",t.createList({name:r},"shopping"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._setShoppingListLifecycleStatusPropagating=function(){var e=Object(P.a)(z.a.mark((function e(n,r){var i;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=t.db.batch()).update(t.list(n),"lifecycleStatus",r),e.next=4,t.dependentNeedsListOfShoppingList(n).get();case 4:return e.sent.forEach((function(e){i.update(e.ref,"lifecycleStatus",r)})),e.abrupt("return",i.commit());case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.openShopping=function(){var e=Object(P.a)(z.a.mark((function e(n){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"open"!==n.lifecycleStatus&&"archived"!==n.lifecycleStatus&&t._setShoppingListLifecycleStatusPropagating(n.uid,"open");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.goShopping=function(){var e=Object(P.a)(z.a.mark((function e(n){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"shopping"!==n.lifecycleStatus&&"archived"!==n.lifecycleStatus&&t._setShoppingListLifecycleStatusPropagating(n.uid,"shopping");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.finishShopping=function(){var e=Object(P.a)(z.a.mark((function e(n){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"finished"!==n.lifecycleStatus&&"archived"!==n.lifecycleStatus&&t._setShoppingListLifecycleStatusPropagating(n.uid,"finished");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.archiveShoppingList=function(){var e=Object(P.a)(z.a.mark((function e(n){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"archived"!==n.lifecycleStatus&&t._setShoppingListLifecycleStatusPropagating(n.uid,"archived");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.myCurrentNeedsList=function(){return t.myCurrentList("needs")},this.setCurrentNeedsList=function(e){t.myCurrentNeedsList().get().then((function(e){e.docs.forEach((function(e){return e.ref.update("isCurrent",!1)}))})).then((function(){return t.list(e).update("isCurrent",!0)}))},this.createNeedsList=function(){var e=Object(P.a)(z.a.mark((function e(n){var r;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.name,e.next=3,t.myCurrentNeedsList().get();case 3:return e.sent.docs.forEach((function(e){return e.ref.update("isCurrent",!1)})),e.abrupt("return",t.createList({name:r},"needs"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.archiveNeedsList=function(){var e=Object(P.a)(z.a.mark((function e(n){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"archived"!==n.lifecycleStatus&&t.list(n.uid).update("lifecycleStatus","archived");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.myNeedsLists=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=["open","shopping","finished"];return e&&n.push("archived"),t.lists().where("userId","==",t.auth.currentUser?t.auth.currentUser.uid:"idonotexist").where("type","==","needs")},this.dependentNeedsListOfShoppingList=function(e){return t.lists().where("shoppingListId","==",e)},this.createNeedsListForShoppingList=function(e,n){return t.myCurrentNeedsList().get().then((function(t){t.size&&t.docs.forEach((function(t){t.data().shoppingListId!==e&&t.ref.update("isCurrent",!1)}))})),t.list(e).get().then((function(e){return e.data()})).then((function(r){t.myNeedsListsForShoppingList(e).then((function(i){i&&i.id?i.update("isCurrent",!0):t.lists().add({type:"needs",shoppingListId:e,shoppingListOwnerId:r.userId,isCurrent:!0,name:n,order:-1,userId:t.auth.currentUser.uid,lifecycleStatus:r.lifecycleStatus,createdAt:t.fieldValue.serverTimestamp()})}))}))},this.myNeedsListsForShoppingList=function(){var e=Object(P.a)(z.a.mark((function e(n){var r,i;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,i=t.myNeedsLists().where("shoppingListId","==",n).limit(1),e.next=4,i.get();case 4:return e.sent.docs.forEach((function(e){return r=e.ref,!1})),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.addNeededItemFromShoppingListItem=function(e,n,r){var i=r.name,a=r.quantity,s=void 0===a?"":a,o=r.unit,c=void 0===o?"":o,l=n;return n.uid&&(l.originShoppingItemUid=n.uid),i&&(l.name=i),l.quantity=s,l.unit=c||"",delete l.createdAt,delete l.editedAt,delete l.uid,delete l.parentId,delete l.shopped,delete l.shoppedAt,delete l.shoppedBy,t.createItem(e,l)},R.a.initializeApp(q),this.fieldValue=R.a.firestore.FieldValue,this.emailAuthProvider=R.a.auth.EmailAuthProvider,this.auth=R.a.auth(),this.db=R.a.firestore(),this.auth.useDeviceLanguage(),this.googleProvider=new R.a.auth.GoogleAuthProvider,this.facebookProvider=new R.a.auth.FacebookAuthProvider,this.twitterProvider=new R.a.auth.TwitterAuthProvider},W="/shopping",B=n(227),V=n(228),K=(n(61),function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(C.v,{className:"image-login",src:"logo-cart_1000.png",style:{maxWidth:e.maxWidth}}),i.a.createElement(C.s,null,i.a.createElement(C.H,{className:"logo-text"},i.a.createElement(C.m,{className:"ion-align-self-center"},i.a.createElement(C.y,{style:{color:"#707070"}},e.textStart||"Share"),i.a.createElement(C.y,{style:{color:"#FA3D04"}},e.textEnd||"MyCart!")))))}),G={username:"",email:"",passwordOne:"",isAdmin:!1,error:null},J=function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).onSubmit=function(e){var t=r.state,n=t.username,i=t.email,a=t.passwordOne,s={},o=(0,r.props.t)("Account_already_exists");r.props.firebase.doCreateUserWithEmailAndPassword(i,a).then((function(e){return r.props.firebase.user(e.user.uid).set({username:n,email:i,roles:s},{merge:!0})})).then((function(){return r.props.firebase.doSendEmailVerification()})).then((function(){r.setState(Object(d.a)({},G));var e=r.props.location;!!(e.state&&e.state.from&&e.state.from.pathname.match("^/share/"))?r.props.history.push(e.state.from.pathname):r.props.history.push(W)})).catch((function(e){"auth/email-already-in-use"===e.code&&(e.message=o),r.setState({error:e})})),e.preventDefault()},r.onChange=function(e){r.setState(Object(h.a)({},e.target.name,e.target.value))},r.onChangeCheckbox=function(e){r.setState(Object(h.a)({},e.target.name,e.target.checked))},r.state=Object(d.a)({},G),r}return Object(m.a)(n,[{key:"render",value:function(){var e=this.props.t,t=this.state,n=t.username,r=t.email,a=t.passwordOne,s=t.error,o=""===a||""===r||""===n;return i.a.createElement(i.a.Fragment,null,i.a.createElement("form",{onSubmit:this.onSubmit},i.a.createElement(C.H,null,i.a.createElement(C.m,null,i.a.createElement(C.w,{name:"username",value:n,type:"text",placeholder:e("Full Name"),onIonChange:this.onChange,clearInput:!0,className:"input","padding-horizontal":!0,"clear-input":"true",autocomplete:"name"}))),i.a.createElement(C.H,null,i.a.createElement(C.m,null,i.a.createElement(C.w,{name:"email",value:r,onIonChange:this.onChange,clearInput:!0,type:"email",placeholder:e("Email"),className:"input","padding-horizontal":!0,"clear-input":"true",autocomplete:"username email"}))),i.a.createElement(C.H,null,i.a.createElement(C.m,null,i.a.createElement(C.w,{clearInput:!0,name:"passwordOne",value:a,onIonChange:this.onChange,type:"password",placeholder:e("Password"),className:"input","padding-horizontal":!0,autocomplete:"new-password"}))),i.a.createElement(C.e,{disabled:o,type:"submit",expand:"block"},i.a.createElement(B.a,null,"Sign Up")),s&&i.a.createElement("p",null,s.message)))}}]),n}(r.Component),Q=function(e){var t=e.state;return i.a.createElement("span",null,i.a.createElement(B.a,null,"No account yet?"),"\xa0",i.a.createElement(x.c,{to:{pathname:"/signup",state:t}},i.a.createElement(B.a,null,"Sign Up")))},Y=Object(A.a)(N.i,_,Object(V.a)())(J),Z=function(){return i.a.createElement(C.D,null,i.a.createElement(C.t,null,i.a.createElement(C.R,null,i.a.createElement(C.f,{slot:"secondary"},i.a.createElement(C.e,{fill:"clear"},i.a.createElement(B.a,null,"Help"))))),i.a.createElement(C.n,{className:"login-page"},i.a.createElement(K,{maxWidth:"150px"}),i.a.createElement(Y,null)))},$=n(8),X=n(87),ee=function(e){var t=e.defaultHref,n=Object(X.a)().t;return i.a.createElement(C.d,{defaultHref:t,text:n("Back"),"data-test":"back"})},te={email:"",error:null},ne=function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).onSubmit=function(e){var t=r.state.email;r.props.firebase.doPasswordReset(t).then((function(){r.setState(Object(d.a)({},te))})).catch((function(e){r.setState({error:e})})),e.preventDefault()},r.onChange=function(e){r.setState(Object(h.a)({},e.target.name,e.target.value))},r.state=Object(d.a)({},te),r}return Object(m.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.error,r=""===t;return i.a.createElement("form",{onSubmit:this.onSubmit},i.a.createElement(C.H,null,i.a.createElement(C.m,null,i.a.createElement(C.w,{name:"email",value:t,onIonChange:this.onChange,clearInput:!0,type:"email",placeholder:"Email",class:"input","padding-horizontal":!0,"clear-input":"true"}))),i.a.createElement(C.e,{disabled:r,type:"submit",expand:"block"},i.a.createElement(B.a,null,"Reset My Password")),n&&i.a.createElement("p",null,n.message))}}]),n}(r.Component),re=function(){return i.a.createElement("span",null,i.a.createElement(x.c,{to:"/pw-forget"},i.a.createElement(B.a,null,"Forgot Password")))},ie=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(C.t,null,i.a.createElement(C.R,null,i.a.createElement(C.f,{slot:"start"},i.a.createElement(ee,{defaultHref:"/signin"})))),i.a.createElement(C.n,{className:"login-page"},i.a.createElement(K,{maxWidth:"100px",textStart:"Forgot",textEnd:"MyPassword!"}),i.a.createElement(C.s,null,i.a.createElement(ae,null))))},ae=_(ne),se=(n(122),function(e){var t=function(t){Object(I.a)(r,t);var n=Object(w.a)(r);function r(e){var t;return Object(c.a)(this,r),(t=n.call(this,e)).props.sessionStore.setAuthUser(JSON.parse(localStorage.getItem("authUser"))),t.listener=null,t.registerAuthListener=function(e){return t.listener=e,!0},t}return Object(m.a)(r,[{key:"componentDidMount",value:function(){var e=this;this.unregisterHandler=this.props.firebase.onAuthUserListener((function(t){localStorage.setItem("authUser",JSON.stringify(t)),e.props.sessionStore.setAuthUser(t),e.listener&&e.listener(t)}),(function(){localStorage.removeItem("authUser"),e.props.sessionStore.setAuthUser(null),e.listener&&e.listener(null)}))}},{key:"componentWillUnmount",value:function(){this.unregisterHandler()}},{key:"render",value:function(){return i.a.createElement(e,Object.assign({},this.props,{registerAuthListener:this.registerAuthListener}))}}]),r}(i.a.Component);return Object(A.a)(_,Object(o.b)("sessionStore"))(t)}),oe=function(e){return function(t){var n=function(n){Object(I.a)(a,n);var r=Object(w.a)(a);function a(){return Object(c.a)(this,a),r.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.listener=this.props.firebase.onAuthUserListener((function(n){e(n)||t.props.history.push("/signin")}),(function(){return t.props.history.push("/signin")}))}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return e(this.props.sessionStore.authUser)?i.a.createElement(t,this.props):null}}]),a}(i.a.Component);return Object(A.a)(N.i,_,Object(o.b)("sessionStore"),o.c)(n)}},ce=function(e){var t=function(t){Object(I.a)(r,t);var n=Object(w.a)(r);function r(e){var t;return Object(c.a)(this,r),(t=n.call(this,e)).onSendEmailVerification=function(){t.props.firebase.doSendEmailVerification().then((function(){return t.setState({isSent:!0})}))},t.state={isSent:!1},t}return Object(m.a)(r,[{key:"render",value:function(){return(t=this.props.sessionStore.authUser)&&!t.emailVerified&&t.providerData.map((function(e){return e.providerId})).includes("password")?i.a.createElement(C.n,{className:"login-page"},i.a.createElement(K,{maxWidth:"150px",textStart:"Check",textEnd:"YourEmail"}),i.a.createElement(C.s,null,i.a.createElement(C.H,null,i.a.createElement(C.m,null,this.state.isSent?i.a.createElement(B.a,null,"Email_confirmation_sent"):i.a.createElement(B.a,null,"Email_verification_needed"))),i.a.createElement(C.H,null,i.a.createElement(C.m,null,i.a.createElement(C.e,{type:"button",onClick:this.onSendEmailVerification,disabled:this.state.isSent,expand:"block"},i.a.createElement(B.a,null,"Send confirmation E-Mail")),i.a.createElement(C.e,{type:"button",onClick:function(){return location.reload()},expand:"block",color:"secondary"},i.a.createElement(B.a,null,"Is confirmed. Reload")))))):i.a.createElement(e,this.props);var t}}]),r}(i.a.Component);return Object(A.a)(_,Object(o.b)("sessionStore"),o.c)(t)},le={email:"",password:"",error:null},ue="\n  An account with an E-Mail address to\n  this social account already exists. Try to login from\n  this account instead and associate your social accounts on\n  your personal account page.\n",pe=function(){var e=(this.props.location.state||{from:{pathname:"/"}}).from,t=this.state.redirectToReferrer,n=this.props.history;!0===t&&setTimeout((function(){return n.push(e&&e.pathname||W)}),500)},de=function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).onSubmit=function(e){var t=r.state,n=t.email,i=t.password;e.preventDefault(),r.props.firebase.doSignInWithEmailAndPassword(n,i).then((function(){r.setState(Object(d.a)({redirectToReferrer:!0},le))})).catch((function(e){r.setState({error:e})}))},r.onChange=function(e){r.setState(Object(h.a)({},e.target.name,e.target.value))},r.state=Object(d.a)({},le),r}return Object(m.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,r=e.error,a=""===n||""===t,s=this.props.t;return pe.call(this),i.a.createElement("form",{onSubmit:this.onSubmit},i.a.createElement(C.H,null,i.a.createElement(C.m,null,i.a.createElement(C.w,{name:"email",value:t,onIonChange:this.onChange,clearInput:!0,type:"email",placeholder:s("Email"),className:"input","padding-horizontal":!0,"clear-input":"true",autocomplete:"username email"}))),i.a.createElement(C.H,null,i.a.createElement(C.m,null,i.a.createElement(C.w,{clearInput:!0,name:"password",value:n,onIonChange:this.onChange,type:"password",placeholder:s("Password"),className:"input",autocomplete:"current-password","padding-horizontal":!0}))),i.a.createElement(C.e,{disabled:a,type:"submit",expand:"block"},i.a.createElement(B.a,null,"Sign In")),r&&i.a.createElement("p",null,r.message))}}]),n}(r.Component),me=function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).onSubmit=function(e){r.props.firebase.doSignInWithGoogle({redirectUri:"/signin",state:r.props.location.state}).then((function(e){return r.props.firebase.user(e.user.uid).set({username:e.user.displayName,email:e.user.email,roles:{}},{merge:!0})})).then((function(){r.setState({redirectToReferrer:!0,error:null})})).catch((function(e){"auth/account-exists-with-different-credential"===e.code&&(e.message=ue),r.setState({error:e})})),e.preventDefault()},r.state={error:null},r}return Object(m.a)(n,[{key:"render",value:function(){var e=this.state.error;return pe.call(this),i.a.createElement("form",{onSubmit:this.onSubmit},i.a.createElement(C.H,null,i.a.createElement(C.m,null,i.a.createElement(C.e,{onClick:this.onSubmit,type:"submit",expand:"block",color:"secondary"},i.a.createElement(C.u,{icon:$.w}),i.a.createElement("span",{className:"social-button-text"},"Google")))),e&&i.a.createElement("p",null,e.message))}}]),n}(r.Component),he=function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).onSubmit=function(e){r.props.firebase.doSignInWithFacebook().then((function(e){return r.props.firebase.user(e.user.uid).set({username:e.additionalUserInfo.profile.name,email:e.additionalUserInfo.profile.email,roles:{}},{merge:!0})})).then((function(){r.setState({redirectToReferrer:!0,error:null})})).catch((function(e){"auth/account-exists-with-different-credential"===e.code&&(e.message=ue),r.setState({error:e})})),e.preventDefault()},r.state={error:null},r}return Object(m.a)(n,[{key:"render",value:function(){var e=this.state.error;return pe.call(this),i.a.createElement("form",{onSubmit:this.onSubmit},i.a.createElement(C.H,null,i.a.createElement(C.m,null,i.a.createElement(C.e,{onClick:this.onSubmit,type:"submit",expand:"block",color:"secondary"},i.a.createElement(C.u,{icon:$.v}),i.a.createElement("span",{className:"social-button-text"},"Facebook")))),e&&i.a.createElement("p",null,e.message))}}]),n}(r.Component),fe=function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).onSubmit=function(e){r.props.firebase.doSignInWithTwitter().then((function(e){return r.props.firebase.user(e.user.uid).set({username:e.additionalUserInfo.profile.name,email:e.additionalUserInfo.profile.email,roles:{}},{merge:!0})})).then((function(){r.setState({redirectToReferrer:!0,error:null})})).catch((function(e){"auth/account-exists-with-different-credential"===e.code&&(e.message=ue),r.setState({error:e})})),e.preventDefault()},r.state={error:null},r}return Object(m.a)(n,[{key:"render",value:function(){var e=this.state.error;return pe.call(this),i.a.createElement("form",{onSubmit:this.onSubmit},i.a.createElement(C.H,null,i.a.createElement(C.m,null,i.a.createElement(C.e,{onClick:this.onSubmit,type:"submit",expand:"block",color:"secondary"},i.a.createElement(C.u,{icon:$.x}),i.a.createElement("span",{className:"social-button-text"},"Twitter")))),e&&i.a.createElement("p",null,e.message))}}]),n}(r.Component),ge=Object(A.a)(N.i,_,Object(V.a)())(de),be=Object(A.a)(N.i,_)(me),Ee=(Object(A.a)(N.i,_)(he),Object(A.a)(N.i,_)(fe),ce((function(e){var t=!!(e.location.state&&e.location.state.from&&e.location.state.from.pathname.match("^/share/"));return i.a.createElement(i.a.Fragment,null,i.a.createElement(C.n,{className:"login-page"},i.a.createElement(K,{maxWidth:t?"100px":"150px"}),t&&i.a.createElement(C.x,{color:"success",className:"permanent-message"},i.a.createElement(C.N,null,i.a.createElement("h5",null,i.a.createElement(B.a,null,"Sharing_link_received")))),i.a.createElement(C.s,null,i.a.createElement(ge,null),i.a.createElement(C.H,null,i.a.createElement(C.m,null,i.a.createElement(re,null),i.a.createElement("br",null),i.a.createElement(Q,{state:e.location.state}))),i.a.createElement("div",{className:"separator"},i.a.createElement(B.a,null,"or with")),i.a.createElement(be,null))))}))),Se={passwordOne:"",passwordTwo:"",error:null},ye=function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).onSubmit=function(e){var t=r.state.passwordOne;r.props.firebase.doPasswordUpdate(t).then((function(){r.setState(Object(d.a)({},Se))})).catch((function(e){r.setState({error:e})})),e.preventDefault()},r.onChange=function(e){r.setState(Object(h.a)({},e.target.name,e.target.value))},r.state=Object(d.a)({},Se),r}return Object(m.a)(n,[{key:"render",value:function(){var e=this.state,t=e.passwordOne,n=e.passwordTwo,r=e.error,a=t!==n||""===t;return i.a.createElement("form",{onSubmit:this.onSubmit},i.a.createElement(C.H,null,i.a.createElement(C.m,null,i.a.createElement(C.w,{name:"passwordOne",value:t,onIonChange:this.onChange,clearInput:!0,type:"password",placeholder:"Type your password",class:"input","padding-horizontal":!0,"clear-input":"true"}),i.a.createElement(C.w,{name:"passwordTwo",value:n,onIonChange:this.onChange,clearInput:!0,type:"password",placeholder:"Confirm new password",class:"input","padding-horizontal":!0,"clear-input":"true"}))),i.a.createElement(C.e,{type:"submit",disabled:a,expand:"block"},"Reset My Password"),r&&i.a.createElement("p",null,r.message))}}]),n}(r.Component),ve=function(){return i.a.createElement(C.e,{expand:"block",color:"secondary",href:"/pw-change"},i.a.createElement(B.a,null,"Change Password"),i.a.createElement(C.u,{slot:"end",icon:$.A}))},Le=_(ye),Oe=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(C.t,null,i.a.createElement(C.R,null,i.a.createElement(C.f,{slot:"start"},i.a.createElement(ee,{defaultHref:"/account"})))),i.a.createElement(C.n,{className:"login-page"},i.a.createElement(K,{maxWidth:"100px",textStart:"Change",textEnd:"MyPassword!"}),i.a.createElement(C.s,null,i.a.createElement(Le,null))))},je=n(88),Ie=n.n(je),we=function(e){var t=e.user,n=e.size,r=void 0===n?200:n,a=t?t.photoURL:null,s=Ie()(t.email),o=encodeURIComponent(encodeURIComponent(t.username)),c=a||"https://www.gravatar.com/avatar/".concat(s,"?s=").concat(r,"&d=https%3A%2F%2Fui-avatars.com%2Fapi%2F/").concat(o,"/").concat(r,"%3Frounded%3Dtrue%26bold%3Dtrue");return i.a.createElement("img",{src:c,alt:"User Profile",style:{borderRadius:"50%"}})},Ce=Object(A.a)(Object(o.b)("sessionStore"),o.c)((function(e){var t=e.sessionStore.authUser;return i.a.createElement(C.g,{style:{padding:"30px"}},i.a.createElement(C.h,{class:"ion-text-center"},i.a.createElement(we,{user:t,size:150}),i.a.createElement(C.i,null,t.username),i.a.createElement(C.j,null,t.email)))})),ke=_((function(e){var t=e.firebase;return i.a.createElement(C.e,{expand:"block",onClick:t.doSignOut},i.a.createElement(B.a,null,"Sign Out"),i.a.createElement(C.u,{slot:"end",icon:$.u}))})),Ne=(n(125),Object(A.a)(Object(o.b)("sessionStore"),o.c,ce,oe((function(e){return!!e})))((function(){return i.a.createElement(C.D,null,i.a.createElement(C.t,null,i.a.createElement(C.R,null,i.a.createElement(C.O,null,i.a.createElement(B.a,null,"Account")))),i.a.createElement(C.n,null,i.a.createElement(C.t,{collapse:"condense"},i.a.createElement(C.R,null,i.a.createElement(C.O,{size:"large"},i.a.createElement(B.a,null,"Account")))),i.a.createElement(Ce,null),i.a.createElement(C.r,null,i.a.createElement(C.R,null,i.a.createElement(ve,null),i.a.createElement(ke,null)))))}))),Ae=function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).state={loading:!1},r}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.unsubscribe=this.props.firebase.users().onSnapshot((function(t){var n=[];t.forEach((function(e){return n.push(Object(d.a)({},e.data(),{uid:e.id}))})),e.props.userStore.setUsers(n),e.setState({loading:!1})}))}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){var e=this.props.userStore.userList,t=this.state.loading;return i.a.createElement("div",null,i.a.createElement("h2",null,"Users"),t&&i.a.createElement("div",null,"Loading ..."),i.a.createElement("ul",null,e.map((function(e){return i.a.createElement("li",{key:e.uid},i.a.createElement("span",null,i.a.createElement("strong",null,"ID:")," ",e.uid),i.a.createElement("span",null,i.a.createElement("strong",null,"E-Mail:")," ",e.email),i.a.createElement("span",null,i.a.createElement("strong",null,"Username:")," ",e.username),i.a.createElement("span",null,i.a.createElement(x.c,{to:"".concat("/admin","/").concat(e.uid)},"Details")))}))))}}]),n}(r.Component),xe=Object(A.a)(_,Object(o.b)("userStore"),o.c)(Ae),De=function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).onSendPasswordResetEmail=function(){r.props.firebase.doPasswordReset(r.props.userStore.users[r.props.match.params.id].email)},r.state={loading:!1},r}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.userStore.users&&this.props.userStore.users[this.props.match.params.id]||this.setState({loading:!0}),this.unsubscribe=this.props.firebase.user(this.props.match.params.id).onSnapshot((function(t){e.props.userStore.setUser(e.props.match.params.id,t.data()),e.setState({loading:!1})}))}},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"render",value:function(){var e=(this.props.userStore.users||{})[this.props.match.params.id],t=this.state.loading;return i.a.createElement("div",null,i.a.createElement("h2",null,"User (",this.props.match.params.id,")"),t&&i.a.createElement("div",null,"Loading ..."),e&&i.a.createElement("div",null,i.a.createElement("span",null,i.a.createElement("strong",null,"ID:")," ",e.uid),i.a.createElement("span",null,i.a.createElement("strong",null,"E-Mail:")," ",e.email),i.a.createElement("span",null,i.a.createElement("strong",null,"Username:")," ",e.username),i.a.createElement("span",null,i.a.createElement("button",{type:"button",onClick:this.onSendPasswordResetEmail},"Send Password Reset"))))}}]),n}(r.Component),_e=Object(A.a)(_,Object(o.b)("userStore"),o.c)(De),Ue=Object(A.a)(ce,oe((function(e){return e&&!!e.roles.ADMIN})))((function(){return i.a.createElement("div",null,i.a.createElement("h1",null,"Admin"),i.a.createElement("p",null,"The Admin Page is accessible by every signed in admin user."),i.a.createElement(N.e,null,i.a.createElement(N.c,{exact:!0,path:"/admin/:id",component:_e}),i.a.createElement(N.c,{exact:!0,path:"/admin",component:xe})))})),Fe=n(54),ze=function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).onListenForShoppingLists=function(){r.unsubscribeLists=r.props.firebase.myShoppingLists().orderBy("createdAt","desc").onSnapshot((function(e){var t=null;if(r.props.shoppingStore.setInitializationDone(!0),e.size){var n=[];e.forEach((function(e){var r=e.data();n.push(Object(d.a)({},r,{uid:e.id})),r.isCurrent&&(t=e.id)})),r.props.shoppingStore.setShoppingLists(n),r.setState(Object.assign(r.state,{listsLoading:!1}))}else r.props.shoppingStore.setShoppingLists([]),r.setState({listsLoading:!1,itemsLoading:!1});r.unsubscribeItems&&r.unsubscribeItems(),r.onListenForCurrentShoppingListItems(t),r.unsubscribeDependentNeedsLists&&r.unsubscribeDependentNeedsLists(),r.unsubscribeAllDependentNeedsListItems(),r.onListenForDependentNeedsLists(t)}))},r.onListenForCurrentShoppingListItems=function(e){r.unsubscribeItems=r.props.firebase.listItems(e).onSnapshot((function(e){if(e.size){var t=[];e.forEach((function(e){return t.push(Object(d.a)({},e.data(),{uid:e.id,parentId:e.ref.parent.parent.id}))})),r.props.shoppingStore.setCurrentShoppingListItems(t),r.setState({itemsLoading:!1})}else r.props.shoppingStore.setCurrentShoppingListItems([]),r.setState({itemsLoading:!1})}))},r.onListenForDependentNeedsLists=function(e){r.unsubscribeDependentNeedsLists=r.props.firebase.dependentNeedsListOfShoppingList(e).onSnapshot((function(e){if(r.unsubscribeAllDependentNeedsListItems(),e.size){var t=[];r.unsubscribeDependentNeedsListsItems=[],e.forEach((function(e){var n=e.data();t.push(Object(d.a)({},n,{uid:e.id})),r.onListenForDependentNeedsListsItems(e.id);var i=n.userId;r.props.userStore.users[i]||r.props.firebase.user(i).get().then((function(e){var t=e.data();r.props.userStore.setUser(e.id,t)}))})),r.props.shoppingStore.setCurrentDependentNeedsLists(t)}else r.props.shoppingStore.setCurrentDependentNeedsLists([])}))},r.onListenForDependentNeedsListsItems=function(e){r.unsubscribeDependentNeedsListsItems.push(r.props.firebase.listItems(e).onSnapshot((function(t){var n=[];t.forEach((function(e){return n.push(Object(d.a)({},e.data(),{uid:e.id,parentId:e.ref.parent.parent.id}))})),r.props.shoppingStore.setDependentNeedsListItems(e,n)})))},r.onChangeText=function(e){r.setState({editingListName:e.target.value})},r.handleCreateShoppingList=function(e){e.preventDefault(),r.props.firebase.createShoppingList({name:r.state.editingListName}),r.setState({editingListName:""})},r.onCreateShoppingList=function(e){r.props.firebase.createShoppingList({name:e})},r.onEditShoppingList=function(e){e.uid;var t=Object(Fe.a)(e,["uid"]);r.props.firebase.editList(e.uid,t)},r.onRemoveShoppingList=function(e){r.props.firebase.deleteList(e)},r.onSetCurrentShoppingList=function(e){r.props.firebase.setCurrentShoppingList(e)},r.onReorderItems=function(e,t,n){r.props.firebase.setItemsOrder(e,t,n)},r.onOpenShopping=function(e){r.props.firebase.openShopping(e)},r.onGoShopping=function(e){r.props.firebase.goShopping(e)},r.onFinishShopping=function(e){r.props.firebase.finishShopping(e)},r.onArchiveShoppingList=function(){var e=Object(P.a)(z.a.mark((function e(t){var n,i=arguments;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!(i.length>1&&void 0!==i[1])||i[1])){e.next=5;break}return e.next=4,r.props.firebase.createListFromTemplate(t,!0);case 4:n=e.sent;case 5:return r.props.firebase.archiveShoppingList(t),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.onCreateItemForCurrentShoppingList=function(e){var t=r.props.shoppingStore.currentShoppingList;return t?r.props.firebase.createItem(t.uid,e):(console.error("Cannot create item for non-existing shoppingList"),new Promise((function(){return null})))},r.onEditShoppingItem=function(e){var t=r.props.shoppingStore.currentShoppingList;t?r.props.firebase.editItem(t.uid,e):console.error("Cannot edit item in non-existing shoppingList")},r.onRemoveShoppingItem=function(e){var t=r.props.shoppingStore.currentShoppingList;t?r.props.firebase.deleteItem(t.uid,e):console.error("Cannot remove item from non-existing shoppingList")},r.onShopShoppingItem=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];r.props.firebase.shopItem(e,t,n)},r.ensureExistingCurrentShoppingList=Object(P.a)(z.a.mark((function e(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.props.firebase.myCurrentShoppingList().get();case 2:if(e.sent.size){e.next=5;break}return e.abrupt("return",r.props.firebase.createShoppingList({name:""}));case 5:case"end":return e.stop()}}),e)}))),r.state={listsLoading:!1,itemsLoading:!1},r}return Object(m.a)(n,[{key:"_tryInitialization",value:function(){this.props.sessionStore.dbAuthenticated&&!this.unsubscribeLists&&(this.ensureExistingCurrentShoppingList(),this.onListenForShoppingLists(),this.onListenForCurrentShoppingListItems())}},{key:"componentDidMount",value:function(){this.props.shoppingStore.shoppingListsArray.length||this.setState({listsLoading:!0,itemsLoading:!0}),this._tryInitialization()}},{key:"componentDidUpdate",value:function(){this._tryInitialization()}},{key:"componentWillUnmount",value:function(){this.unregisterAllListeners()}},{key:"unregisterAllListeners",value:function(){this.unsubscribeLists&&this.unsubscribeLists(),this.unsubscribeItems&&this.unsubscribeItems(),this.unsubscribeDependentNeedsLists&&this.unsubscribeDependentNeedsLists(),this.unsubscribeAllDependentNeedsListItems()}},{key:"unsubscribeAllDependentNeedsListItems",value:function(){this.unsubscribeDependentNeedsListsItems&&this.unsubscribeDependentNeedsListsItems.length&&this.unsubscribeDependentNeedsListsItems.forEach((function(e){return e()}))}}]),n}(r.Component),Pe=n(19),Me="shopping",Re="newShopping",Te="need",qe="inShopping",He="bringAlong",We=function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).onKeyPress=function(e){13===e.which&&r.concludeEditing()},r.state=Object(d.a)({},e.item,{showToast:!1,message:""}),r.nameInput=i.a.createRef(),r.quantityInput=i.a.createRef(),r}return Object(m.a)(n,[{key:"concludeEditing",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.props,n=t.item,r=t.t;if(e){var i=this.state,a=i.name,s=i.quantity,o=i.unit,c=void 0===o?"":o;a&&s?this.props.onEditingConcluded(Object.assign(n,{name:a,quantity:s,unit:c})):this.setState({showToast:!0,message:r("Name_and_quantity_mandatory")}),this.quantityInput.current.setFocus()}else this.props.onEditingConcluded(n)}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.quantityInput.current&&e.quantityInput.current.setFocus()}),500)}},{key:"onChange",value:function(e){this.setState(Object(h.a)({},e.target.name,e.target.value))}},{key:"onBlur",value:function(e){e.target.parentElement!==e.srcElement.parentElement&&this.concludeEditing()}},{key:"setUnit",value:function(e){this.setState({unit:e})}},{key:"render",value:function(){var e=this,t=this.state,n=t.name,r=t.quantity,a=t.unit,s=this.props.t,o=this.props.mode===Me?i.a.createElement(C.I,{value:a,required:"true",slot:"end",onIonChange:function(t){return e.setUnit(t.detail.value)}},i.a.createElement(C.J,null,"pc"),i.a.createElement(C.J,null,"g"),i.a.createElement(C.J,null,"kg"),i.a.createElement(C.J,null,"l"),i.a.createElement(C.J,null,"ml")):i.a.createElement(C.y,{marginLeft:"2px",slot:"end"},a);return i.a.createElement(i.a.Fragment,null,i.a.createElement(C.x,{style:{width:"100%"}},i.a.createElement(C.w,{placeholder:s("Item name"),name:"name",value:n,autocapitalize:!0,autocorrect:"on",debounce:100,style:{marginRight:"0px",minWidth:"135px"},size:16,slot:"",onKeyUp:this.onKeyPress,onIonInput:function(t){return e.onKeyPress(t)},onIonChange:function(t){return e.onChange(t)},onIonBlur:function(t){return e.onBlur(t)},ref:this.nameInput}),i.a.createElement(C.w,{placeholder:s("Quantity"),name:"quantity",type:"number",min:"0",pattern:"\\d+,?\\d*",value:r,onKeyUp:this.onKeyPress,onIonChange:function(t){return e.onChange(t)},onIonBlur:function(t){return e.onBlur(t)},required:"false",slot:"end",style:{marginRight:"0px",maxWidth:"42px",textAlign:"right"},ref:this.quantityInput}),o,i.a.createElement(C.e,{color:"danger",slot:"end",onClick:function(){return e.concludeEditing(!1)}},i.a.createElement(C.u,{icon:$.l})),i.a.createElement(C.e,{color:"success",slot:"end",onClick:function(){return e.concludeEditing()},style:{marginLeft:"10px"}},i.a.createElement(C.u,{icon:$.g}))),i.a.createElement(C.P,{isOpen:this.state.showToast,onDidDismiss:function(){return e.setState((function(){return{showToast:!1}}))},message:this.state.message,duration:3e3}))}}]),n}(r.Component),Be=Object(V.a)()(We),Ve=function(e){var t=e.user,n=e.size,r=void 0===n?200:n,a=e.slot,s=void 0===a?"":a;return i.a.createElement(C.c,{style:{width:r,height:r},slot:s},i.a.createElement(we,{size:r,user:t}))},Ke=function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).state={inEdit:!e.item.quantity},r}return Object(m.a)(n,[{key:"setEditMode",value:function(e){this.props.readOnly||this.setState({inEdit:e})}},{key:"onItemClick",value:function(){var e=this.props.item,t=e.uid,n=e.parentId,r=e.shopped;switch(this.props.mode){case qe:case He:this.props.onShopItem(n,t,!r);break;case"potential":break;default:this.setEditMode(!0)}}},{key:"render",value:function(){var e=this,t=this.props,r=t.item,a=t.bringAlongItems,s=t.mode,o=t.listEditMode,c=t.ownList,u=t.owner,p=t.onCreateNeed,d=t.onDeleteItem,m=t.onEditingConcluded,h=t.onShopItem,f=t.readOnly,g=!c&&!f&&"potential"===s&&i.a.createElement(C.e,{fill:"add",size:"large",slot:"end",color:"primary","data-test":"btn-create-need",onClick:function(){return p(r)}},i.a.createElement(C.u,{icon:$.a})),b=([Te,qe,He].includes(s)||[Me,Re].includes(s)&&(r.quantity>1||r.unit))&&i.a.createElement(C.l,{onClick:function(){return e.setEditMode(!0)},color:r.shopped?"success":"primary"},i.a.createElement(C.y,{color:r.shopped?"success":"dark","data-test":"label-quantity"},s===He&&"+",r.quantity," ",r.unit)),E=c&&!f&&(s===Me&&o||s===Te)&&i.a.createElement(C.e,{className:"button-end",fill:"clear",size:"large",slot:"end",color:"danger",onClick:function(){return d(r.uid)},"data-test":"btn-delete-item"},i.a.createElement(C.u,{icon:$.J})),S=c&&!f&&[Me].includes(s)&&!(s===Me&&o)&&i.a.createElement(C.e,{className:"button-end",fill:"clear",size:"large",slot:"end",onClick:function(){return e.setEditMode(!0)},"data-test":"btn-edit-item"},i.a.createElement(C.u,{icon:$.n,slot:"end"})),y=u&&i.a.createElement(C.e,{fill:"clear",size:"large",slot:"start","data-test":"btn-owner"},i.a.createElement(Ve,{size:"30px",user:u})),v=function(){if(s===Me&&a&&a.length){var e=a.reduce((function(e,t){return e+Number(t.quantity)}),0);if(e>0)return i.a.createElement("span",{style:{display:"flex"}},i.a.createElement(C.l,{color:"secondary"},i.a.createElement(C.u,{icon:$.I}),i.a.createElement(C.y,{color:"secondary","data-test":"label-bring-along-quantity"},"+",e," ",r.unit)))}return null},L=this.state.inEdit?i.a.createElement(Be,{item:Object(l.o)(r),onEditingConcluded:function(t){e.setEditMode(!1),m(t)},mode:s}):i.a.createElement(i.a.Fragment,null,[qe,He].includes(s)&&i.a.createElement(C.k,{slot:"start",style:s===He?{marginLeft:"40px"}:null,value:r.name,checked:r.shopped,onClick:function(){return e.onItemClick()},color:"primary","data-test":"check-shopped"}),i.a.createElement(C.y,{style:{cursor:"pointer",textDecoration:r.shopped?"line-through":"none",color:r.shopped||s===He?"grey":"black"},onClick:function(){return e.onItemClick()},"data-test":"label-item-name"},r.name),i.a.createElement(v,null),y,b,g,S,E),O=s===qe&&a&&i.a.createElement(C.A,{"data-test":"dependent-items"},a.map((function(t){var r=e.props.userStore.users[t.ownerId];return i.a.createElement(n,{key:t.uid,item:t,owner:r,ownList:!1,onShopItem:function(){return h(t.parentId,t.uid,!t.shopped)},mode:He})})));return i.a.createElement(i.a.Fragment,null,i.a.createElement(C.x,{id:r.uid,"data-test":"item"},i.a.createElement(C.E,{slot:"start"}),L),O)}}]),n}(r.Component),Ge=Object(A.a)(Object(o.b)("userStore"),o.c)(Ke),Je=function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).onChangeEditName=function(e){r.setState({editName:e.target.value})},r.onSaveEditName=function(){r.props.onEditList(r.props.list,r.state.editName)},r.state={editName:r.props.list.name},r.props.addSaveEditHandler&&r.props.addSaveEditHandler(r.saveEdit.bind(Object(Pe.a)(r))),r}return Object(m.a)(n,[{key:"doReorder",value:function(e){e.detail.complete();var t=e.srcElement.children,n={};e.detail.complete();var r=0;for(var i in t)r++,t.hasOwnProperty(i)&&t[i].id&&(n[t[i].id]=r);this.setState({order:n})}},{key:"saveEdit",value:function(){var e=this;if(this.onSaveEditName(),this.state.order){this.props.onReorderItems(this.props.list.uid,this.props.items,this.state.order);var t=this.props.shoppingStore,n=t.currentDependentNeedsListsArray,r=t.currentDependentNeedsListsItemsArray;n.forEach((function(t){e.props.onReorderItems(t.uid,r.filter((function(e){return e.parentId===t.uid})),e.state.order)}))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.items,r=t.list,a=t.onEditList,s=t.onEditItem,o=t.onDeleteItem,c=t.onShopItem,l=t.editMode,u=t.userStore,p={},m=[];(this.props.bringAlongItems||[]).forEach((function(e){if(e.quantity<=0)return!1;var t=n.find((function(t){return t.uid===e.originShoppingItemId}))||n.find((function(t){return t.name===e.name}));if(t)p[t.uid]&&p[t.uid].length?p[t.uid].push(e):p[t.uid]=[e];else{var r=u.users[e.ownerId];m.push(Object(d.a)({},e,{owner:r,ownedByOtherUser:!0}))}}));var h=(n||[]).concat(m||[]);return 0===h.length?null:i.a.createElement(i.a.Fragment,null,i.a.createElement(C.A,null,!l&&h.sort((function(e,t){return E(e,t)})).map((function(t,n){var r=p[t.uid];return i.a.createElement(Ge,{key:t.id||n,item:t,owner:t.owner,bringAlongItems:r,ownList:!t.ownedByOtherUser,onEditingConcluded:s,onDeleteItem:o,onShopItem:c,mode:e.props.mode,readOnly:"open"!==e.props.list.lifecycleStatus||t.ownedByOtherUser})})),l&&i.a.createElement(i.a.Fragment,null,i.a.createElement(C.x,{lines:"none"},i.a.createElement(C.y,null,i.a.createElement(B.a,null,"Allow friends to add own needs")),i.a.createElement(C.Q,{name:"allowCreateOwnNeeds",checked:r.allowCreateOwnNeeds,onIonChange:function(){a(Object.assign(r,{allowCreateOwnNeeds:!r.allowCreateOwnNeeds}))}})),i.a.createElement(C.F,{disabled:!1,onIonItemReorder:this.doReorder.bind(this)},n.concat(m||[]).sort((function(e,t){return E(e,t)})).map((function(t,n){return i.a.createElement(Ge,{key:t.id||n,item:t,ownList:!0,onEditingConcluded:s,onDeleteItem:o,onShopItem:c,mode:e.props.mode,readOnly:"open"!==e.props.list.lifecycleStatus,listEditMode:l})}))))))}}]),n}(r.Component),Qe=Object(A.a)(Object(o.b)("shoppingStore","userStore"),o.c)(Je),Ye=function(e){var t=e.loading,n=Object(X.a)().t;return i.a.createElement(C.C,{isOpen:t,message:n("Loading_message")})},Ze=(n(126),["pc","g","kg","l","ml","oz","St\xfcck","Packungen"]),$e=function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).onKeyPress=function(e){13===e.which&&r.concludeEditing()},r.state={showToast:!1,message:""},r.nameInput=i.a.createRef(),r.quantityInput=i.a.createRef(),r}return Object(m.a)(n,[{key:"_setFocus",value:function(){var e=this;this.state.name?setTimeout((function(){return e.quantityInput.current&&e.quantityInput.current.setFocus()}),100):setTimeout((function(){return e.nameInput.current&&e.nameInput.current.setFocus()}),100)}},{key:"concludeEditing",value:function(){var e=this.props.t,t=this.props.item,n=t.name,r=t.quantity,i=t.unit,a=void 0===i?"":i;n?r?this.props.onEditingConcluded({name:n,quantity:r||1,unit:a}):this.props.onEditingConcluded(function(e){try{var t=new RegExp("^((\\d)+)\\s?(".concat(Ze.join("|"),")?\\s((.)+)$"),"i"),n=e.match(t);if(n)return{name:n[4],quantity:n[1],unit:n[3]||""};var r=new RegExp("^((.)+)\\s((\\d)+)\\s?(".concat(Ze.join("|"),")?$"),"i"),i=e.match(r);if(i)return{name:i[1],quantity:i[3],unit:i[5]||""}}catch(a){return{name:e,quantity:1}}return{name:e,quantity:1}}(n)):this.setState({showToast:!0,message:e("Name_mandatory")}),this._setFocus()}},{key:"onChange",value:function(e){this.props.onChange(e)}},{key:"onBlur",value:function(e){e.target.parentElement!==e.srcElement.parentElement&&this.concludeEditing()}},{key:"setUnit",value:function(e){this.props.onChange({target:{name:"unit",value:e}})}},{key:"componentDidMount",value:function(){this._setFocus()}},{key:"render",value:function(){var e=this,t=this.props.item,n=t.name,r=t.quantity,a=t.unit,s=t.originShoppingItemUid,o=this.props,c=o.t,l=o.isFirstItem,u=o.highlight,p=this.props.mode===Te&&a?i.a.createElement(C.y,{slot:"end",className:"hide-sm-down"},a):i.a.createElement(C.I,{value:a,required:"true",slot:"end",style:{marginRight:"0px"},onIonChange:function(t){return e.setUnit(t.detail.value)},className:"hide-sm-down","data-test":"select-unit"},Ze.map((function(e){return i.a.createElement(C.J,{key:e},e)})));return i.a.createElement(i.a.Fragment,null,i.a.createElement(C.x,{key:"createItemWrapper",lines:"none",style:{width:"100%"},className:"create-item ".concat((l||u)&&"highlight"),"data-test":"create-item"},i.a.createElement(C.w,{placeholder:c("Item name"),name:"name",value:n,type:"text",readonly:!!s,required:"true",autocapitalize:!0,autocorrect:"on",debounce:100,style:{marginRight:"0px",minWidth:"135px"},size:16,ref:this.nameInput,slot:"start","data-test":"input-name",onKeyUp:this.onKeyPress,onIonInput:function(t){return e.onKeyPress(t)},onIonChange:function(t){return e.onChange(t)},onIonBlur:function(t){return e.onBlur(t)}}),i.a.createElement(C.w,{placeholder:c("Quantity"),name:"quantity",type:"number",min:"0",pattern:"\\d+,?\\d*",value:r,required:"false",slot:"end",style:{marginRight:"0px",minWidth:"63px"},className:"hide-sm-down",ref:this.quantityInput,"data-test":"input-quantity",onKeyUp:this.onKeyPress,onIonChange:function(t){return e.onChange(t)},onIonBlur:function(t){return e.onBlur(t)}}),p,i.a.createElement(C.e,{slot:"end","data-test":"btn-create-item",onClick:function(){return e.concludeEditing()},style:{marginLeft:"10px"}},i.a.createElement(C.u,{icon:$.b}))),i.a.createElement(C.P,{isOpen:this.state.showToast,onDidDismiss:function(){return e.setState((function(){return{showToast:!1}}))},message:this.state.message,duration:3e3}))}}]),n}(r.Component),Xe=Object(V.a)()($e),et=function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).state={editingListName:"",itemInCreation:{}},r.statusTransitionTriggered=!1,r}return Object(m.a)(n,[{key:"componentDidUpdate",value:function(){!this.statusTransitionTriggered&&this.props.shoppingStore.currentShoppingList&&(this.props.model.onOpenShopping(this.props.shoppingStore.currentShoppingList),this.statusTransitionTriggered=!0)}},{key:"onCreatingItemChange",value:function(e){this.setState({itemInCreation:Object.assign(this.state.itemInCreation,Object(h.a)({},e.target.name,e.target.value))})}},{key:"onCreateComplete",value:function(e){e.name&&e.quantity&&(this.props.model.onCreateItemForCurrentShoppingList(e),this.setState({itemInCreation:{}}))}},{key:"render",value:function(){var e=this.props,t=e.shoppingStore,n=e.sessionStore,r=t.currentShoppingList,a=t.currentShoppingListItemsArray,s=t.currentDependentNeedsListsArray,o=t.currentDependentNeedsListsItemsArray,c=t.initializationDone,l="/go-shopping"===this.props.location.pathname?qe:Me;return c?r&&i.a.createElement(i.a.Fragment,null,"open"===r.lifecycleStatus&&i.a.createElement(C.A,null,i.a.createElement(C.x,null,i.a.createElement(Xe,{item:this.state.itemInCreation,mode:Me,isFirstItem:!a.length,onChange:this.onCreatingItemChange.bind(this),onEditingConcluded:this.onCreateComplete.bind(this)}))),i.a.createElement(Qe,{authUser:n.authUser,list:r,items:a,mode:l,dependentNeedLists:s,bringAlongItems:o,onEditList:this.props.model.onEditShoppingList,onEditItem:this.props.model.onEditShoppingItem,onShopItem:this.props.model.onShopShoppingItem,onDeleteItem:this.props.model.onRemoveShoppingItem,onReorderItems:this.props.model.onReorderItems,editMode:this.props.editMode,addSaveEditHandler:this.props.addSaveEditHandler})):i.a.createElement(Ye,{loading:c})}}]),n}(r.Component),tt=Object(A.a)(N.i,Object(o.b)("shoppingStore","sessionStore"),o.c)(et),nt=n(89),rt=function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).generateShareLink=function(){var e=r.props.shoppingStore.currentShoppingList.uid;return"".concat(window.location.origin,"/share/").concat(e)},r._hasUnmounted=!1,r.state={message:"",showToast:!1},r}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(P.a)(z.a.mark((function e(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._hasUnmounted){e.next=2;break}return e.abrupt("return");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this._hasUnmounted=!0}},{key:"render",value:function(){var e=this,t=this.props.t,n=t("Sharing_message"),r="Sharing_message"!==n?n+" ":"";return i.a.createElement(i.a.Fragment,null,i.a.createElement(nt.CopyToClipboard,{text:r+this.generateShareLink()},i.a.createElement(C.p,{title:t("Share"),color:"primary",onClick:function(){e.setState({showToast:!0,message:t("Sharing_link_copied")})}},i.a.createElement(C.u,{icon:$.I}))),i.a.createElement(C.P,{isOpen:this.state.showToast,onDidDismiss:function(){return e.setState((function(){return{showToast:!1}}))},message:this.state.message,duration:5e3}))}}]),n}(r.Component),it=Object(A.a)(Object(V.a)(),Object(o.b)("shoppingStore"),N.i)(rt),at=(n(76),Object(N.i)((function(){var e=Object(X.a)().t;return i.a.createElement(C.p,{color:"primary",href:"/go-shopping",title:e("Go Shopping")},i.a.createElement(C.u,{icon:$.e}))}))),st=(n(130),function(e){var t=e.onClick,n=e.title;return i.a.createElement(C.p,{color:"primary",title:n,onClick:t,"data-test":"fab-btn-create-list"},i.a.createElement(C.u,{icon:$.b}))}),ot=Object(A.a)(Object(o.b)("shoppingStore"))((function(e){var t=e.model,n=e.shoppingStore,r=e.hasItems,a=Object(X.a)().t,s=n.initializationDone,o=n.currentShoppingList,c=function(){return i.a.createElement(st,{title:a("Create Shopping List"),onClick:function(){return t.onCreateShoppingList("".concat(a("Shopping list")))}})};return s?o&&"archived"!==o.lifecycleStatus&&!r?null:i.a.createElement(C.o,{vertical:"bottom",horizontal:"end",className:"shopping-actions"},o&&"archived"!==o.lifecycleStatus?i.a.createElement(i.a.Fragment,null,i.a.createElement(C.p,null,i.a.createElement(C.u,{icon:$.p})),i.a.createElement(C.q,{side:"top"},i.a.createElement(it,null),i.a.createElement(at,{model:t}),i.a.createElement(c,null))):i.a.createElement(c,null)):null})),ct=function(e){var t=e.href,n=e.label;return i.a.createElement(C.e,{fill:"clear","data-test":"btn-all-lists",href:t},i.a.createElement("span",{className:"hide-sm-down"},i.a.createElement(B.a,null,n)),i.a.createElement(C.u,{slot:"start",icon:$.q}))},lt=function(e){var t=e.list,n=Object(X.a)().t;return t?t.name||n("Shopping list"):""},ut=function(e){var t=e.list,n=e.slot,r=void 0===n?"":n,a=e.defaultIcon,s=void 0===a?null:a;if(!t)return null;switch(t.lifecycleStatus){case"shopping":return i.a.createElement(C.u,{color:"primary",slot:r,icon:$.e});case"finished":return i.a.createElement(C.u,{color:"primary",slot:r,icon:$.C});case"archived":return i.a.createElement(C.u,{color:"danger",slot:r,icon:$.K});default:return s&&i.a.createElement(C.u,{color:"primary",slot:r,icon:s,"data-test":"icon-lifecycle"})}},pt=function(e){var t=e.shoppingList,n=e.slot,r=void 0===n?"":n,a=e.size,s=void 0===a?"":a;return t&&i.a.createElement(C.u,{size:s,slot:r,icon:t.allowCreateOwnNeeds?$.t:$.s})},dt=function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).state=Object.assign(r.state,{editMode:!1}),r.saveHandler=[],r}return Object(m.a)(n,[{key:"saveEdit",value:function(){this.saveHandler.forEach((function(e){return e()})),this.setState({editMode:!1})}},{key:"addSaveEditHandler",value:function(e){this.saveHandler.push(e)}},{key:"render",value:function(){var e=this,t=this.props.shoppingStore,n=t.currentShoppingList,r=t.currentShoppingListItemsArray,a=t.initializationDone,s=function(){return!e.state.editMode&&i.a.createElement(C.e,{color:"danger",fill:"clear","data-test":"btn-edit-list",onClick:function(){return e.setState({editMode:!0})}},i.a.createElement("span",{className:"hide-sm-down"},i.a.createElement(B.a,null,"Edit")),i.a.createElement(C.u,{slot:"end",icon:$.n}))},o=function(){return e.state.editMode&&i.a.createElement(C.e,{color:"danger",fill:"clear","data-test":"btn-save-list",onClick:function(){return e.saveEdit()}},i.a.createElement("span",{className:"hide-sm-down"},i.a.createElement(B.a,null,"Save")),i.a.createElement(C.u,{slot:"end",icon:$.F}))};return i.a.createElement(C.D,null,i.a.createElement(C.t,null,i.a.createElement(C.R,null,i.a.createElement(C.O,null,i.a.createElement(pt,{shoppingList:n}),i.a.createElement(ut,{list:n,slot:""}),"\xa0",i.a.createElement(lt,{list:n})),i.a.createElement(C.f,{slot:"primary"},i.a.createElement(s,null),i.a.createElement(o,null)),i.a.createElement(C.f,{slot:"secondary"},i.a.createElement(ct,{label:"All Shopping Lists",href:"/shopping-lists"})))),i.a.createElement(C.n,null,i.a.createElement(C.t,{collapse:"condense"},i.a.createElement(C.R,null,i.a.createElement(C.O,{size:"large"},i.a.createElement(pt,{shoppingList:n}),i.a.createElement(ut,{list:n,slot:""}),"\xa0",i.a.createElement(lt,{list:n})))),this.props.sessionStore.dbAuthenticated&&i.a.createElement(tt,{model:this,editMode:this.state.editMode,addSaveEditHandler:this.addSaveEditHandler.bind(this)})),i.a.createElement(C.r,null,a&&i.a.createElement(ot,{model:this,hasItems:r&&r.length})))}}]),n}(ze),mt=Object(A.a)(_,ce,Object(o.b)("shoppingStore","userStore","sessionStore"),o.c)(dt),ht=function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).statusTransitionTriggered=!1,r}return Object(m.a)(n,[{key:"componentDidUpdate",value:function(){!this.statusTransitionTriggered&&this.props.shoppingStore.currentShoppingList&&(this.props.model.onGoShopping(this.props.shoppingStore.currentShoppingList),this.statusTransitionTriggered=!0)}},{key:"render",value:function(){var e=this.props,t=e.shoppingStore,n=e.sessionStore,r=t.currentShoppingList,a=t.currentShoppingListItemsArray,s=t.currentDependentNeedsListsArray,o=t.currentDependentNeedsListsItemsArray,c=t.initializationDone;return c?r&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Qe,{authUser:n.authUser,list:r,items:a,mode:qe,dependentNeedLists:s,bringAlongItems:o,onCreateItem:this.props.model.onCreateItemForCurrentShoppingList,onEditItem:this.props.model.onEditShoppingItem,onShopItem:this.props.model.onShopShoppingItem,onDeleteItem:this.props.model.onRemoveShoppingItem,onReorderItems:this.props.model.onReorderItems})):i.a.createElement(Ye,{loading:c})}}]),n}(r.Component),ft=Object(A.a)(N.i,Object(o.b)("shoppingStore","sessionStore"),o.c)(ht),gt=Object(N.i)((function(){return i.a.createElement(C.p,{fill:"clear",href:"/finish-shopping"},i.a.createElement(C.u,{icon:$.C}))})),bt=function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=this.props.shoppingStore.currentShoppingList;return i.a.createElement(C.D,null,i.a.createElement(C.t,null,i.a.createElement(C.R,null,i.a.createElement(C.O,null,i.a.createElement(ut,{list:e}),"\xa0",i.a.createElement(lt,{list:e})),i.a.createElement(C.f,{slot:"primary"}),i.a.createElement(C.f,{slot:"secondary"},i.a.createElement(ee,{defaultHref:W})))),i.a.createElement(C.n,null,i.a.createElement(C.t,{collapse:"condense"},i.a.createElement(C.R,null,i.a.createElement(C.O,{size:"large"},i.a.createElement(ut,{list:e}),"\xa0",i.a.createElement(lt,{list:e})))),this.props.sessionStore.dbAuthenticated&&i.a.createElement(ft,{model:this})),i.a.createElement(C.r,null,e&&i.a.createElement(C.o,{vertical:"bottom",horizontal:"end"},i.a.createElement(gt,null))))}}]),n}(ze),Et=Object(A.a)(_,ce,Object(o.b)("shoppingStore","userStore","sessionStore"),o.c)(bt),St=function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).onToggleEditMode=function(){r.setState((function(e){return{editMode:!e.editMode,editText:r.props.list.name}}))},r.onChangeEditText=function(e){r.setState({editText:e.target.value})},r.onSaveEditText=function(){r.props.onEditNeedsList(r.props.list,r.state.editText),r.setState({editMode:!1})},r.state={editMode:!1,editText:""},r}return Object(m.a)(n,[{key:"render",value:function(){var e=this.props,t=e.list,n=e.ownList,r=e.items,a=e.mode,s=e.onCreateItem,o=e.onEditItem,c=e.onDeleteItem;return i.a.createElement(C.A,null,(r||[]).map((function(e,r){return i.a.createElement(Ge,{key:e.id||r,item:e,onEditingConcluded:o,onDeleteItem:c,onCreateNeed:s,mode:a,ownList:n,readOnly:t&&"open"!==t.lifecycleStatus})})))}}]),n}(r.Component),yt=function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).statusTransitionTriggered=!1,r}return Object(m.a)(n,[{key:"componentDidUpdate",value:function(){!this.statusTransitionTriggered&&this.props.shoppingStore.currentShoppingList&&(this.props.model.onFinishShopping(this.props.shoppingStore.currentShoppingList),this.statusTransitionTriggered=!0)}},{key:"render",value:function(){var e=this,t=this.props.shoppingStore,n=t.currentShoppingList,r=t.currentShoppingListItemsArray,a=t.currentDependentNeedsListsArray,s=t.currentDependentNeedsListsItemsArray,o=t.initializationDone;return o?n&&i.a.createElement(C.A,null,i.a.createElement(C.B,{lines:"inset"},i.a.createElement(C.y,null,i.a.createElement("h1",null,i.a.createElement(B.a,null,"My own shopped items")))),i.a.createElement(Qe,{key:n.userId,list:n,items:r.filter((function(e){return!!e.shopped})),ownList:!1,mode:Me}),a&&a.map((function(t){var n=s.filter((function(e){return!!e.shopped&&e.ownerId===t.userId}));if(!n.length)return null;var r=e.props.userStore.users[t.userId];return i.a.createElement(i.a.Fragment,null,i.a.createElement(C.x,{key:t.userId},r&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Ve,{user:r,size:"50px",slot:"end"}),i.a.createElement(C.y,null,i.a.createElement("h1",null,i.a.createElement(B.a,null,"For"),"\xa0",r.username)))),i.a.createElement(St,{list:t,items:n,ownList:!1,mode:Te}))}))):i.a.createElement(Ye,{loading:o})}}]),n}(r.Component),vt=Object(A.a)(N.i,Object(o.b)("shoppingStore","userStore"),o.c)(yt),Lt=function(e){var t=e.currentShoppingList,n=e.onArchiveShoppingList,r=e.history;return t?i.a.createElement(C.p,{onClick:function(){n(t),r.push(W)}},i.a.createElement(C.u,{icon:$.f})):null},Ot=function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){return i.a.createElement(C.D,null,i.a.createElement(C.t,null,i.a.createElement(C.R,null,i.a.createElement(C.f,{slot:"start"},i.a.createElement(ee,{defaultHref:"/go-shopping"})),i.a.createElement(C.O,null,i.a.createElement(B.a,null,"Finish shopping")))),i.a.createElement(C.n,null,this.props.sessionStore.dbAuthenticated&&i.a.createElement(vt,{model:this})),i.a.createElement(C.r,null,i.a.createElement(C.o,{vertical:"bottom",horizontal:"end"},i.a.createElement(Lt,{currentShoppingList:this.props.shoppingStore.currentShoppingList,onArchiveShoppingList:this.onArchiveShoppingList,history:this.props.history}))))}}]),n}(ze),jt=Object(A.a)(_,ce,N.i,Object(o.b)("shoppingStore","userStore","sessionStore"),o.c)(Ot),It=Object(N.i)((function(e){return i.a.createElement(C.A,null,e.lists&&e.lists.filter((function(t){return!!e.includeArchived||"archived"!==t.lifecycleStatus})).map((function(t){return i.a.createElement(C.x,{key:t.uid,"data-test":"list",onClick:function(){e.onSetCurrentList(t),e.history.push(e.hrefOnClick)}},i.a.createElement(C.y,null,i.a.createElement(lt,{list:t}),i.a.createElement("br",null),t&&t.createdAt&&i.a.createElement("span",{style:{fontSize:"0.7em"}},i.a.createElement(B.a,null,"Created on"),"\xa0",new Date(1e3*t.createdAt.seconds).toLocaleDateString())),i.a.createElement(ut,{list:t,slot:"start",defaultIcon:$.o}),"archived"!==t.lifecycleStatus&&i.a.createElement(C.e,{slot:"end",color:"danger","data-test":"btn-delete-list",size:"large",fill:"clear",onClick:function(){e.onRemoveList(t)}},i.a.createElement(C.u,{icon:$.K})))})))})),wt=function(e){var t=e.onCreateShoppingList,n=e.history;return i.a.createElement(C.p,{onClick:function(){t(),n.push(W)}},i.a.createElement(C.u,{icon:$.b}))},Ct=function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).state=Object(d.a)({},r.state,{includeArchived:!1}),r}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return i.a.createElement(C.D,null,i.a.createElement(C.t,null,i.a.createElement(C.R,null,i.a.createElement(C.f,{slot:"start"},i.a.createElement(ee,{defaultHref:W})),i.a.createElement(C.x,{lines:"none",slot:"end"},i.a.createElement(C.y,null,i.a.createElement(B.a,null,"Include archived")),i.a.createElement(C.Q,{checked:this.state.includeArchived,onIonChange:function(t){return e.setState({includeArchived:t.detail.checked})}})))),i.a.createElement(C.n,null,this.props.sessionStore.dbAuthenticated&&i.a.createElement(It,{lists:this.props.shoppingStore.shoppingListsArray,onSetCurrentList:function(t){return e.onSetCurrentShoppingList(t.uid)},onRemoveList:function(t){return e.onArchiveShoppingList(t,!1)},includeArchived:this.state.includeArchived,hrefOnClick:W})),i.a.createElement(C.r,null,i.a.createElement(C.o,{vertical:"bottom",horizontal:"end"},i.a.createElement(wt,{onCreateShoppingList:this.onCreateShoppingList,history:this.props.history}))))}}]),n}(ze),kt=Object(A.a)(_,ce,N.i,Object(o.b)("shoppingStore","userStore","sessionStore"),o.c)(Ct),Nt=function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).onListenForNeedsLists=function(){r.unsubscribeLists=r.props.firebase.myNeedsLists().orderBy("createdAt","desc").onSnapshot((function(e){var t=null,n=null;if(r.props.needsStore.setInitializationDone(!0),e.size){var i=[];e.forEach((function(e){var a=e.data();i.push(Object(d.a)({},a,{uid:e.id})),a.isCurrent&&a.shoppingListId&&(t=e.id,n=a.shoppingListId);var s=a.shoppingListOwnerId;s&&!r.props.userStore.users[s]&&r.props.firebase.user(s).get().then((function(e){var t=e.data();r.props.userStore.setUser(e.id,t)}))})),r.props.needsStore.setNeedsLists(i),r.setState(Object.assign(r.state,{listsLoading:!1}))}else r.props.needsStore.setNeedsLists([]),r.setState({listsLoading:!1,itemsLoading:!1});r.unsubscribeItems&&r.unsubscribeItems(),t&&r.onListenForCurrentNeedsListItems(t),r.unsubscribeOriginShoppingList&&r.unsubscribeOriginShoppingList(),r.unsubscribeOriginShoppingListItems&&r.unsubscribeOriginShoppingListItems(),n?r.unsubscribeOriginShoppingList=r.onListenForOriginShoppingList(n):r.clearOriginShoppingListInStore()}))},r.onListenForCurrentNeedsListItems=function(e){r.unsubscribeItems=r.props.firebase.listItems(e).onSnapshot((function(e){if(e.size){var t=[];e.forEach((function(e){return t.push(Object(d.a)({},e.data(),{uid:e.id,parentId:e.ref.parent.parent.id}))})),r.props.needsStore.setCurrentNeedsListItems(t),r.setState(Object.assign(r.state,{itemsLoading:!1}))}else r.props.needsStore.setCurrentNeedsListItems([]),r.setState({itemsLoading:!1})}))},r.onListenForOriginShoppingList=function(e){r.unsubscribeOriginShoppingList=r.props.firebase.list(e).onSnapshot((function(t){if(t.exists){var n=t.data();r.props.needsStore.setCurrentOriginShoppingList(n),r.unsubscribeOriginShoppingListItems&&r.unsubscribeOriginShoppingListItems(),r.onListenForOriginShoppingListItems(e)}else r.clearOriginShoppingListInStore()}))},r.onListenForOriginShoppingListItems=function(e){r.unsubscribeOriginShoppingListItems=r.props.firebase.listItems(e).onSnapshot((function(e){if(e.size){var t=[];e.forEach((function(e){return t.push(Object(d.a)({},e.data(),{uid:e.id}))})),r.props.needsStore.setCurrentOriginShoppingListItems(t)}else r.props.needsStore.setCurrentOriginShoppingListItems([])}))},r.onChangeText=function(e){r.setState({editingListName:e.target.value})},r.onCreateNeedsList=function(e){e.preventDefault(),r.props.firebase.createNeedsList({name:r.state.editingListName}),r.setState({editingListName:""})},r.onEditNeedsList=function(e,t){e.uid;var n=Object(Fe.a)(e,["uid"]);r.props.firebase.editList(e.uid,Object(d.a)({},n,{name:t}))},r.onArchiveNeedsList=function(e){r.props.firebase.archiveNeedsList(e)},r.onRemoveNeedsList=function(e){r.props.firebase.deleteList(e)},r.onSetCurrentNeedsList=function(e){r.props.firebase.setCurrentNeedsList(e)},r.onCreateItemForCurrentNeedsList=function(e,t){var n=t.name,i=t.quantity,a=void 0===i?"":i,s=t.unit,o=void 0===s?"":s,c=r.props.needsStore.currentNeedsList;c?r.props.firebase.addNeededItemFromShoppingListItem(c.uid,e,{name:n,quantity:a,unit:o}):console.error("Cannot create item for non-existing needsList")},r.onEditNeededItem=function(e){var t=r.props.needsStore.currentNeedsList;t?r.props.firebase.editItem(t.uid,e):console.error("Cannot edit item in non-existing needsList")},r.onRemoveNeededItem=function(e){var t=r.props.needsStore.currentNeedsList;t?r.props.firebase.listItem(t.uid,e).delete():console.error("Cannot remove item from non-existing needsList")},r.onAddFromShoppingListItem=function(e){var t=r.props.needsStore.currentNeedsList;t?r.props.firebase.addNeededItemFromShoppingListItem(t.uid,Object.assign(e,{quantity:0})):console.error("Cannot add item to non-existing needsList")},r.state={listsLoading:!1,itemsLoading:!1},r}return Object(m.a)(n,[{key:"_tryInitialization",value:function(){this.props.sessionStore.dbAuthenticated&&!this.unsubscribeLists&&this.onListenForNeedsLists()}},{key:"componentDidMount",value:function(){this.props.needsStore.needsListsArray.length||this.setState({listsLoading:!0,itemsLoading:!0}),this._tryInitialization()}},{key:"componentDidUpdate",value:function(){this._tryInitialization()}},{key:"componentWillUnmount",value:function(){this.unregisterAllListeners()}},{key:"unregisterAllListeners",value:function(){this.unsubscribeLists&&this.unsubscribeLists(),this.unsubscribeItems&&this.unsubscribeItems(),this.unsubscribeOriginShoppingList&&this.unsubscribeOriginShoppingList(),this.unsubscribeOriginShoppingListItems&&this.unsubscribeOriginShoppingListItems()}},{key:"clearOriginShoppingListInStore",value:function(){this.props.needsStore.setCurrentOriginShoppingList(null),this.props.needsStore.setCurrentOriginShoppingListItems([])}}]),n}(r.Component),At={name:"",quantity:"",unit:""},xt=function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).state={editingListName:"",itemInCreation:Object(d.a)({},At)},r}return Object(m.a)(n,[{key:"onCreatingItemChange",value:function(e){this.setState({itemInCreation:Object.assign(this.state.itemInCreation,Object(h.a)({},e.target.name,e.target.value))})}},{key:"onCreateComplete",value:function(e){e.name&&e.quantity&&(this.props.model.onCreateItemForCurrentNeedsList(this.state.itemInCreation,e),this.setState({itemInCreation:Object(d.a)({},At)}))}},{key:"copyPotentialNeed",value:function(e){var t=e.unit&&e.quantity>=100?100:1;this.props.model.onCreateItemForCurrentNeedsList(e,Object.assign(e,{quantity:t}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.needsStore,r=t.sessionStore,a=n.currentNeedsList,s=n.potentiallyNeededItemsArray,o=n.currentNeedsListItemsArray,c=n.currentOriginShoppingList,l=n.initializationDone,u=this.state.itemInCreation,p=u&&u.name,d=a&&"open"===a.lifecycleStatus&&(p||c&&c.allowCreateOwnNeeds)&&i.a.createElement(C.A,null,i.a.createElement(C.x,{key:"createItem"},i.a.createElement(Xe,{item:u,onChange:this.onCreatingItemChange.bind(this),onEditingConcluded:this.onCreateComplete.bind(this),highlight:p,mode:Te}))),m=c&&!c.allowCreateOwnNeeds&&"open"===c.lifecycleStatus&&i.a.createElement(C.x,{color:"warning",className:"permanent-message"},i.a.createElement(C.N,null,i.a.createElement(B.a,null,"Creating_own_items_disabled"))),h=function(){return i.a.createElement(C.s,null,i.a.createElement(C.H,null,i.a.createElement(C.m,null,i.a.createElement(C.x,null,i.a.createElement(K,{maxWidth:"150px",textStart:"Nothing",textEnd:"SharedYet"})))))},f=function(e){var t=e.lifecycleStatus;if("open"===t)return null;var n={};return n.shopping=i.a.createElement(B.a,null,"Edit_not_possible_shopping"),n.finished=i.a.createElement(B.a,null,"Edit_not_possible_finished"),n.archived=i.a.createElement(B.a,null,"Edit_not_possible_archived"),i.a.createElement(C.x,{color:"warning",className:"permanent-message"},n[t])};return l?i.a.createElement(i.a.Fragment,null,c&&i.a.createElement(f,{lifecycleStatus:c.lifecycleStatus}),d,a&&i.a.createElement(St,{authUser:r.authUser,list:c,items:o,onCreateItem:this.props.model.onCreateItemForCurrentNeedsList,onEditItem:this.props.model.onEditNeededItem,onDeleteItem:this.props.model.onRemoveNeededItem,ownList:!0,mode:Te}),!a&&i.a.createElement(h,null),c&&i.a.createElement(St,{authUser:r.authUser,list:c,items:s,onCreateItem:function(t){return e.copyPotentialNeed(t)},onEditItem:this.props.model.onEditNeededItem,onDeleteItem:this.props.model.onRemoveNeededItem,ownList:!1,mode:"potential"}),m):i.a.createElement(Ye,{loading:l})}}]),n}(r.Component),Dt=Object(A.a)(Object(o.b)("needsStore","sessionStore"),o.c)(xt),_t=(n(77),function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=this.props.needsStore.currentNeedsList,t=function(t){var n=t.userStore,r=t.size;if(e&&n.users&&n.users[e.shoppingListOwnerId])return i.a.createElement(C.O,{size:r},i.a.createElement(ut,{list:e}),"\xa0",i.a.createElement(lt,{list:e}));return null};return i.a.createElement(C.D,null,i.a.createElement(C.t,null,i.a.createElement(C.R,null,i.a.createElement(t,{needsStore:this.props.needsStore,userStore:this.props.userStore,size:"medium"}),i.a.createElement(C.f,{slot:"secondary"},i.a.createElement(ct,{label:"All Needs Lists",href:"/needs-lists"})))),i.a.createElement(C.n,null,i.a.createElement(C.t,{collapse:"condense"},i.a.createElement(C.R,null,i.a.createElement(t,{needsStore:this.props.needsStore,userStore:this.props.userStore,size:"large"}))),this.props.sessionStore.dbAuthenticated&&i.a.createElement(Dt,{model:this})))}}]),n}(Nt)),Ut=Object(A.a)(_,ce,Object(V.a)(),Object(o.b)("needsStore","userStore","sessionStore"),o.c)(_t),Ft=function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).state=Object(d.a)({},r.state,{includeArchived:!1}),r}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return i.a.createElement(C.D,null,i.a.createElement(C.t,null,i.a.createElement(C.R,null,i.a.createElement(C.f,{slot:"start"},i.a.createElement(ee,{defaultHref:"/needs"})),i.a.createElement(C.x,{lines:"none",slot:"end"},i.a.createElement(C.y,null,i.a.createElement(B.a,null,"Include archived")),i.a.createElement(C.Q,{checked:this.state.includeArchived,onIonChange:function(t){return e.setState({includeArchived:t.detail.checked})}})))),i.a.createElement(C.n,null,this.props.sessionStore.dbAuthenticated&&i.a.createElement(It,{lists:this.props.needsStore.needsListsArray,onSetCurrentList:function(t){return e.onSetCurrentNeedsList(t.uid)},onRemoveList:function(t){return e.onArchiveNeedsList(t)},includeArchived:this.state.includeArchived,hrefOnClick:"/needs"})),i.a.createElement(C.r,null))}}]),n}(Nt),zt=Object(A.a)(_,ce,Object(o.b)("needsStore","userStore","sessionStore"),o.c)(Ft),Pt=function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).state={shoppingListId:null,sharedShoppingList:null,sharingUser:null,isValid:!1,loading:!0},r}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(P.a)(z.a.mark((function e(){var t,n,r,i,a,s;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.location,n=t.pathname,r=n.replace("/share/",""),e.next=5,this.props.firebase.list(r).get();case 5:if(i=e.sent,!(a=i.data())){e.next=13;break}return e.next=10,this.props.firebase.user(a.userId).get();case 10:e.t0=e.sent.data(),e.next=14;break;case 13:e.t0=null;case 14:s=e.t0,this.setState({shoppingListId:r,sharedShoppingList:a,sharingUser:s,isValid:i.exists,loading:!1});case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onCreateNeedsListForShoppingList",value:function(e,t){var n=this;this.props.firebase.createNeedsListForShoppingList(e,t).then((function(){n.props.history.push("/needs")}))}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.shoppingListId,r=e.sharingUser,a=e.isValid,s=function(e){return t?i.a.createElement(Ye,{loading:t}):t||a?!t&&a?i.a.createElement(i.a.Fragment,null,i.a.createElement(C.g,{style:{padding:"30px"}},i.a.createElement(C.h,{class:"ion-text-center"},i.a.createElement(we,{user:r,size:150}),i.a.createElement(C.j,null,r.username,"\xa0(",r.email,")"),i.a.createElement(C.i,null,i.a.createElement(B.a,null,"has shared a shopping list with you")))),i.a.createElement(C.r,null,i.a.createElement(Mt,Object.assign({},e,{shoppingListId:n,sharingUser:r})))):null:i.a.createElement("div",null,"The list with id ",n," does not exist")};return i.a.createElement(i.a.Fragment,null,i.a.createElement(C.D,null,i.a.createElement(C.t,null,i.a.createElement(C.R,null,i.a.createElement(C.O,null,i.a.createElement(B.a,null,"Shared")))),i.a.createElement(C.n,null,i.a.createElement(C.t,{collapse:"condense"},i.a.createElement(C.R,null,i.a.createElement(C.O,{size:"large"},i.a.createElement(B.a,null,"Shared")))),i.a.createElement(s,Object.assign({},this.props,{onCreateNeedsListForShoppingList:this.onCreateNeedsListForShoppingList.bind(this)})))))}}]),n}(r.Component),Mt=function(e){var t=e.shoppingListId,n=e.sharingUser,r=e.onCreateNeedsListForShoppingList;return i.a.createElement(C.e,{type:"button",expand:"block",onClick:function(){return r(t,n.username)}},i.a.createElement(B.a,null,"Open shared shopping list"))},Rt=Object(A.a)(_,ce,Object(o.b)("needsStore","sessionStore"),o.c)(Pt),Tt=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(C.M,null,i.a.createElement(C.G,null,i.a.createElement(N.c,{path:"/pw-forget",render:function(){return i.a.createElement(ie,null)}}),i.a.createElement(N.c,{path:"/pw-change",render:function(){return i.a.createElement(Oe,null)}}),i.a.createElement(N.c,{path:"/account",render:function(){return i.a.createElement(Ne,null)}}),i.a.createElement(N.c,{path:"/shopping-lists",render:function(){return i.a.createElement(kt,null)}}),i.a.createElement(N.c,{path:W,render:function(){return i.a.createElement(mt,null)}}),i.a.createElement(N.c,{path:"/finish-shopping",render:function(){return i.a.createElement(jt,null)}}),i.a.createElement(N.c,{path:"/go-shopping",render:function(){return i.a.createElement(Et,null)}}),i.a.createElement(N.c,{path:"/needs-lists",render:function(){return i.a.createElement(zt,null)}}),i.a.createElement(N.c,{path:"/needs",render:function(){return i.a.createElement(Ut,null)}}),i.a.createElement(N.c,{path:"/share/:id",component:Rt}),i.a.createElement(N.c,{path:"/admin",render:function(){return i.a.createElement(Ue,null)}}),i.a.createElement(N.b,{exact:!0,from:"/signin",to:W}),i.a.createElement(N.b,{exact:!0,from:"/signup",to:W}),i.a.createElement(N.b,{exact:!0,from:"/",to:W})),i.a.createElement(C.K,{slot:"bottom"},i.a.createElement(C.L,{tab:"Shopping",href:W,"data-test":"tab-btn-shopping"},i.a.createElement(C.u,{icon:$.e}),i.a.createElement(C.y,null,i.a.createElement(B.a,null,"Shopping"))),i.a.createElement(C.L,{tab:"Needs",href:"/needs","data-test":"tab-btn-needs"},i.a.createElement(C.u,{icon:$.I}),i.a.createElement(C.y,null,i.a.createElement(B.a,null,"Shared"))),i.a.createElement(C.L,{tab:"Account",href:"/account","data-test":"tab-btn-account"},i.a.createElement(C.u,{icon:$.B}),i.a.createElement(C.y,null,i.a.createElement(B.a,null,"Account"))))))},qt=function(){var e=Object(N.h)();return i.a.createElement(C.M,null,i.a.createElement(C.G,null,i.a.createElement(N.e,null,i.a.createElement(N.c,{path:"/signup",component:Z}),i.a.createElement(N.c,{path:"/signin",component:Ee}),i.a.createElement(N.c,{path:"/pw-forget",render:function(){return i.a.createElement(ie,null)}}),i.a.createElement(N.b,{from:"/",to:{pathname:"/signin",state:{from:e}}}))),i.a.createElement(C.K,{slot:"bottom"},i.a.createElement(C.L,{tab:"Sign In",href:"/signin","data-test":"tab-btn-signin"},i.a.createElement(C.u,{icon:$.r}),i.a.createElement(C.y,null,"Sign In"))))},Ht=Object(A.a)(Object(o.b)("sessionStore"),o.c)((function(e){var t=e.sessionStore;return t.authUser?i.a.createElement(Tt,{authUser:t.authUser}):i.a.createElement(qt,{authUser:t.authUser})})),Wt=(n(131),n(132),n(133),n(134),n(135),n(136),n(137),n(138),n(139),n(140),n(141),n(142),n(143),function(e){Object(I.a)(n,e);var t=Object(w.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.handlerRegistered||(this.handlerRegistered=this.props.registerAuthListener((function(t){e.props.sessionStore.setDbAuthenticated(!!t)})))}},{key:"render",value:function(){return i.a.createElement(C.b,null,i.a.createElement(k.a,null,i.a.createElement(Ht,null)))}}]),n}(r.Component)),Bt=Object(A.a)(se,Object(o.b)("sessionStore"))(Wt),Vt=n(65),Kt=n(35),Gt=n(90);Vt.a.use(Gt.a).use(Kt.f).init({resources:{en:{translation:{"A shopping list has been shared with you":"A shopping list has been shared with you!",Account:"Account",Account_already_exists:"\n                An account with this E-Mail address already exists.\n                Try to login with this account instead. If you think the\n                account is already used from one of the social logins, try\n                to sign in with one of them. Afterward, associate your accounts\n                on your personal account page.\n                ","All Needs Lists":"Shared with me","All Shopping Lists":"My Shopping Lists","Allow friends to add own needs":"Allow friends to add own needs",archived:"archived",Back:"Back",by:"by","Change Password":"Change Password","Create Shopping List":"New Shopping List","Created on":"Created on",Creating_own_items_disabled:"The shopping list owner does not allow to add items which he does not shop anyway",Edit:"Edit",Edit_not_possible_shopping:"Editing ist not possible: It's currently being shopped! If you want to change something, better give the shopper a call ;)",Edit_not_possible_finished:"Editing ist not possible: Shopping has already been completed.",Edit_not_possible_archived:"Editing ist not possible: The shopping list has been archived.",Email:"Email",Email_confirmation_sent:"E-Mail confirmation sent: \n\n                Check you E-Mails (Spam folder included) for a confirmation E-Mail.\n\n                Refresh this page once you confirmed your E-Mail.",Email_verification_needed:"Verify your E-Mail: \n\n                Check you E-Mails (Spam folder included) for a confirmation E-Mail \n\n                or send another confirmation E-Mail.","Finish shopping":"Finish shopping",finished:"Shopping finished",For:"For","Forgot Password":"Forgot Password?","Full Name":"Full Name","Go Shopping":"Go shopping","has shared a shopping list with you":"has shared a shopping list with you","Include archived":"Include archived lists","Item name":"Item","Is confirmed. Reload":"Is confirmed. Reload",Loading_message:"Loading...","My own shopped items":"My own shopped items",Name_mandatory:"Please enter what you want to shop!",Name_and_quantity_mandatory:"How much of what do you want to add to your cart?","No account yet?":"No account yet?","Open shared shopping list":"Open shared shopping list","or with":"or with",Password:"Password","Plan Shopping":"Plan Shopping",Quantity:"Quantity","Reset My Password":"Reset My Password","Repeat Password":"Repeat Password",Save:"Save","Send confirmation E-Mail":"Send confirmation E-Mail",Share:"Share",Sharing_message:"Hi there! I'm about to go for shopping. Is there something on my shopping list which I shall bring along for you as well? Here's a link to my shopping list:",Sharing_link_copied:"A link to your shopping list has been copied to the clipboard.\nSend it to people you like so that they ask you to bring something along for you!",Sharing_link_received:"You received a link to a shared shopping list! Just sign-in or -up quickly to see what items your friend is going to shop!","Sign In":"Sign In","Sign Out":"Sign Out","Sign Up":"Sign Up",Shared:"Shared",shopping:"currently shopping",Shopping:"Shopping","Shopping list":"Shopping list",Username:"Username"}},de:{translation:{"A shopping list has been shared with you":"Ein Einkaufszettel wurde mit Dir geteilt!",Account:"Konto",Account_already_exists:"\n                Ein Konto mit dieser E-Mail-Adresse existiert bereits.\n\n                Versuche stattdessen, Dich mit diesem Konto anzumelden.\n\n                Wenn Du glaubst, dass das Konto bereits von einem der sozialen Logins aus verwendet wird, \n\n                versuche, Dich mit diesem anzumelden.\n\n                Danach verbinde Deine Konten auf Deiner pers\xf6nlichen Konto-Seite.\n                ","All Needs Lists":"Mit mir geteilt","All Shopping Lists":"Meine Einkaufszettel","Allow friends to add own needs":"Freunde k\xf6nnen neue Artikel erg\xe4nzen",archived:"archiviert",Back:"Zur\xfcck",by:"von","Change Password":"Passwort \xe4ndern","Create Shopping List":"Neuer Einkauszettel","Created on":"Angelegt am",Creating_own_items_disabled:"Der Eigent\xfcmer des Einkaufszettels erlaubt es nicht, dass Du weitere Artikel erg\xe4nzt",Edit:"Bearbeiten",Edit_not_possible_shopping:"Bearbeiten ist nicht mehr m\xf6glich: Es wird gerade eingekauft! Wenn Du noch etwas \xe4ndern m\xf6chtest, ruf lieber an ;)",Edit_not_possible_finished:"Bearbeiten ist nicht mehr m\xf6glich: Der Einkauf ist schon beendet!",Edit_not_possible_archived:"Bearbeiten ist nicht mehr m\xf6glich: Der Einkaufszettel wurde archiviert",Email:"Email",Email_confirmation_sent:"Best\xe4tigungs-E-Mail wurde gesendet: \n\n                Pr\xfcfe Deine E-Mails (inklusive des Spam-Ordners) f\xfcr eine Best\xe4tigungs-E-Mail.\n\n                Aktualisiere diese Seite, sobald Du Deine E-Mail best\xe4tigt hast.",Email_verification_needed:"Verifiziere Deine E-Mail-Adresse: \n\n                Pr\xfcfe Deine E-Mails (inklusive des Spam-Ordners) f\xfcr eine Best\xe4tigungs-E-Mail.\n\n                oder sende eine weitere E-Mail-Best\xe4tigungs-Anfrage.","Finish shopping":"Einkauf beenden",finished:"Einkauf beendet",For:"F\xfcr","Forgot Password":"Passwort vergessen?","Full Name":"Vollst\xe4ndiger Name","Go Shopping":"Einkaufen","has shared a shopping list with you":"hat einen Einkaufszettel mit Dir geteilt!",Help:"Hilfe","Include archived":"Auch archivierte anzeigen","Item name":"Artikel","Is confirmed. Reload":"Ist best\xe4tigt. Aktualisieren!",Loading_message:"Ich lade...",Login:"Anmelden",Logout:"Abmelden","My own shopped items":"Meine eigenen Eink\xe4ufe",Name_mandatory:"Bitte gib an, was Du einkaufen m\xf6chtest!",Name_and_quantity_mandatory:"Was und wieviel soll es sein?","No account yet?":"Noch kein Konto?","Open shared shopping list":"Geteilten Einkaufszettel \xf6ffnen","or with":"oder mit",Password:"Passwort","Plan Shopping":"Einkauf planen",Quantity:"Menge","Repeat Password":"Passwort wiederholen","Reset My Password":"Mein Passwort zur\xfccksetzen",Save:"Speichern","Send confirmation E-Mail":"Best\xe4tigungs-E-Mail senden",Share:"Teilen","Sign In":"Anmelden","Sign Out":"Abmelden","Sign Up":"Anmelden",Shared:"Geteilt",Sharing_message:"Hallo! Ich gehe demn\xe4chst etwas einkaufen. \nSteht auf meinem Einkaufszettel etwas, das ich Dir auch mitbringen soll? Hier ist ein Link auf meinen Einkaufszettel:",Sharing_link_copied:"\n                Ein Link zu Deinem Einkaufszettel wurde in die Zwischenablage kopiert.\n\n                Schicke ihn an Leute, denen Du etwas, das ohnehin schon auf Deinem Zettel steht, mitbringen m\xf6chtest.\n                ",Sharing_link_received:"Ein Freund hat einen Einkaufszettel mit Dir geteilt! \nMelde Dich flott an, um zu erfahren, was drauf steht!",shopping:"wird eingekauft",Shopping:"Einkaufen","Shopping list":"Einkaufszettel",Username:"Benutzername"}}},fallbackLng:"en",debug:!0,keySeparator:!1,interpolation:{escapeValue:!1}});Vt.a;s.a.render(i.a.createElement(o.a,j,i.a.createElement(U.Provider,{value:new H},i.a.createElement(Bt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},61:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},93:function(e,t,n){e.exports=n(144)},99:function(e,t,n){var r={"./ion-action-sheet-ios.entry.js":[145,67],"./ion-action-sheet-md.entry.js":[146,68],"./ion-alert-ios.entry.js":[147,59],"./ion-alert-md.entry.js":[148,60],"./ion-app_8-ios.entry.js":[149,53],"./ion-app_8-md.entry.js":[150,54],"./ion-avatar_3-ios.entry.js":[151,8],"./ion-avatar_3-md.entry.js":[152,9],"./ion-back-button-ios.entry.js":[153,10],"./ion-back-button-md.entry.js":[154,11],"./ion-backdrop-ios.entry.js":[155,12],"./ion-backdrop-md.entry.js":[156,13],"./ion-button_2-ios.entry.js":[157,69],"./ion-button_2-md.entry.js":[158,70],"./ion-card_5-ios.entry.js":[159,14],"./ion-card_5-md.entry.js":[160,15],"./ion-checkbox-ios.entry.js":[161,16],"./ion-checkbox-md.entry.js":[162,17],"./ion-chip-ios.entry.js":[163,18],"./ion-chip-md.entry.js":[164,19],"./ion-col_3.entry.js":[165,20],"./ion-datetime_3-ios.entry.js":[166,57],"./ion-datetime_3-md.entry.js":[167,58],"./ion-fab_3-ios.entry.js":[168,21],"./ion-fab_3-md.entry.js":[169,22],"./ion-img.entry.js":[170,23],"./ion-infinite-scroll_2-ios.entry.js":[171,24],"./ion-infinite-scroll_2-md.entry.js":[172,25],"./ion-input-ios.entry.js":[173,26],"./ion-input-md.entry.js":[174,27],"./ion-item-option_3-ios.entry.js":[175,71],"./ion-item-option_3-md.entry.js":[176,72],"./ion-item_8-ios.entry.js":[177,73],"./ion-item_8-md.entry.js":[178,74],"./ion-loading-ios.entry.js":[179,28],"./ion-loading-md.entry.js":[180,29],"./ion-menu_3-ios.entry.js":[181,75],"./ion-menu_3-md.entry.js":[182,76],"./ion-modal-ios.entry.js":[183,55],"./ion-modal-md.entry.js":[184,56],"./ion-nav_2.entry.js":[185,66],"./ion-popover-ios.entry.js":[186,30],"./ion-popover-md.entry.js":[187,31],"./ion-progress-bar-ios.entry.js":[188,32],"./ion-progress-bar-md.entry.js":[189,33],"./ion-radio_2-ios.entry.js":[190,34],"./ion-radio_2-md.entry.js":[191,35],"./ion-range-ios.entry.js":[192,77],"./ion-range-md.entry.js":[193,78],"./ion-refresher_2-ios.entry.js":[194,61],"./ion-refresher_2-md.entry.js":[195,62],"./ion-reorder_2-ios.entry.js":[196,36],"./ion-reorder_2-md.entry.js":[197,37],"./ion-ripple-effect.entry.js":[198,38],"./ion-route_4.entry.js":[199,79],"./ion-searchbar-ios.entry.js":[200,80],"./ion-searchbar-md.entry.js":[201,81],"./ion-segment_2-ios.entry.js":[202,82],"./ion-segment_2-md.entry.js":[203,83],"./ion-select_3-ios.entry.js":[204,84],"./ion-select_3-md.entry.js":[205,85],"./ion-slide_2-ios.entry.js":[206,86],"./ion-slide_2-md.entry.js":[207,87],"./ion-spinner.entry.js":[208,39],"./ion-split-pane-ios.entry.js":[209,40],"./ion-split-pane-md.entry.js":[210,41],"./ion-tab-bar_2-ios.entry.js":[211,42],"./ion-tab-bar_2-md.entry.js":[212,43],"./ion-tab_2.entry.js":[213,44],"./ion-text.entry.js":[214,45],"./ion-textarea-ios.entry.js":[215,46],"./ion-textarea-md.entry.js":[216,47],"./ion-toast-ios.entry.js":[217,63],"./ion-toast-md.entry.js":[218,64],"./ion-toggle-ios.entry.js":[219,48],"./ion-toggle-md.entry.js":[220,49],"./ion-virtual-scroll.entry.js":[221,50]};function i(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],i=t[0];return n.e(t[1]).then((function(){return n(i)}))}i.keys=function(){return Object.keys(r)},i.id=99,e.exports=i}},[[93,7,51]]]);
//# sourceMappingURL=main.4a3e4810.chunk.js.map